<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta content="73d8ba46-8c12-43f6-8c22-24aa21b8d93d" name="onetrust-data-domain" /><meta content="https://tags.tiqcdn.com/utag/vmware/microsites-privacy/prod/utag.js" name="microsites-utag" /><script src="https://d1fto35gcfffzn.cloudfront.net/assets/jquery-1.11.2.min.js"></script><script src="//www.vmware.com/files/templates/inc/utag_data.js"></script><script src="//tags.tiqcdn.com/utag/vmware/microsites-privacy/prod/utag.sync.js"></script><script>function OptanonWrapper() { { window.dataLayer.push({ event: 'OneTrustGroupsUpdated' }); } }</script><script src="/js/gtm.js"></script><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="googlebot" content="NOODP" /><meta name="google-site-verification" content="nSYeDgyKM9mw5CWcZuD0xu7iSWXlJijAlg9rcxVOYf4" /><meta name="google-site-verification" content="6UEaC3SWhpGQvqRnSJIEm2swxXpM5Adn4dxZhFsNdw0" /><meta content="width=device-width, initial-scale=1.0, maximum-scale=1, minimum-scale=1, user-scalable=no" id="viewport" name="viewport" /><link href="https://fonts.googleapis.com/css?family=Raleway:400,500,600,700" rel="stylesheet" /><link rel="stylesheet" href="/css/rabbit.css" type="text/css" /><link rel="stylesheet" href="/css/highlightjs_style.css" type="text/css" /><link rel="stylesheet" href="/css/rabbit-next.css" type="text/css" /><!--[if IE 6]>
      <link rel="stylesheet" href="/css/rabbit-ie6.css" type="text/css" />
      <![endif]--><link rel="icon" type="/image/vnd.microsoft.icon" href="/favicon.ico" /><link rel="stylesheet" href="/css/tutorial.css" type="text/css" /><script async="true" type="text/javascript" src="/js/site.js"></script><title> Configuration
 â€” RabbitMQ</title></head>
  <body id="configure"><div id="outerContainer"><div class="container"><div class="rabbit-logo"><a href="/"><img src="/img/logo-rabbitmq.svg" alt="RabbitMQ" /></a></div><a class="btn menubtn" onclick="showHide()">Menu <img src="/img/carrot-down-white.svg" /></a><div class="mobilemenuicon" onclick="showHide()"><img src="/img/mobile-menu-icon.svg" /></div><div id="nav"><ul id="mainNav"><li><a href="/#features">Features</a></li><li><a href="/#getstarted">Get Started</a></li><li><a href="/#support">Support</a></li><li><a href="/#community">Community</a></li><li><a href="/documentation.html">Docs</a></li></ul></div></div><div class="nav-separator"></div><div id="innerContainer" class="container"><div id="left-content"><h1> Configuration
</h1>


<h2><a id="overview" class="anchor" href="#overview">Overview</a></h2>
<p>RabbitMQ comes with default built-in settings. Those can be entirely
sufficient in some environment (e.g. development and QA).
For all other cases, as well as <a href="./production-checklist.html">production deployment tuning</a>,
there is a way to configure many things in the broker as well as <a href="./plugins.html">plugins</a>.</p>
<p>This guide covers a number of topics related to configuration:</p>
<ul>
<li><a href="#means-of-configuration">Different ways</a> in which various settings of the server and plugins are configured</li>
<li><a href="#configuration-files">Configuration file(s)</a>: primary <a href="#config-file">rabbitmq.conf</a> or <a href="#config-confd-directory">a directory of .conf files</a>, and optional <a href="#advanced-config-file">advanced.config</a></li>
<li>Default <a href="#config-location">configuration file location(s)</a> on various platforms</li>
<li>Configuration troubleshooting: how to <a href="#verify-configuration-config-file-location">find config file location</a> and <a href="#verify-configuration-effective-configuration">inspect and verify effective configuration</a></li>
<li><a href="#env-variable-interpolation">Environment variable interpolation</a> in <span class="code ">rabbitmq.conf</span></li>
<li><a href="#customise-environment">Environment variables</a> used by RabbitMQ nodes</li>
<li><a href="#kernel-limits">Operating system (kernel) limits</a></li>
<li>Available <a href="#config-items">core server settings</a></li>
<li>Available <a href="#supported-environment-variables">environment variables</a></li>
<li>How to <a href="#configuration-encryption">encrypt sensitive configuration values</a></li>
</ul>
<p>and more.</p>
<p>Since configuration affects many areas of the system, including plugins, individual <a href="./documentation.html">documentation guides</a>
dive deeper into what can be configured. <a href="./runtime.html">Runtime Tuning</a> is a companion to this guide that focuses
on the configurable parameters in the runtime. <a href="./production-checklist.html">Production Checklist</a> is a related guide
that outlines what settings will likely need tuning in most production environments.</p>
<h2><a id="means-of-configuration" class="anchor" href="#means-of-configuration">Means of Configuration</a></h2>
<p>A RabbitMQ node can be configured using a number of mechanisms responsible
for different areas:</p>
<table>
  <caption>Ways of configuration RabbitMQ</caption>
  <thead>
    <td><strong>Mechanism</strong></td>
    <td><strong>Description</strong></td>
  </thead>

  <tr>
    <td>
      <a href="#configuration-files">Configuration File(s)</a>
    </td>
    <td>
      contains server and plugin settings for

      <ul>
        <li><a href="./networking.html">TCP listeners and other networking-related settings</a></li>
        <li><a href="./ssl.html">TLS</a></li>
        <li><a href="./alarms.html">resource constraints (alarms)</a></li>
        <li><a href="./access-control.html">authentication and authorisation backends</a></li>
        <li><a href="./persistence-conf.html">message store settings</a></li>
      </ul>

      and so on.
    </td>
  </tr>
  <tr>
    <td>
      <a href="#customise-environment">Environment Variables</a>
    </td>
    <td>
      define <a href="./cli.html#node-names">node name</a>, file and directory locations, runtime flags taken from the shell, or set in
      the environment configuration file, <span class="code ">rabbitmq-env.conf</span> (Linux, MacOS, BSD)
      and <span class="code ">rabbitmq-env-conf.bat</span> (Windows)
    </td>
  </tr>

  <tr>
    <td>
      <a href="./cli.html">rabbitmqctl</a>
    </td>
    <td>
      When <a href="./access-control.html">internal authentication/authorisation backend</a> is used,
      <span class="code ">rabbitmqctl</span> is the tool that manages virtual hosts, users and permissions. It
      is also used to manage <a href="./parameters.html">runtime parameters and policies</a>.
    </td>
  </tr>

  <tr>
    <td>
      <a href="./cli.html">rabbitmq-queues</a>
    </td>
    <td>
      <span class="code ">rabbitmq-queues</span> is the tool that manages settings specific to <a href="./quorum-queues.html">quorum queues</a>.
    </td>
  </tr>

  <tr>
    <td>
      <a href="./cli.html">rabbitmq-plugins</a>
    </td>
    <td>
      <span class="code ">rabbitmq-plugins</span> is the tool that manages <a href="./plugins.html">plugins</a>.
    </td>
  </tr>

  <tr>
    <td>
      <a href="./cli.html">rabbitmq-diagnostics</a>
    </td>
    <td>
      <span class="code ">rabbitmq-diagnostics</span> allows for inspection of node state, including effective configuration,
      as well as many other metrics and <a href="./monitoring.html">health checks</a>.
    </td>
  </tr>

  <tr>
    <td>
      <a href="parameters.html">Parameters and Policies</a>
    </td>
    <td>
      defines cluster-wide settings which can change at run time
      as well as settings that are convenient to configure for groups of queues (exchanges, etc)
      such as including optional queue arguments.
    </td>
  </tr>

  <tr>
    <td>
      <a href="runtime.html">Runtime (Erlang VM) Flags</a>
    </td>
    <td>
      Control lower-level aspects of the system: memory allocation settings, inter-node communication
      buffer size, runtime scheduler settings and more.
    </td>
  </tr>

  <tr>
    <td>
      <a href="#kernel-limits">Operating System Kernel Limits</a>
    </td>
    <td>
      Control process limits enforced by the kernel: <a href="./networking.html#open-file-handle-limit">max open file handle limit</a>,
      max number of processes and kernel threads, max resident set size and so on.
    </td>
  </tr>
</table>

<p>Most settings are configured using the first two methods. This guide,
therefore, focuses on them.</p>
<h2><a id="configuration-files" class="anchor" href="#configuration-files">Configuration File(s)</a></h2>
<h3><a id="config-file-intro" class="anchor" href="#config-file-intro">Introduction</a></h3>
<p>While some settings in RabbitMQ can be tuned using environment variables,
most are configured using a <a href="#config-file">main configuration file</a> named <span class="code ">rabbitmq.conf</span>.</p>
<p>This includes configuration for the core server as well as plugins. An additional configuration
file can be used to configure settings that cannot be expressed in the main file's configuration
format. This is covered in more details below.</p>
<p>The sections below cover the syntax and <a href="#config-file-location">location</a> of both files,
where to find examples, and more.</p>
<h3><a id="config-file-location" class="anchor" href="#config-file-location">Config File Locations</a></h3>
<p><a href="./configure.html#config-location">Default config file locations</a>
vary between operating systems and <a href="./download.html">package types</a>.</p>
<p>This topic is covered in more detail in the rest of this guide.</p>
<p>When in doubt about RabbitMQ config file location,
consult the log file and/or management UI as explained in the following section.</p>
<h3><a id="verify-configuration-config-file-location" class="anchor" href="#verify-configuration-config-file-location">How to Find Config File Location</a></h3>
<p>The active configuration file can be verified by inspecting the
RabbitMQ log file. It will show up in the <a href="logging.html">log file</a>
at the top, along with the other broker boot log entries. For example:</p>
<pre class="lang-ini">
node           : rabbit@example
home dir       : /var/lib/rabbitmq
config file(s) : /etc/rabbitmq/advanced.config
               : /etc/rabbitmq/rabbitmq.conf
</pre>

<p>If the configuration file cannot be found or read by RabbitMQ, the log entry
will say so:</p>
<pre class="lang-ini">
node           : rabbit@example
home dir       : /var/lib/rabbitmq
config file(s) : /var/lib/rabbitmq/hare.conf (not found)
</pre>

<p>Alternatively, the location of configuration files used by a local node, use the <a href="./rabbitmq-diagnostics.8.html">rabbitmq-diagnostics status</a> command:</p>
<pre class="lang-bash">
# displays key
rabbitmq-diagnostics status
</pre>

<p>and look for the <span class="code ">Config files</span> section that would look like this:</p>
<pre class="lang-plaintext">
Config files

 * /etc/rabbitmq/advanced.config
 * /etc/rabbitmq/rabbitmq.conf
</pre>

<p>To inspect the locations of a specific node, including nodes running remotely, use the <span class="code ">-n</span> (short for <span class="code ">--node</span>) switch:</p>
<pre class="lang-bash">
rabbitmq-diagnostics status -n [node name]
</pre>

<p>Finally, config file location can be found in the <a href="./management.html">management UI</a>,
together with other details about nodes.</p>
<p>When troubleshooting configuration settings, it is very useful to verify that the config file
path is correct, exists and can be loaded (e.g. the file is readable) before <a href="#verify-configuration-effective-configuration">verifying effective node configuration</a>.
Together, these steps help quickly narrow down most common misconfiguration problems.</p>
<h3><a id="config-file-formats" class="anchor" href="#config-file-formats">The New and Old Config File Formats</a></h3>
<p>All <a href="./versions.html">supported RabbitMQ versions</a> use an <a href="#config-file">ini-like, sysctl configuration file format</a>
for the main configuration file. The file is typically named <span class="code ">rabbitmq.conf</span>.</p>
<p>The new config format is much simpler, easier for humans to read
and machines to generate. It is also relatively limited compared
to the classic config format used prior to RabbitMQ 3.7.0.
For example, when configuring <a href="./ldap.html">LDAP support</a>, it may be necessary to use deeply nested data structures to
express desired configuration.</p>
<p>To accommodate this need, modern RabbitMQ versions allow for both formats to be used at the same time
in separate files: <span class="code ">rabbitmq.conf</span> uses the new style format and is recommended for most settings,
and <span class="code ">advanced.config</span> covers more advanced settings that the ini-style configuration
cannot express. This is covered in more detail in the following sections.</p>
<table>
  <thead>
    <tr>
      <td><strong>Configuration File</strong></td>
      <td><strong>Format Used</strong></td>
      <td><strong>Purpose</strong></td>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td><span class="code ">rabbitmq.conf</span></td>
      <td>New style format (sysctl or ini-like)</td>
      <td>
        <a href="#config-file">Primary configuration file</a> with a `.conf` extension. Should be used for most settings.
        It is easier for humans to read and machines (deployment tools) to generate.
        Not every setting can be expressed in this format.
      </td>
    </tr>
    <tr>
      <td><span class="code ">advanced.config</span></td>
      <td>Classic (Erlang terms)</td>
      <td>
        A limited number of settings that cannot be expressed
        in the new style configuration format, such as <a href="./ldap.html">LDAP queries</a>.
        Only should be used when necessary.
      </td>
    </tr>
    <tr>
      <td><span class="code ">rabbitmq-env.conf</span> (<span class="code ">rabbitmq-env.conf.bat</span> on Windows)</td>
      <td>Environment variable pairs</td>
      <td>
        Used to set <a href="#customise-environment">environment variables</a> relevant to RabbitMQ in one place.
      </td>
    </tr>
  </tbody>
</table>

<p>Compare this examplary <span class="code ">rabbitmq.conf</span> file</p>
<pre class="lang-ini">
# A new style format snippet. This format is used by rabbitmq.conf files.
ssl_options.cacertfile           = /path/to/ca_certificate.pem
ssl_options.certfile             = /path/to/server_certificate.pem
ssl_options.keyfile              = /path/to/server_key.pem
ssl_options.verify               = verify_peer
ssl_options.fail_if_no_peer_cert = true
</pre>

<p>to</p>
<pre class="lang-erlang">
%% A classic format snippet, now used by advanced.config files.
[
  {rabbit, [{ssl_options, [{cacertfile,           "/path/to/ca_certificate.pem"},
                           {certfile,             "/path/to/server_certificate.pem"},
                           {keyfile,              "/path/to/server_key.pem"},
                           {verify,               verify_peer},
                           {fail_if_no_peer_cert, true}]}]}
].
</pre>

<h3><a id="config-file" class="anchor" href="#config-file">The Main Configuration File, rabbitmq.conf</a></h3>
<p>The configuration file <span class="code ">rabbitmq.conf</span>
allows the RabbitMQ server and plugins to be configured.
The file uses the <a href="https://github.com/basho/cuttlefish/wiki/Cuttlefish-for-Application-Users">sysctl format</a>,
unlike <span class="code ">advanced.config</span> and the original <span class="code ">rabbitmq.config</span> (both use the Erlang terms format).</p>
<p>The syntax can be briefly explained in 3 lines:</p>
<ul>
<li>One setting uses one line</li>
<li>Lines are structured <span class="code ">Key = Value</span></li>
<li>Any line starting with a <span class="code ">#</span> character is a comment</li>
</ul>
<p>A minimalistic example configuration file follows:</p>
<pre class="lang-ini">
# this is a comment
listeners.tcp.default = 5673
</pre>

<p>The same example in the <a href="#config-file-formats">classic config format</a>:</p>
<pre class="lang-erlang">
%% this is a comment
[
  {rabbit, [
      {tcp_listeners, [5673]}
    ]
  }
].
</pre>

<p>This example will alter the <a href="./networking.html#ports">port RabbitMQ listens on</a> for
AMQP 0-9-1 and AMQP 1.0 client connections from 5672 to 5673.</p>
<p>The RabbitMQ server source repository contains <a href="https://github.com/rabbitmq/rabbitmq-server/blob/v3.11.x/deps/rabbit/docs/rabbitmq.conf.example">an example rabbitmq.conf file</a>
named <span class="code ">rabbitmq.conf.example</span>. It contains examples of
most of the configuration items you might want to set (with some very obscure ones omitted), along with
documentation for those settings.</p>
<p>Documentation guides such as <a href="networking.html">Networking</a>, <a href="./ssl.html">TLS</a>, or
<a href="./access-control.html">Access Control</a> contain many examples in relevant formats.</p>
<p>Note that this configuration file is not to be confused with the environment variable
configuration files, <a href="#environment-env-file-unix">rabbitmq-env.conf</a>
and <a href="#environment-env-file-windows">rabbitmq-env-conf.bat</a>.</p>
<p>To override the main RabbitMQ config file location, use the <span class="code ">RABBITMQ_CONFIG_FILE</span>
(or <span class="code ">RABBITMQ_CONFIG_FILES</span> to use a <span class="code ">conf.d</span>-style directory of sorted files) <a href="#customise-environment">environment variables</a>.
Use <span class="code ">.conf</span> as file extension for the new style config format, e.g. <span class="code ">/etc/rabbitmq/rabbitmq.conf</span> or
<span class="code ">/data/configuration/rabbitmq/rabbitmq.conf</span></p>
<h3><a id="config-confd-directory" class="anchor" href="#config-confd-directory">Using a Directory of .conf Files</a></h3>
<p>A <span class="code ">conf.d</span>-style directory of files can also be used. Use <span class="code ">RABBITMQ_CONFIG_FILES</span> (note the plural "_FILES")
to point the node at a directory of such files:</p>
<pre class="lang-ini">
# uses a directory of .conf files loaded in alphabetical order
RABBITMQ_CONFIG_FILES=/path/to/a/custom/location/rabbitmq/conf.d
</pre>

<p>Target directory must contain a number of <span class="code ">.conf</span> files with the same syntax as <span class="code ">rabbitmq.conf</span>.</p>
<p>They will be <strong>loaded in alphabetical order</strong>. A common naming practice uses numerical prefixes
in filenames to make it easier to reason about the order, or make sure a "defaults file"
is always loaded first, regardless of how many extra files are generated at deployment time:</p>
<pre class="lang-bash">
ls -lh /path/to/a/custom/location/rabbitmq/conf.d
# =&gt; -r--r--r--  1 rabbitmq  rabbitmq    87B Mar 21 19:50 00-defaults.conf
# =&gt; -r--r--r--  1 rabbitmq  rabbitmq   4.6K Mar 21 19:52 10-main.conf
# =&gt; -r--r--r--  1 rabbitmq  rabbitmq   1.6K Mar 21 19:52 20-tls.conf
# =&gt; -r--r--r--  1 rabbitmq  rabbitmq   1.6K Mar 21 19:52 30-federation.conf
</pre>

<h3><a id="env-variable-interpolation" class="anchor" href="#env-variable-interpolation">Environment Variable Interpolation in <span class="code ">rabbitmq.conf</span></a></h3>
<p><a href="./versions.html">Modern RabbitMQ versions</a> support environment variable interpolation in <span class="code ">rabbitmq.conf</span>. For example,
to override default user credentials, one can use <a href="./definitions.html">import a definition file</a>
or the following config file in combination with two environment variables:</p>
<pre class="lang-ini">
# environment variable interpolation
default_user = $(SEED_USERNAME)
default_pass = $(SEED_USER_PASSWORD)
</pre>

<p>Environment variables can be used to configure a portion of a value, for example,
cluster name:</p>
<pre class="lang-ini">
cluster_name = deployment-$(DEPLOYMENT_ID)
</pre>

<p>Environment variable values are interpolated as strings before the config file is parsed and validated.
This means that they can be used to override numerical settings (such as ports) or paths (such as TLS certificate and private key paths).</p>
<p>In addition, RabbitMQ respects a <a href="#customise-environment">number of environment variables</a> for when a value must be known before
the configuration file is loaded.</p>
<h3><a id="advanced-config-file" class="anchor" href="#advanced-config-file">The advanced.config File</a></h3>
<p>Some configuration settings are not possible or are difficult to configure
using the sysctl format. As such, it is possible to use an additional
config file in the Erlang term format (same as <span class="code ">rabbitmq.config</span>).
That file is commonly named <span class="code ">advanced.config</span>. It will be merged
with the configuration provided in <span class="code ">rabbitmq.conf</span>.</p>
<p>The RabbitMQ server source repository contains <a href="https://github.com/rabbitmq/rabbitmq-server/blob/v3.8.x/deps/rabbit/docs/advanced.config.example">an example advanced.config file</a>
named <span class="code ">advanced.config.example</span>. It focuses on the options that are typically set using the advanced config.</p>
<p>To override the advanced config file location, use the <span class="code ">RABBITMQ_ADVANCED_CONFIG_FILE</span>
environment variable.</p>
<h3><a id="config-location" class="anchor" href="#config-location">Location of rabbitmq.conf, advanced.config and rabbitmq-env.conf</a></h3>
<p>Default configuration file location is distribution-specific. RabbitMQ packages or nodes will not create
any configuration files. Users and deployment tool should use the following locations when creating the files:</p>
<table>
  <thead>
    <tr>
      <td><strong>Platform</strong></td>
      <td><strong>Default Configuration File Directory</strong></td>
      <td><strong>Example Configuration File Paths</strong></td>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        <a href="./install-generic-unix.html">Generic binary package</a>
      </td>
      <td>
        <span class="code ">$RABBITMQ_HOME/etc/rabbitmq/</span>
      </td>
      <td>
        <span class="code ">$RABBITMQ_HOME/etc/rabbitmq/rabbitmq.conf</span>,
        <span class="code ">$RABBITMQ_HOME/etc/rabbitmq/advanced.config</span>
      </td>
    </tr>
    <tr>
      <td><a href="./install-debian.html">Debian and Ubuntu</a></td>
      <td>
        <span class="code ">/etc/rabbitmq/</span>
      </td>
      <td>
        <span class="code ">/etc/rabbitmq/rabbitmq.conf</span>,
        <span class="code ">/etc/rabbitmq/advanced.config</span>
      </td>
    </tr>
    <tr>
      <td><a href="./install-rpm.html">RPM-based Linux</a></td>
      <td>
        <span class="code ">/etc/rabbitmq/</span>
      </td>
      <td>
        <span class="code ">/etc/rabbitmq/rabbitmq.conf</span>,
        <span class="code ">/etc/rabbitmq/advanced.config</span>
      </td>
    </tr>
    <tr>
      <td><a href="./install-windows.html">Windows</a></td>
      <td>
        <span class="code ">%APPDATA%\RabbitMQ\</span>
      </td>
      <td>
        <span class="code ">%APPDATA%\RabbitMQ\rabbitmq.conf</span>,
        <span class="code ">%APPDATA%\RabbitMQ\advanced.config</span>
      </td>
    </tr>
    <tr>
      <td><a href="./install-homebrew.html">MacOS Homebrew Formula</a></td>
      <td>
        <span class="code ">${install_prefix}/etc/rabbitmq/</span>,
        and the Homebrew cellar prefix is usually <span class="code ">/usr/local</span>
      </td>
      <td>
        <span class="code ">${install_prefix}/etc/rabbitmq/rabbitmq.conf</span>,
        <span class="code ">${install_prefix}/etc/rabbitmq/advanced.config</span>
      </td>
    </tr>
  </tbody>
</table>

<p>Environment variables can be used to override the location of the configuration file:</p>
<pre class="lang-ini">
# overrides primary config file location
RABBITMQ_CONFIG_FILE=/path/to/a/custom/location/rabbitmq.conf

# overrides advanced config file location
RABBITMQ_ADVANCED_CONFIG_FILE=/path/to/a/custom/location/advanced.config

# overrides environment variable file location
RABBITMQ_CONF_ENV_FILE=/path/to/a/custom/location/rabbitmq-env.conf
</pre>

<h3><a id="config-changes-effects" class="anchor" href="#config-changes-effects">When Will Configuration File Changes Be Applied</a></h3>
<p><span class="code ">rabbitmq.conf</span> and <span class="code ">advanced.config</span> changes take effect after a node restart.</p>
<p>If <span class="code ">rabbitmq-env.conf</span> doesn't exist, it can be created manually
in the location specified by the <span class="code ">RABBITMQ_CONF_ENV_FILE</span> variable.
On Windows systems, it is named <span class="code ">rabbitmq-env-conf.bat</span>.</p>
<p>Windows service users will need to <strong><a href="#rabbitmq-env-file-windows">re-install the service</a></strong> if
configuration file location or any values in <span class="code ">`rabbitmq-env-conf.bat</span> have changed.
Environment variables used by the service would not be updated otherwise.</p>
<p>In the context of deployment automation this means that environment variables
such as <span class="code ">RABBITMQ_BASE</span> and <span class="code ">RABBITMQ_CONFIG_FILE</span> should ideally be set before RabbitMQ is installed.
This would help avoid unnecessary confusion and Windows service re-installations.</p>
<h3><a id="verify-configuration-effective-configuration" class="anchor" href="#verify-configuration-effective-configuration">How to Inspect and Verify Effective Configuration of a Running Node</a></h3>
<p>It is possible to print effective configuration (user provided values from all configuration files merged into defaults) using
the <a href="./rabbitmq-diagnostics.8.html">rabbitmq-diagnostics environment</a> command:</p>
<pre class="lang-bash">
# inspect effective configuration on a node
rabbitmq-diagnostics environment
</pre>

<p>to check effective configuration of a specific node, including nodes running remotely, use the <span class="code ">-n</span> (short for <span class="code ">--node</span>) switch:</p>
<pre class="lang-bash">
rabbitmq-diagnostics environment -n [node name]
</pre>

<p>The command above will print applied configuration for every application (RabbitMQ, plugins, libraries) running on the node.
Effective configuration is computed using the following steps:</p>
<ul>
<li><span class="code ">rabbitmq.conf</span> is translated into the internally used (advanced) config format. These configuration is merged into the defaults</li>
<li><span class="code ">advanced.config</span> is loaded if present, and merged into the result of the step above</li>
</ul>
<p>Effective configuration should be verified together with <a href="#verify-configuration-config-file-location">config file location</a>.
Together, these steps help quickly narrow down most common misconfiguration problems.</p>
<h3><a id="erlang-term-config-file" class="anchor" href="#erlang-term-config-file">The rabbitmq.config (Classic Format) File</a></h3>
<p>Prior to RabbitMQ 3.7.0, RabbitMQ config file was named
<span class="code ">rabbitmq.config</span> and used <a href="http://www.erlang.org/doc/man/config.html">the same Erlang term format</a> used by <span class="code ">advanced.config</span> today.
That format is <a href="#config-file-formats">still supported</a> for backwards compatibility.</p>
<p>The classic format is <strong>deprecated</strong>. Please prefer the <a href="#config-file">new style config format</a>
in <span class="code ">rabbitmq.conf</span> accompanied by an <span class="code ">advanced.config</span> file as needed.</p>
<p>To use a config file in the classic format, export <span class="code ">RABBITMQ_CONFIG_FILE</span> to point to the file with
a <span class="code ">.config</span> extension. The extension will indicate to RabbitMQ that it should treat the file as one
in the classic config format.</p>
<p><a href="https://github.com/rabbitmq/rabbitmq-server/blob/v3.7.x/deps/rabbit/docs/rabbitmq.config.example">An example configuration file</a> named
<span class="code ">rabbitmq.config.example</span>. It contains an example of most of the configuration items in the classic config format.</p>
<p>To override the main RabbitMQ config file location, use the <span class="code ">RABBITMQ_CONFIG_FILE</span>
<a href="#customise-environment">environment variable</a>. Use <span class="code ">.config</span> as file extension
for the classic config format.</p>
<p>The use of classic config format should only be limited to the <a href="#advanced-config-file">advanced.config file</a> and settings
that cannot be configured using the <a href="#config-file">ini-style config file</a>.</p>
<h3><a id="example-config" class="anchor" href="#example-config">Example Configuration Files</a></h3>
<p>The RabbitMQ server source repository contains
examples for the configuration files:</p>
<ul>
<li><a href="https://github.com/rabbitmq/rabbitmq-server/blob/main/deps/rabbit/docs/rabbitmq.conf.example">rabbitmq.conf.example</a></li>
<li><a href="https://github.com/rabbitmq/rabbitmq-server/blob/main/deps/rabbit/docs/advanced.config.example">advanced.config.example</a></li>
</ul>
<p>These files contain examples of most of the configuration keys along with a brief explanation
for those settings. All configuration items are commented out in the
example, so you can uncomment what you need. Note that the
example files are meant to be used as, well, examples, and
should not be treated as a general recommendation.</p>
<p>In most distributions the example file is placed into the
same location as the real file should be placed (see
above). On Debian and RPM distributions
policy forbids doing so; instead find the file
under <span class="code ">/usr/share/doc/rabbitmq-server/</span>
or <span class="code ">/usr/share/doc/rabbitmq-server-3.11.13/</span>,
respectively.</p>
<h3><a id="config-items" class="anchor" href="#config-items">Core Server Variables Configurable in rabbitmq.conf</a></h3>
<p>These variables are the most common. The list is not complete, as
some settings are quite obscure.</p>
<table class="name-description">
  <thead>
    <tr>
      <th><strong>Key</strong></th>
      <th><strong>Documentation</strong></th>
    </tr>
  </thead>

  <tr>
    <td><span class="code ">listeners</span></td>
    <td>
      Ports or hostname/pair on which to listen for "plain" AMQP 0-9-1 and AMQP 1.0 connections
      (without <a href="./ssl.html">TLS</a>). See the <a href="./networking.html">Networking guide</a> for more
      details and examples.

      <p>
        Default:
<pre class="lang-ini">
listeners.tcp.default = 5672
</pre>
      </p>
    </td>
  </tr>
  <tr>
    <td><span class="code ">num_acceptors.tcp</span></td>
    <td>
      Number of Erlang processes that will accept connections for the TCP
      listeners.
      <p>
        Default:
<pre class="lang-ini">
num_acceptors.tcp = 10
</pre>
      </p>
    </td>
  </tr>
  <tr>
    <td><span class="code ">handshake_timeout</span></td>
    <td>
      Maximum time for AMQP 0-9-1 handshake (after socket connection and TLS handshake),
      in milliseconds.
      <p>
        Default:
<pre class="lang-ini">
handshake_timeout = 10000
</pre>
      </p>
    </td>
  </tr>
  <tr>
    <td><span class="code ">listeners.ssl</span></td>
    <td>
      Ports or hostname/pair on which to listen for TLS-enabled AMQP 0-9-1 and AMQP 1.0 connections.
      See the <a href="./ssl.html">TLS guide</a> for more
      details and examples.
      <p>Default: <span class="code ">none</span> (not set)</p>
    </td>
  </tr>
  <tr>
    <td><span class="code ">num_acceptors.ssl</span></td>
    <td>
      Number of Erlang processes that will accept TLS connections from clients.
      <p>
        Default:
<pre class="lang-ini">
num_acceptors.ssl = 10
</pre>
      </p>
    </td>
  </tr>

  <tr>
    <td><span class="code ">ssl_options</span></td>
    <td>
      TLS configuration. See the <a href="ssl.html#enabling-ssl">TLS guide</a>.
      <p>
        Default:
<pre class="lang-ini">
ssl_options = none
</pre>
        </p>
    </td>
  </tr>
  <tr>
    <td><span class="code ">ssl_handshake_timeout</span></td>
    <td>
      TLS handshake timeout, in milliseconds.
      <p>
        Default:
<pre class="lang-ini">
ssl_handshake_timeout = 5000
</pre>
      </p>
    </td>
  </tr>
  <tr>
    <td><span class="code ">vm_memory_high_watermark</span></td>
    <td>
      Memory threshold at which the flow control is
      triggered. Can be absolute or relative to the amount of RAM available
      to the OS:

<pre class="lang-ini">
vm_memory_high_watermark.relative = 0.6
</pre>
<pre class="lang-ini">
vm_memory_high_watermark.absolute = 2GB
</pre>

      See the <a href="memory.html">memory-based flow
      control</a> and <a href="alarms.html">alarms</a>
      documentation.

      <p>
        Default:

<pre class="lang-ini">
vm_memory_high_watermark.relative = 0.4
</pre>
      </p>
    </td>
  </tr>
  <tr>
    <td><span class="code ">vm_memory_calculation_strategy</span></td>
    <td>
      Strategy for memory usage reporting. Can be one of the following:
      <ul class="plain">
        <li><span class="code ">allocated</span>: uses Erlang memory allocator statistics</li>
        <li><span class="code ">rss</span>: uses operating system RSS memory reporting. This uses OS-specific means and may start short lived child processes.</li>
        <li><span class="code ">legacy</span>: uses legacy memory reporting (how much memory is considered to be used by the runtime). This strategy is fairly inaccurate.</li>
        <li><span class="code ">erlang</span>: same as <span class="code ">legacy</span>, preserved for backwards compatibility</li>
      </ul>
      <p>
        Default:
<pre class="lang-ini">
vm_memory_calculation_strategy = allocated
</pre>
      </p>
    </td>
  </tr>
  <tr>
    <td><span class="code ">vm_memory_high_watermark_paging_ratio</span></td>
    <td>
      Fraction of the high watermark limit at which queues
      start to page messages out to disc to free up
      memory. See the <a href="memory.html">memory-based flow control</a> documentation.
      <p>
        Default:
<pre class="lang-ini">
vm_memory_high_watermark_paging_ratio = 0.5
</pre>
      </p>
    </td>
  </tr>
  <tr>
    <td><span class="code ">total_memory_available_override_value</span></td>
    <td>
      Makes it possible to override the total amount of memory
      available, as opposed to inferring it from the environment using
      OS-specific means. This should only be used when actual
      maximum amount of RAM available to the node doesn't match the value
      that will be inferred by the node, e.g. due to containerization or similar
      constraints the node cannot be aware of. The value may be
      set to an integer number of bytes or, alternatively, in
      information units (e.g `8GB`). For example,
      when the value is set to 4 GB, the node will believe it is
      running on a machine with 4 GB of RAM.
      <p>
        Default: <span class="code ">undefined</span> (not set or used).
      </p>
    </td>
  </tr>
  <tr>
    <td><span class="code ">disk_free_limit</span></td>
    <td>
      Disk free space limit of the partition on which RabbitMQ
      is storing data. When available disk space falls below
      this limit, flow control is triggered. The value can be
      set relative to the total amount of RAM or as an absolute value
      in bytes or, alternatively, in
      information units (e.g `50MB` or `5GB`):

<pre class="lang-ini">
disk_free_limit.relative = 3.0</pre>
<pre class="lang-ini">
disk_free_limit.absolute = 2GB</pre>

      By default free disk space must exceed 50MB. See the <a href="disk-alarms.html">Disk Alarms</a> documentation.
      <p>
        Default:
<pre class="lang-ini">
disk_free_limit.absolute = 50MB
</pre>
      </p>
    </td>
  </tr>
  <tr>
    <td><span class="code ">log.file.level</span></td>
    <td>
      Controls the granularity of logging. The value is a list
      of log event category and log level pairs.

      <p>
                The level can be one of <span class="code ">error</span> (only errors are
                logged), <span class="code ">warning</span> (only errors and warning are
                logged), <span class="code ">info</span> (errors, warnings and informational
                messages are logged), or <span class="code ">debug</span> (errors, warnings,
        informational messages and debugging messages are
        logged).
      </p>

      <p>
        Default:
<pre class="lang-ini">
log.file.level = info
</pre>
      </p>
    </td>
  </tr>
  <tr>
    <td><span class="code ">channel_max</span></td>
    <td>
      Maximum permissible number of channels to
      negotiate with clients, not including a special channel number 0 used in the protocol.
      Setting to 0 means "unlimited", a dangerous value since applications sometimes have channel leaks.
      Using more channels increases memory footprint of the broker.
      <p>
        Default:
<pre class="lang-ini">
channel_max = 2047
</pre>
      </p>
    </td>
  </tr>
  <tr>
    <td><span class="code ">channel_operation_timeout</span></td>
    <td>
      Channel operation timeout in milliseconds (used internally, not directly
      exposed to clients due to messaging protocol differences and limitations).

      <p>
        Default:
<pre class="lang-ini">
channel_operation_timeout = 15000
</pre>
      </p>
    </td>
  </tr>
  <tr>
    <td><span class="code ">max_message_size</span></td>
    <td>
        The largest allowed message payload size in bytes. Messages
        of larger size will be rejected with a suitable channel exception.
        <p>Default: <span class="code ">134217728</span></p>
        <p>Max value: <span class="code ">536870912</span></p>
    </td>
  </tr>
  <tr>
    <td><span class="code ">heartbeat</span></td>
    <td>
      Value representing the heartbeat timeout suggested by the server during
      connection parameter negotiation.
      If set to 0 on both ends, heartbeats are deactivated (this is not recommended).
      See the <a href="./heartbeats.html">Heartbeats guide</a> for details.

      <p>
        Default:
<pre class="lang-ini">
heartbeat = 60
</pre>
      </p>
    </td>
  </tr>
  <tr>
    <td><span class="code ">default_vhost</span></td>
    <td>
      Virtual host to create when RabbitMQ creates a new
      database from scratch. The
      exchange `amq.rabbitmq.log` will exist in
      this virtual host.
      <p>
        Default:
<pre class="lang-ini">
default_vhost = /
</pre>
      </p>
    </td>
  </tr>
  <tr>
    <td><span class="code ">default_user</span></td>
    <td>
      User name to create when RabbitMQ creates a new database
      from scratch.
      <p>
        Default:
<pre class="lang-ini">
default_user = guest
</pre>
      </p>
    </td>
  </tr>
  <tr>
    <td><span class="code ">default_pass</span></td>
    <td>
      Password for the default user.
      <p>
        Default:
<pre class="lang-ini">
default_pass = guest
</pre>
      </p>
    </td>
  </tr>
  <tr>
    <td><span class="code ">default_user_tags</span></td>
    <td>
      Tags for the default user.
      <p>
        Default:
<pre class="lang-ini">
default_user_tags.administrator = true
</pre>
      </p>
    </td>
  </tr>
  <tr>
    <td><span class="code ">default_permissions</span></td>
    <td>
      <a href="access-control.html">Permissions</a>
      to assign to the default user when creating it.
      <p>
        Default:

<pre class="lang-ini">
default_permissions.configure = .*
default_permissions.read = .*
default_permissions.write = .*
</pre>
      </p>
    </td>
  </tr>
  <tr>
    <td><span class="code ">loopback_users</span></td>
    <td>
      List of users which are only permitted to connect to the
      broker via a loopback interface (i.e. `localhost`).

      <p>
        To allow the default `guest`
        user to connect remotely (a security practice <a href="./production-checklist.html">unsuitable for production use</a>),
        set this to `none`:

<pre class="lang-ini">
# awful security practice,
# consider creating a new
# user with secure generated credentials!
loopback_users = none
</pre>
      </p>
      <p>
        To restrict another user to localhost-only connections,
        do it like so (`monitoring` is the name of the user):
<pre class="lang-ini">
loopback_users.monitoring = true
</pre>
      </p>
      <p>
        Default:
<pre class="lang-ini">
# guest uses well known
# credentials and can only
# log in from localhost
# by default
loopback_users.guest = true
</pre>
      </p>
    </td>
  </tr>
  <tr>
    <td><span class="code ">cluster_formation.classic_config.nodes</span></td>
    <td>
      Classic <a href="./cluster-formation.html">peer discovery</a> backend's list of nodes to contact.

      For example, to cluster with nodes `rabbit@hostname1` and `rabbit@hostname2` on first boot:

<pre class="lang-ini">
cluster_formation.classic_config.nodes.1 = rabbit@hostname1
cluster_formation.classic_config.nodes.2 = rabbit@hostname2
</pre>
      <p>Default: `none` (not set)</p>
    </td>
  </tr>
  <tr>
    <td><span class="code ">collect_statistics</span></td>
    <td>
      Statistics collection mode. Primarily relevant for the
      management plugin. Options are:
      <ul>
        <li>`none` (do not emit statistics events)</li>
        <li>`coarse` (emit per-queue / per-channel / per-connection statistics)</li>
        <li>`fine` (also emit per-message statistics)</li>
        </ul>
      <p>
        Default:
<pre class="lang-ini">
collect_statistics = none
</pre>
      </p>
    </td>
  </tr>
  <tr>
    <td><span class="code ">collect_statistics_interval</span></td>
    <td>
      Statistics collection interval in
      milliseconds. Primarily relevant for
      the <a href="management.html#statistics-interval">management
      plugin</a>.
      <p>
        Default:
<pre class="lang-ini">
collect_statistics_interval = 5000
</pre>
      </p>
    </td>
  </tr>
  <tr>
    <td><span class="code ">management_db_cache_multiplier</span></td>
    <td>
      Affects the amount of time the <a href="management.html#statistics-interval">management plugin</a>
      will cache expensive management queries such as
      queue listings. The cache will multiply the elapsed time of
      the last query by this value and cache the result for
      this amount of time.
      <p>
        Default:
<pre class="lang-ini">
management_db_cache_multiplier = 5
</pre>
      </p>
    </td>
  </tr>
  <tr>
    <td><span class="code ">auth_mechanisms</span></td>
    <td>
      <a href="authentication.html">SASL authentication
      mechanisms</a> to offer to clients.
      <p>
        Default:
<pre class="lang-ini">
auth_mechanisms.1 = PLAIN
auth_mechanisms.2 = AMQPLAIN
</pre>
      </p>
    </td>
  </tr>
  <tr>
    <td><span class="code ">auth_backends</span></td>
    <td>
      <p>
        List of <a href="./access-control.html">authentication and authorisation backends</a> to
        use. See the <a href="./access-control.html">access control guide</a> for details and examples.
      </p>
      <p>
        Other databases
        than `rabbit_auth_backend_internal` are
        available through <a href="plugins.html">plugins</a>.
      </p>
      <p>Default: <pre class="lang-ini">auth_backends.1 = internal</pre></p>
    </td>
  </tr>
  <tr>
    <td><span class="code ">reverse_dns_lookups</span></td>
    <td>
      Set to `true` to have RabbitMQ perform a
      reverse DNS lookup on client connections, and present
      that information through `rabbitmqctl` and
      the management plugin.
      <p>Default: <pre class="lang-ini">reverse_dns_lookups = false</pre></p>
    </td>
  </tr>
  <tr>
    <td><span class="code ">delegate_count</span></td>
    <td>
      Number of delegate processes to use for intra-cluster
      communication. On a machine which has a very large
      number of cores and is also part of a cluster, you may
      wish to increase this value.

      <p>Default: <pre class="lang-ini">delegate_count = 16</pre></p>
    </td>
  </tr>

  <tr>
    <td><span class="code ">tcp_listen_options</span></td>
    <td>
      Default socket options. You may want to change these
      when you troubleshoot network issues.
      <p>
        Default:
<pre class="lang-ini">
tcp_listen_options.backlog = 128
tcp_listen_options.nodelay = true
tcp_listen_options.linger.on = true
tcp_listen_options.linger.timeout = 0
</pre>
      </p>

<br />
<pre class="lang-ini">
tcp_listen_options.exit_on_close = false
</pre>

Set `tcp_listen_options.exit_on_close` to `true` to have RabbitMQ try to immediately close TCP socket
when client disconnects. Note that this cannot guarantee immediate TCP socket resource
release by the kernel.

<br />
<pre class="lang-ini">
tcp_listen_options.keepalive = false</pre>
<p>
  Set `tcp_listen_options.keepalive` to `true` to enable <a href="networking.html#tcp-keepalives">TCP keepalives</a>.
  <br />
  </p>
    </td>
  </tr>
  <tr>
    <td><span class="code ">cluster_partition_handling</span></td>
    <td>
      How to handle network partitions. Available modes are:
      <ul>
        <li><span class="code ">ignore</span></li>
        <li><span class="code ">autoheal</span></li>
        <li><span class="code ">pause_minority</span></li>
        <li><span class="code ">pause_if_all_down</span></li>
      </ul>
      <span class="code ">pause_if_all_down</span> mode requires additional parameters:
      <ul>
        <li><span class="code ">nodes</span></li>
        <li><span class="code ">recover</span></li>
      </ul>
      See the
      <a href="partitions.html#automatic-handling">documentation
      on partitions</a> for more information.

      <p>Default: <pre class="lang-ini">cluster_partition_handling = ignore</pre></p>
    </td>
  </tr>
  <tr>
    <td><span class="code ">cluster_keepalive_interval</span></td>
    <td>
      How frequently nodes should send keepalive messages to
      other nodes (in milliseconds). Note that this is not the
      same thing as <a href="nettick.html"><span class="code ">net_ticktime</span></a>;
      missed keepalive messages will not cause nodes to be
      considered down.

      <p>
        Default:
<pre class="lang-ini">
cluster_keepalive_interval = 10000
</pre>
      </p>
    </td>
  </tr>
  <tr>
    <td><span class="code ">queue_index_embed_msgs_below</span></td>
    <td>
      Size in bytes of message below which messages will
      be embedded directly in the queue index. You are advised
      to read the <a href="persistence-conf.html">persister
      tuning</a> documentation before changing this.
      <p>
        Default:
<pre class="lang-ini">
queue_index_embed_msgs_below = 4096
</pre>
      </p>
    </td>
  </tr>

  <tr>
    <td><span class="code ">mnesia_table_loading_retry_timeout</span></td>
    <td>
      Timeout used when waiting for Mnesia tables in a cluster to
      become available.
      <p>
        Default:
<pre class="lang-ini">
mnesia_table_loading_retry_timeout = 30000
</pre>
</p>
    </td>
  </tr>

  <tr>
    <td><span class="code ">mnesia_table_loading_retry_limit</span></td>
    <td>
      Retries when waiting for Mnesia tables in the cluster startup. Note that
      this setting is not applied to Mnesia upgrades or node deletions.
      <p>Default:
<pre class="lang-ini">
mnesia_table_loading_retry_limit = 10
</pre>
      </p>
    </td>
  </tr>

  <tr>
    <td><span class="code ">mirroring_sync_batch_size</span></td>
    <td>
      Batch size used to transfer messages to an unsynchronised replica (queue mirror).
      See <a href="./ha.html#batch-sync">documentation on eager batch synchronization</a>.
      <p>
        Default:
<pre class="lang-ini">
mirroring_sync_batch_size = 4096
</pre>
      </p>
    </td>
  </tr>

  <tr>
    <td><span class="code ">queue_leader_locator</span></td>
    <td>
      queue leader location strategy. Available strategies are:
      <ul>
        <li><span class="code ">balanced</span></li>
        <li><span class="code ">client-local</span></li>
      </ul>
      See the
      <a href="./ha.html#queue-leader-location">documentation
      on queue leader location</a> for more information.
      <p>
        Default:
<pre class="lang-ini">
queue_leader_locator = balanced
</pre>
      </p>
    </td>
  </tr>
  <tr>
    <td><span class="code ">proxy_protocol</span></td>
    <td>
      If set to <span class="code ">true</span>, RabbitMQ will expect a <a href="http://www.haproxy.org/download/1.8/doc/proxy-protocol.txt">proxy
      protocol</a> header to be sent first when an AMQP
      connection is opened.  This implies to set up a proxy
      protocol-compliant reverse proxy (e.g. <a href="http://www.haproxy.org/download/1.8/doc/proxy-protocol.txt">HAproxy</a>
      or <a href="http://docs.aws.amazon.com/elasticloadbalancing/latest/classic/enable-proxy-protocol.html">AWS
      ELB</a>) in front of RabbitMQ.  Clients can't directly
      connect to RabbitMQ when proxy protocol is enabled, so
      all connections must go through the reverse proxy.

      <p>
        See <a href="networking.html#proxy-protocol">the
        networking guide</a> for more information.
      </p>

      <p>
        Default:
<pre class="lang-ini">
proxy_protocol = false
</pre>
      </p>
    </td>
  </tr>
  <tr>
    <td><span class="code ">cluster_name</span></td>
    <td>
      Operator-controlled cluster name. This name is used to identify a cluster, and by
      the federation and Shovel plugins to record the origin or path of transferred messages.
      Can be set to any arbitrary string to help identify the cluster (eg. <span class="code ">london</span>).
      This name can be inspected by AMQP 0-9-1 clients in the server properties map.

      <p>
        Default: by default the name is derived from the first (seed) node in the cluster.
      </p>
    </td>
  </tr>
</table>

<p>The following configuration settings can be set in
the <a href="#advanced-config-file">advanced config file</a> only,
under the <span class="code ">rabbit</span> section.</p>
<table class="name-description">
  <thead>
    <tr>
      <th><strong>Key</strong></th>
      <th><strong>Documentation</strong></th>
    </tr>
  </thead>

  <tr>
    <td><span class="code ">msg_store_index_module</span></td>
    <td>
      Implementation module for queue indexing. You are
      advised to read the <a href="persistence-conf.html">message store tuning</a>
      documentation before changing this.
      <p>
        Default: <span class="code ">rabbit_msg_store_ets_index</span>
<pre class="lang-erlang">
{rabbit, [
{msg_store_index_module, rabbit_msg_store_ets_index}
]}
</pre>
      </p>
    </td>
  </tr>
  <tr>
    <td><span class="code ">backing_queue_module</span></td>
    <td>
      Implementation module for queue contents.
      <p>
        Default:
<pre class="lang-erlang">
{rabbit, [
{backing_queue_module, rabbit_variable_queue}
]}
</pre>
      </p>
    </td>
  </tr>
  <tr>
    <td><span class="code ">msg_store_file_size_limit</span></td>
    <td>
      Message store segment file size. Changing this for a node
      with an existing (initialised) database is dangerous can
      lead to data loss!
      <p>
        Default: <span class="code ">16777216</span>
<pre class="lang-erlang">
{rabbit, [
%% Changing this for a node
%% with an existing (initialised) database is dangerous can
%% lead to data loss!
{msg_store_file_size_limit, 16777216}
]}
</pre>
      </p>
    </td>
  </tr>
    <tr>
      <td><span class="code ">trace_vhosts</span></td>
      <td>
        Used internally by
        the <a href="firehose.html">tracer</a>. You shouldn't
        change this.
        <p>
          Default:
<pre class="lang-erlang">
{rabbit, [
{trace_vhosts, []}
]}
</pre>
        </p>
      </td>
    </tr>
  <tr>
    <td><span class="code ">msg_store_credit_disc_bound</span></td>
    <td>
      The credits that a queue process is given by the message store.
      <p>
        By default, a queue process is given 4000 message store credits, and then 800 for every 800 messages that it processes.
      </p>
      <p>
        Messages which need to be paged out due to memory pressure will also use this credit.
      </p>
      <p>
        The Message Store is the last component in the credit flow chain. <a href="https://blog.rabbitmq.com/posts/2015/10/new-credit-flow-settings-on-rabbitmq-3-5-5/" target="_blank" rel="noopener noreferrer">Learn about credit flow.</a>
      </p>
      <p>
        This value only takes effect when messages are persisted to the message store.
        If messages are embedded on the queue index, then modifying this setting has no effect because credit_flow is NOT used when writing to the queue index.
      </p>
      <p>
        Default:
<pre class="lang-erlang">
{rabbit, [
{msg_store_credit_disc_bound, {4000, 800}}
]}
</pre>
      </p>
    </td>
  </tr>
  <tr>
    <td><span class="code ">queue_index_max_journal_entries</span></td>
    <td>
      After how many queue index journal entries it will be
      flushed to disk.
      <p>
        Default:
<pre class="lang-erlang">
{rabbit, [
{queue_index_max_journal_entries, 32768}
]}
</pre>
      </p>
    </td>
  </tr>

  <tr>
    <td>
      <span class="code ">lazy_queue_explicit_gc_run_operation_threshold</span>
    </td>
    <td>
     Tunable value only for lazy queues when under memory pressure.
     This is the threshold at which the garbage collector and other memory reduction activities are triggered.
     A low value could reduce performance, and a high one can improve performance, but cause higher memory consumption.
     You almost certainly should not change this.
    <p>
      Default:
<pre class="lang-ini">
{rabbit, [
{lazy_queue_explicit_gc_run_operation_threshold, 1000}
]}
</pre>
    </p>
    </td>
  </tr>
  <tr>
    <td>
      <span class="code ">queue_explicit_gc_run_operation_threshold</span>
    </td>
    <td>
     Tunable value only for normal queues when under memory pressure.
     This is the threshold at which the garbage collector and other memory reduction activities are triggered.
     A low value could reduce performance, and a high one can improve performance, but cause higher memory consumption.
     You almost certainly should not change this.
    <p>
      Default:
<pre class="lang-ini">
{rabbit, [
{queue_explicit_gc_run_operation_threshold, 1000}
]}
</pre>
    </p>
    </td>
  </tr>
</table>

<p>Several <a href="./plugins.html">plugins</a> that ship with RabbitMQ have
dedicated documentation guides that cover plugin configuration:</p>
<ul>
<li><a href="./management.html#configuration">rabbitmq_management</a></li>
<li><a href="./management.html#configuration">rabbitmq_management_agent</a></li>
<li><a href="./stomp.html">rabbitmq_stomp</a></li>
<li><a href="./mqtt.html">rabbitmq_mqtt</a></li>
<li><a href="shovel.html">rabbitmq_shovel</a></li>
<li><a href="federation.html">rabbitmq_federation</a></li>
<li><a href="./ldap.html">rabbitmq_auth_backend_ldap</a></li>
<li><a href="./oauth2.html#variables-configurable">rabbitmq_auth_backend_oauth</a></li>
</ul>
<h3><a id="configuration-encryption" class="anchor" href="#configuration-encryption">Configuration Value Encryption</a></h3>
<p>Sensitive configuration entries (e.g. password, URL containing
credentials) can be encrypted in the RabbitMQ configuration file.
The broker decrypts encrypted entries on start.</p>
<p>Note that encrypted configuration entries don't make the
system meaningfully more secure. Nevertheless, they
allow deployments of RabbitMQ to conform to
regulations in various countries requiring
that no sensitive data should appear in plain text
in configuration files.</p>
<p>Encrypted values must be inside an Erlang <span class="code ">encrypted</span>
tuple: <span class="code ">{encrypted, ...}</span>.
Here is an example of a configuration file with an encrypted password
for the default user:</p>
<pre class="lang-erlang">
[
  {rabbit, [
      {default_user, &lt;&lt;"guest"&gt;&gt;},
      {default_pass,
        {encrypted,
         &lt;&lt;"cPAymwqmMnbPXXRVqVzpxJdrS8mHEKuo2V+3vt1u/fymexD9oztQ2G/oJ4PAaSb2c5N/hRJ2aqP/X0VAfx8xOQ=="&gt;&gt;
        }
      },
      {config_entry_decoder, [
             {passphrase, &lt;&lt;"mypassphrase"&gt;&gt;}
         ]}
    ]}
].
</pre>

<p>Note the <span class="code ">config_entry_decoder</span> key with the passphrase
that RabbitMQ will use to decrypt encrypted values.</p>
<p>The passphrase doesn't have to be hardcoded in the configuration file,
it can be in a separate file:</p>
<pre class="lang-erlang">
[
  {rabbit, [
      %% ...
      {config_entry_decoder, [
             {passphrase, {file, "/path/to/passphrase/file"}}
         ]}
    ]}
].
</pre>

<p>RabbitMQ can also request an operator to enter the passphrase
when it starts by using <span class="code ">{passphrase, prompt}</span>.</p>
<p>Use <a href="./cli.html">rabbitmqctl</a> and the <span class="code ">encode</span>
command to encrypt values:</p>
<pre class="lang-bash">
rabbitmqctl encode '&lt;&lt;"guest"&gt;&gt;' mypassphrase
{encrypted,&lt;&lt;"... long encrypted value..."&gt;&gt;}
rabbitmqctl encode '"amqp://fred:secret@host1.domain/my_vhost"' mypassphrase
{encrypted,&lt;&lt;"... long encrypted value..."&gt;&gt;}
</pre>

<p>Or, on Windows:</p>
<pre class="lang-powershell">
rabbitmqctl encode "&lt;&lt;""guest""&gt;&gt;" mypassphrase
{encrypted,&lt;&lt;"... long encrypted value..."&gt;&gt;}
rabbitmqctl encode '"amqp://fred:secret@host1.domain/my_vhost"' mypassphrase
{encrypted,&lt;&lt;"... long encrypted value..."&gt;&gt;}
</pre>

<p>Add the <span class="code ">decode</span> command if you want to decrypt values:</p>
<pre class="lang-bash">
rabbitmqctl decode '{encrypted, &lt;&lt;"..."&gt;&gt;}' mypassphrase
&lt;&lt;"guest"&gt;&gt;
rabbitmqctl decode '{encrypted, &lt;&lt;"..."&gt;&gt;}' mypassphrase
"amqp://fred:secret@host1.domain/my_vhost"
</pre>

<p>Or, on Windows:</p>
<pre class="lang-powershell">
rabbitmqctl decode "{encrypted, &lt;&lt;""...""&gt;&gt;}" mypassphrase
&lt;&lt;"guest"&gt;&gt;
rabbitmqctl decode "{encrypted, &lt;&lt;""...""&gt;&gt;}" mypassphrase
"amqp://fred:secret@host1.domain/my_vhost"
</pre>

<p>Values of different types can be encoded. The example above encodes
both binaries (<span class="code ">&lt;&lt;"guest"&gt;&gt;</span>) and strings
(<span class="code ">"amqp://fred:secret@host1.domain/my_vhost"</span>).</p>
<p>The encryption mechanism uses PBKDF2 to produce a derived key
from the passphrase. The default hash function is SHA512
and the default number of iterations is 1000. The default
cipher is AES 256 CBC.</p>
<p>These defaults can be changed in the configuration file:</p>
<pre class="lang-erlang">
[
  {rabbit, [
      ...
      {config_entry_decoder, [
             {passphrase, "mypassphrase"},
             {cipher, blowfish_cfb64},
             {hash, sha256},
             {iterations, 10000}
         ]}
    ]}
].</pre>

<p>Or using <a href="./cli.html">CLI tools</a>:</p>
<pre class="lang-bash">
rabbitmqctl encode --cipher blowfish_cfb64 --hash sha256 --iterations 10000 \
                     '&lt;&lt;"guest"&gt;&gt;' mypassphrase
</pre>

<p>Or, on Windows:</p>
<pre class="lang-powershell">
rabbitmqctl encode --cipher blowfish_cfb64 --hash sha256 --iterations 10000 \
                     "&lt;&lt;""guest""&gt;&gt;" mypassphrase
</pre>

<h2><a id="customise-environment" class="anchor" href="#customise-environment">Configuration Using Environment Variables</a></h2>
<p>Certain server parameters can be configured using environment variables:
<a href="./cli.html#node-names">node name</a>, RabbitMQ <a href="#configuration-files">configuration file location</a>,
<a href="./networking.html#ports">inter-node communication ports</a>, Erlang VM flags, and so on.</p>
<h3><a id="directory-and-path-restrictions" class="anchor" href="#directory-and-path-restrictions">Path and Directory Name Restrictions</a></h3>
<p>Some of the environment variable configure paths and locations (node's base or data directory, <a href="./plugins.html">plugin source and expansion directories</a>,
and so on). Those paths have must exclude a number of characters:</p>
<ul>
<li><span class="code ">*</span> and <span class="code ">?</span> (on Linux, macOS, BSD and other UNIX-like systems)</li>
<li><span class="code ">^</span> and <span class="code ">!</span> (on Windows)</li>
<li><span class="code ">[</span> and <span class="code ">]</span></li>
<li><span class="code ">{</span> and <span class="code ">}</span></li>
</ul>
<p>The above characters will render the node unable to start or function as expected (e.g. expand plugins and load their metadata).</p>
<h3><a id="environment-env-file-unix" class="anchor" href="#environment-env-file-unix">Linux, MacOS, BSD</a></h3>
<p>On UNIX-based systems (Linux, MacOS and flavours of BSD) it is possible to
use a file named <span class="code ">rabbitmq-env.conf</span>
to define environment variables that will be used by the broker.
Its <a href="#config-location">location</a> is configurable
using the <span class="code ">RABBITMQ_CONF_ENV_FILE</span> environment variable.</p>
<p><span class="code ">rabbitmq-env.conf</span> uses the standard environment variable names
but without the <span class="code ">RABBITMQ_</span> prefix. For example, the
<span class="code ">RABBITMQ_CONFIG_FILE</span> variable appears below as <span class="code ">CONFIG_FILE</span> and
<span class="code ">RABBITMQ_NODENAME</span> becomes <span class="code ">NODENAME</span>:</p>
<pre class="lang-bash">
# Example rabbitmq-env.conf file entries. Note that the variables
# do not have the RABBITMQ_ prefix.
#
# Overrides node name
NODENAME=bunny@myhost

# Specifies new style config file location
CONFIG_FILE=/etc/rabbitmq/rabbitmq.conf

# Specifies advanced config file location
ADVANCED_CONFIG_FILE=/etc/rabbitmq/advanced.config
</pre>

<p>See the <a href="man/rabbitmq-env.conf.5.html">rabbitmq-env.conf man page</a> for details.</p>
<h3><a id="rabbitmq-env-file-windows" class="anchor" href="#rabbitmq-env-file-windows">Windows</a></h3>
<p>The easiest option to customise names, ports or locations is
to configure environment variables in the Windows dialogue:
StartÂ &gt;Â SettingsÂ &gt;Â ControlÂ PanelÂ &gt;Â SystemÂ &gt;Â AdvancedÂ &gt;Â EnvironmentÂ Variables.
Then create or edit the system variable name and value.</p>
<p>Alternatively it is possible to use a file named <span class="code ">rabbitmq-env-conf.bat</span>
to define environment variables that will be used by the broker.
Its <a href="#config-location">location</a> is configurable
using the <span class="code ">RABBITMQ_CONF_ENV_FILE</span> environment variable.</p>
<p>Windows service users will need to <strong>re-install the service</strong> if configuration file location
or any values in <span class="code ">`rabbitmq-env-conf.bat</span> changed. Environment variables used by
the service would not be updated otherwise.</p>
<p>This can be done using the installer or on the command line
with administrator permissions:</p>
<ul>
<li>Start an <a href="https://technet.microsoft.com/en-us/library/cc947813%28v=ws.10%29.aspx">administrative command prompt</a></li>
<li>cd into the sbin folder under the RabbitMQ server installation directory (such as <span class="code ">C:\Program Files (x86)\RabbitMQ Server\rabbitmq_server-{version}\sbin</span>)</li>
<li>Run <span class="code ">rabbitmq-service.bat stop</span> to stop the service</li>
<li>Run <span class="code ">rabbitmq-service.bat remove</span> to remove the Windows service (this will <em>not</em> remove RabbitMQ or its data directory)</li>
<li>Set environment variables via command line, i.e. run commands like the following: <pre class="lang-powershell">set RABBITMQ_BASE=C:\Data\RabbitMQ</pre></li>
<li>Run <span class="code ">rabbitmq-service.bat install</span></li>
<li>Run <span class="code ">rabbitmq-service.bat start</span></li>
</ul>
<p>This will restart the node in a way that makes the environment variable and
<span class="code ">rabbitmq-env-conf.bat</span> changes to be observable to it.</p>
<h2><a id="supported-environment-variables" class="anchor" href="#supported-environment-variables">Environment Variables Used by RabbitMQ</a></h2>
<p>All environment variables used by RabbitMQ use the
prefix <span class="code ">RABBITMQ_</span> (except when defined in <a href="#environment-env-file-unix">rabbitmq-env.conf</a> or
<a href="#environment-env-file-windows">rabbitmq-env-conf.bat</a>).</p>
<p>Environment variables set in the shell environment take
priority over those set
in <a href="#environment-env-file-unix">rabbitmq-env.conf</a> or
<a href="#environment-env-file-windows">rabbitmq-env-conf.bat</a>, which in turn override
RabbitMQ built-in defaults.</p>
<p>The table below describes key environment variables that can be used to configure RabbitMQ.
More variables are covered in the <a href="./relocate.html">File and Directory Locations guide</a>.</p>
<table class="name-description">
  <tr>
    <th>Name</th>
    <th>Description</th>
  </tr>

  <tr>
    <td>RABBITMQ_NODE_IP_ADDRESS</td>
    <td>
      Change this if you only want to bind to one network interface.
      Binding to two or more interfaces can be set up in the configuration file.

      <p>
        <strong>Default</strong>: an empty string, meaning "bind to all network interfaces".
      </p>
    </td>
  </tr>

  <tr>
    <td>RABBITMQ_NODE_PORT</td>
    <td>
      See <a href="./networking.html">Networking guide</a> for more information on ports used by various
      parts of RabbitMQ.

      <p>
        <strong>Default</strong>: 5672.
      </p>
    </td>
  </tr>

  <tr>
    <td>RABBITMQ_DIST_PORT</td>
    <td>
      Port used for inter-node and CLI tool communication. Ignored if node config
      file sets <span class="code ">kernel.inet_dist_listen_min</span> or
      <span class="code ">kernel.inet_dist_listen_max</span> keys.
      See <a href="./networking.html">Networking</a> for details, and
      <a href="./windows-quirks.html">Windows Quirks</a> for Windows-specific details.

      <p>
        <strong>Default</strong>: <span class="code ">RABBITMQ_NODE_PORT + 20000</span>
      </p>
    </td>
  </tr>

  <tr>
    <td>ERL_EPMD_ADDRESS</td>
    <td>
      Interface(s) used by <a href="./networking.html#epmd">epmd</a>, a component in inter-node and CLI tool communication.

      <p>
        <strong>Default</strong>: all available interfaces, both IPv6 and IPv4.
      </p>
    </td>
  </tr>

  <tr>
    <td>ERL_EPMD_PORT</td>
    <td>
      Port used by <a href="./networking.html#epmd">epmd</a>, a component in inter-node and CLI tool communication.

      <p>
        <strong>Default</strong>: <span class="code ">4369</span>
      </p>
    </td>
  </tr>

  <tr>
    <td>RABBITMQ_DISTRIBUTION_BUFFER_SIZE</td>
    <td>
      <a href="https://erlang.org/doc/man/erl.html#+zdbbl">Outgoing data buffer size limit</a>
      to use for inter-node communication connections, in kilobytes. Values lower than
      64 MB are not recommended.

      <p>
        <strong>Default</strong>: 128000
      </p>
    </td>
  </tr>

  <tr>
    <td>RABBITMQ_NODENAME</td>
    <td>
      The node name should be unique per Erlang-node-and-machine combination.
      To run multiple nodes, see the <a href="./clustering.html">clustering guide</a>.

      <p>
        <strong>Default</strong>:

        <ul>
          <li>
            <b>Unix*:</b>
            <span class="code ">rabbit@$HOSTNAME</span>
          </li>
          <li>
            <b>Windows:</b>
            <span class="code ">rabbit@%COMPUTERNAME%</span>
          </li>
        </ul>
      </p>
    </td>
  </tr>

  <tr>
    <td>RABBITMQ_CONFIG_FILE</td>
    <td>
      Main RabbitMQ config file path, for example,
      <span class="code ">/etc/rabbitmq/rabbitmq.conf</span> or <span class="code ">/data/configuration/rabbitmq.conf</span> for new style configuration format files.
      If classic config format it used, the extension must be <span class="code ">.config</span>

      <p>
        <strong>Default</strong>:

        <ul>
          <li><b>Generic UNIX</b>: <span class="code ">$RABBITMQ_HOME/etc/rabbitmq/rabbitmq.conf</span>
          </li>
          <li><b>Debian</b>: <span class="code ">/etc/rabbitmq/rabbitmq.conf</span></li>
          <li><b>RPM</b>: <span class="code ">/etc/rabbitmq/rabbitmq.conf</span></li>
          <li>
            <b>MacOS(Homebrew)</b>: <span class="code ">${install_prefix}/etc/rabbitmq/rabbitmq.conf</span>,
            the Homebrew prefix is usually <span class="code ">/usr/local</span>
          </li>
          <li><b>Windows</b>: <span class="code ">%APPDATA%\RabbitMQ\rabbitmq.conf</span></li>
        </ul>
      </p>
    </td>
  </tr>

  <tr>
    <td>RABBITMQ_CONFIG_FILES</td>
    <td>
      Path to a directory of RabbitMQ configuration files in the new-style (.conf) format.
      The files will be loaded in alphabetical order. Prefixing each files with a number
      is a common practice.

      <p>
        <strong>Default</strong>:

        <ul>
          <li><b>Generic UNIX</b>: <span class="code ">$RABBITMQ_HOME/etc/rabbitmq/conf.d</span>
          </li>
          <li><b>Debian</b>: <span class="code ">/etc/rabbitmq/conf.d</span></li>
          <li><b>RPM</b>: <span class="code ">/etc/rabbitmq/conf.d</span></li>
          <li>
            <b>MacOS(Homebrew)</b>: <span class="code ">${install_prefix}/etc/rabbitmq/conf.d</span>,
            the Homebrew prefix is usually <span class="code ">/usr/local</span>
          </li>
          <li><b>Windows</b>: <span class="code ">%APPDATA%\RabbitMQ\conf.d</span></li>
        </ul>
      </p>
    </td>
  </tr>

  <tr>
    <td>RABBITMQ_ADVANCED_CONFIG_FILE</td>
    <td>
      "Advanced" (Erlang term-based) RabbitMQ config file path with a <span class="code ">.config</span> file extension.
      For example, <span class="code ">/data/rabbitmq/advanced.config</span>.

      <p>
        <strong>Default</strong>:

        <ul>
          <li>
            <b>Generic UNIX</b>: <span class="code ">$RABBITMQ_HOME/etc/rabbitmq/advanced.config</span>
          </li>
          <li><b>Debian</b>: <span class="code ">/etc/rabbitmq/advanced.config</span></li>
          <li><b>RPM</b>: <span class="code ">/etc/rabbitmq/advanced.config</span></li>
          <li>
            <b>MacOS (Homebrew)</b>: <span class="code ">${install_prefix}/etc/rabbitmq/advanced.config</span>,
            the Homebrew prefix is usually <span class="code ">/usr/local</span>
          </li>
          <li><b>Windows</b>: <span class="code ">%APPDATA%\RabbitMQ\advanced.config</span></li>
        </ul>
      </p>
    </td>
  </tr>

  <tr>
    <td>RABBITMQ_CONF_ENV_FILE</td>
    <td>
      Location of the file that contains environment variable definitions (without the <span class="code ">RABBITMQ_</span>
      prefix). Note that the file name on Windows is different from other operating systems.

      <p>
        <strong>Default</strong>:

        <ul>
          <li><b>Generic UNIX package</b>: <span class="code ">$RABBITMQ_HOME/etc/rabbitmq/rabbitmq-env.conf</span></li>
          <li><b>Ubuntu and Debian</b>: <span class="code ">/etc/rabbitmq/rabbitmq-env.conf</span></li>
          <li><b>RPM</b>: <span class="code ">/etc/rabbitmq/rabbitmq-env.conf</span></li>
          <li>
            <b>MacOS (Homebrew)</b>: <span class="code ">${install_prefix}/etc/rabbitmq/rabbitmq-env.conf</span>,
            the Homebrew prefix is usually <span class="code ">/usr/local</span>
          </li>
          <li><b>Windows</b>: <span class="code ">%APPDATA%\RabbitMQ\rabbitmq-env-conf.bat</span></li>
        </ul>
      </p>
    </td>
  </tr>

  <tr>
    <td>RABBITMQ_MNESIA_BASE</td>
    <td>
      This base directory contains sub-directories for the RabbitMQ
      server's node database, message store and cluster state files, one for each node,
      unless <b>RABBITMQ_MNESIA_DIR</b> is set explicitly.
      It is important that effective RabbitMQ user has sufficient permissions
      to read, write and create files and subdirectories in this directory
      at any time. This variable is typically not overridden.
      Usually <span class="code ">RABBITMQ_MNESIA_DIR</span> is overridden instead.

      <p>
        <strong>Default</strong>:

        <ul>
          <li><b>Generic UNIX package</b>: <span class="code ">$RABBITMQ_HOME/var/lib/rabbitmq/mnesia</span></li>
          <li><b>Ubuntu and Debian</b> packages: <span class="code ">/var/lib/rabbitmq/mnesia/</span></li>
          <li><b>RPM</b>: <span class="code ">/var/lib/rabbitmq/plugins</span></li>
          <li>
            <b>MacOS (Homebrew)</b>: <span class="code ">${install_prefix}/var/lib/rabbitmq/mnesia</span>,
            the Homebrew prefix is usually <span class="code ">/usr/local</span>
          </li>
          <li><b>Windows</b>: <span class="code ">%APPDATA%\RabbitMQ</span></li>
        </ul>
      </p>
    </td>
  </tr>

  <tr>
    <td>RABBITMQ_MNESIA_DIR</td>
    <td>
      The directory where this RabbitMQ node's data is stored. This includes
      a schema database, message stores, cluster member information and other
      persistent node state.

      <p>
        <strong>Default</strong>:

        <ul>
          <li><b>Generic UNIX package</b>: <span class="code ">$RABBITMQ_MNESIA_BASE/$RABBITMQ_NODENAME</span></li>
          <li><b>Ubuntu and Debian</b> packages: <span class="code ">$RABBITMQ_MNESIA_BASE/$RABBITMQ_NODENAME</span></li>
          <li><b>RPM</b>: <span class="code ">$RABBITMQ_MNESIA_BASE/$RABBITMQ_NODENAME</span></li>
          <li>
            <b>MacOS (Homebrew)</b>: <span class="code ">${install_prefix}/var/lib/rabbitmq/mnesia/$RABBITMQ_NODENAME</span>,
            the Homebrew prefix is usually <span class="code ">/usr/local</span>
          </li>
          <li><b>Windows</b>: <span class="code ">%APPDATA%\RabbitMQ\$RABBITMQ_NODENAME</span></li>
        </ul>
      </p>
    </td>
  </tr>

  <tr>
    <td>RABBITMQ_PLUGINS_DIR</td>
    <td>
      The list of directories where <a href="./plugins.html">plugin</a> archive files are located and extracted
      from. This is <span class="code ">PATH</span>-like variable, where
      different paths are separated by an OS-specific separator
      (<span class="code ">:</span> for Unix, <span class="code ">;</span> for Windows).
      Plugins can be <a href="plugins.html">installed</a> to any of the directories listed here.
      Must not contain any characters mentioned in the <a href="#directory-and-path-restrictions">path restriction section</a>.
      See <a href="cli.html#rabbitmq-plugins">CLI tools guide</a> to learn about the effects of changing
      this variable on <span class="code ">rabbitmq-plugins</span>.

      <p>
        <strong>Default</strong>:

        <ul>
          <li><b>Generic UNIX package</b>: <span class="code ">$RABBITMQ_HOME/plugins</span></li>
          <li><b>Ubuntu and Debian</b> packages: <span class="code ">/var/lib/rabbitmq/plugins</span></li>
          <li><b>RPM</b>: <span class="code ">/var/lib/rabbitmq/plugins</span></li>
          <li>
            <b>MacOS (Homebrew)</b>: <span class="code ">${install_prefix}/Cellar/rabbitmq/${version}/plugins</span>,
            the Homebrew prefix is usually <span class="code ">/usr/local</span>
          </li>
          <li><b>Windows</b>: <span class="code ">%RABBITMQ_HOME%\plugins</span></li>
        </ul>
      </p>
    </td>
  </tr>

  <tr>
    <td>RABBITMQ_PLUGINS_EXPAND_DIR</td>
    <td>
      The directory the node expand (unpack) <a href="./plugins.html">plugins</a> to and use it as a code path location.
      Must not contain any characters mentioned in the <a href="#directory-and-path-restrictions">path restriction section</a>.

      <p>
        <strong>Default</strong>:

        <ul>
          <li><b>Generic UNIX package</b>: <span class="code ">$RABBITMQ_MNESIA_BASE/$RABBITMQ_NODENAME-plugins-expand</span></li>
          <li><b>Ubuntu and Debian</b> packages: <span class="code ">$RABBITMQ_MNESIA_BASE/$RABBITMQ_NODENAME-plugins-expand</span></li>
          <li><b>RPM</b>: <span class="code ">$RABBITMQ_MNESIA_BASE/$RABBITMQ_NODENAME-plugins-expand</span></li>
          <li>
            <b>MacOS (Homebrew)</b>:
              <span class="code ">${install_prefix}/var/lib/rabbitmq/mnesia/$RABBITMQ_NODENAME-plugins-expand</span>
          </li>
          <li><b>Windows</b>: <span class="code ">%APPDATA%\RabbitMQ\$RABBITMQ_NODENAME-plugins-expand</span></li>
        </ul>
      </p>
    </td>
  </tr>

  <tr>
    <td>RABBITMQ_USE_LONGNAME</td>
    <td>
      When set to <span class="code ">true</span> this will cause RabbitMQ
      to use fully qualified names to identify nodes. This
      may prove useful in environments that use fully-qualified domain names or use IP addresses
      as hostnames or part of node names.
      Note that it is not possible to switch a node from short name to long name without
      resetting it.

      <p>
        <strong>Default</strong>: <span class="code ">false</span>
      </p>
    </td>
  </tr>

  <tr>
    <td>RABBITMQ_SERVICENAME</td>
    <td>
      The name of the installed Windows service. This will appear in
      <span class="code ">services.msc</span>.

      <p>
        <strong>Default</strong>: RabbitMQ.
      </p>
  </td>
  </tr>

  <tr>
    <td>RABBITMQ_CONSOLE_LOG</td>
    <td>
      Set this variable to <span class="code ">new</span> or <span class="code ">reuse</span>
      to redirect console output from the server to a file named
      <span class="code ">%RABBITMQ_SERVICENAME%</span> in the
      default <span class="code ">RABBITMQ_BASE</span> directory.
      <ul>
        <li>If not set, console output from the server will be discarded (default).</li>
        <li><span class="code ">new</span>: a new file will be created each time the service starts.</li>
        <li><span class="code ">reuse</span>: the file will be overwritten each time the service starts.</li>
      </ul>

      <p>
        <strong>Default</strong>: (none)
      </p>
    </td>
  </tr>

  <tr>
    <td>RABBITMQ_SERVER_CODE_PATH</td>
    <td>
      <p>
        Extra code path (a directory) to be specified when starting the runtime.
        Will be passed to the <span class="code ">erl</span> command when a node is started.
      </p>

      <p>
        <strong>Default</strong>: (none)
      </p>
    </td>
  </tr>

  <tr>
    <td>RABBITMQ_CTL_ERL_ARGS</td>
    <td>
      Parameters for the <span class="code ">erl</span> command used when invoking
      <span class="code ">rabbitmqctl</span>. This could be set to specify a range
      of ports to use for Erlang distribution:<br />
      <span class="code ">-kernel inet_dist_listen_min 35672</span><br />
      <span class="code ">-kernel inet_dist_listen_max 35680</span>

      <p>
        <strong>Default</strong>: (none)
      </p>
    </td>
  </tr>

  <tr>
    <td>RABBITMQ_SERVER_ERL_ARGS</td>
    <td>
      Standard parameters for the <span class="code ">erl</span> command used when
      invoking the RabbitMQ Server. This should be overridden for
      debugging purposes only. Overriding this variable
      <em>replaces</em> the default value.

      <p>
        <strong>Default</strong>:

        <ul>
          <li><b>Unix*:</b>
            <span class="code ">+P 1048576 +t 5000000 +stbt db +zdbbl 128000</span>
          </li>
          <li><b>Windows:</b> None</li>
        </ul>
      </p>
    </td>
  </tr>

  <tr>
    <td>RABBITMQ_SERVER_ADDITIONAL_ERL_ARGS</td>
    <td>
      Additional parameters for the <span class="code ">erl</span> command used when
      invoking the RabbitMQ Server. The value of this variable
      is appended to the default list of arguments (<span class="code ">RABBITMQ_SERVER_ERL_ARGS</span>).

      <p>
        <strong>Default</strong>:

        <ul>
          <li><b>Unix*:</b> None</li>
          <li><b>Windows:</b> None</li>
        </ul>
      </p>
    </td>
  </tr>

  <tr>
    <td>RABBITMQ_SERVER_START_ARGS</td>
    <td>
      Extra parameters for the <span class="code ">erl</span> command used when
      invoking the RabbitMQ Server. This will not override
      <span class="code ">RABBITMQ_SERVER_ERL_ARGS</span>.

      <p>
        <strong>Default</strong>: (none)
      </p>
    </td>
  </tr>

  <tr>
    <td>RABBITMQ_DEFAULT_USER</td>
    <td>
      This environment variable is <strong>only meant to be used in development and CI environments</strong>.
      This has the same meaning as <span class="code ">default_user</span> in <span class="code ">rabbitmq.conf</span> but higher
      priority. This option may be more convenient in cases where providing a config file is impossible,
      and environment variables is the only way to <a href="access-control.html#seeding">seed a user</a>.

      <p>
        <strong>Default</strong>: (none)
      </p>
    </td>
  </tr>

  <tr>
    <td>RABBITMQ_DEFAULT_PASS</td>
    <td>
      This environment variable is <strong>only meant to be used in development and CI environments</strong>.
      This has the same meaning as <span class="code ">default_pass</span> in <span class="code ">rabbitmq.conf</span> but higher
      priority. This option may be more convenient in cases where providing a config file is impossible,
      and environment variables is the only way to <a href="access-control.html#seeding">seed a user</a>.

      <p>
        <strong>Default</strong>: (none)
      </p>
    </td>
  </tr>

  <tr>
    <td>RABBITMQ_DEFAULT_VHOST</td>
    <td>
      This environment variable is <strong>only meant to be used in development and CI environments</strong>.
      This has the same meaning as <span class="code ">default_vhost</span> in <span class="code ">rabbitmq.conf</span> but higher
      priority. This option may be more convenient in cases where providing a config file is impossible,
      and environment variables is the only way to <a href="access-control.html#seeding">seed users</a> and virtual hosts.

      <p>
        <strong>Default</strong>: (none)
      </p>
    </td>
  </tr>
</table>

<p>Besides the variables listed above, there are several environment variables which
tell RabbitMQ <a href="relocate.html">where to locate its database, log files, plugins, configuration and so on</a>.</p>
<p>Finally, some environment variables are operating system-specific.</p>
<table class="name-description">
  <tr>
    <th>Name</th>
    <th>Description</th>
  </tr>

  <tr>
    <td>HOSTNAME</td>
    <td>
      The name of the current machine.

      <p>
        <strong>Default</strong>:

        <ul>
          <li>Unix, Linux: <span class="code ">env hostname</span></li>
          <li>MacOS: <span class="code ">env hostname -s</span></li>
        </ul>
      </p>
    </td>
  </tr>

  <tr>
    <td>COMPUTERNAME</td>
    <td>
      The name of the current machine.

      <p>
        <strong>Default</strong>:

        <ul>
          <li>Windows: <span class="code ">localhost</span></li>
        </ul>
      </p>
    </td>
  </tr>

  <tr>
    <td>ERLANG_SERVICE_MANAGER_PATH</td>
    <td>
      This path is the location of <span class="code ">erlsrv.exe</span>,
      the Erlang service wrapper script.

      <p>
        <strong>Default</strong>:

        <ul>
          <li>Windows Service: <span class="code ">%ERLANG_HOME%\erts-<var>x.x.x</var>\bin</span></li>
        </ul>
      </p>
    </td>
  </tr>
</table>

<h2><a id="kernel-limits" class="anchor" href="#kernel-limits">Operating System Kernel Limits</a></h2>
<p>Most operating systems enforce limits on kernel resources: virtual memory, stack size, open file handles
and more. To Linux users these limits can be known as "ulimit limits".</p>
<p>RabbitMQ nodes are most commonly affected by the maximum <a href="./networking.html#open-file-handle-limit">open file handle limit</a>.
Default limit value on most Linux distributions is usually 1024, which is very low for a messaging broker (or generally, any data service).
See <a href="./production-checklist.html">Production Checklist</a> for recommended values.</p>
<h3>Modifying Limits</h3>
<h4>With systemd (Modern Linux Distributions)</h4>
<p>On distributions that use systemd, the OS limits are controlled via
a configuration file at <span class="code ">/etc/systemd/system/rabbitmq-server.service.d/limits.conf</span>.
For example, to set the max open file handle limit (<span class="code ">nofile</span>) to <span class="code ">64000</span>:</p>
<pre class="lang-plaintext">
[Service]
LimitNOFILE=64000
</pre>

<p>See <a href="https://www.freedesktop.org/software/systemd/man/systemd.exec.html">systemd documentation</a> to learn about
the supported limits and other directives.</p>
<h4>With Docker</h4>
<p>To configure kernel limits for Docker contains, use the <span class="code ">"default-ulimits"</span> key in
<a href="https://docs.docker.com/engine/reference/commandline/dockerd/#daemon-configuration-file">Docker daemon configuration file</a>.
The file has to be installed on Docker hosts at <span class="code ">/etc/docker/daemon.json</span>:</p>
<pre class="lang-json">
{
  "default-ulimits": {
    "nofile": {
      "Name": "nofile",
      "Hard": 64000,
      "Soft": 64000
    }
  }
}
</pre>

<h4>Without systemd (Older Linux Distributions)</h4>
<p>The most straightforward way to adjust the per-user limit for
RabbitMQ on distributions that do not use systemd is to edit the <span class="code ">/etc/default/rabbitmq-server</span>
(provided by the RabbitMQ Debian package) or <a href="#config-file">rabbitmq-env.conf</a>
to invoke <span class="code ">ulimit</span> before the service is started.</p>
<pre class="lang-plaintext">
ulimit -S -n 4096
</pre>

<p>This <em>soft</em> limit cannot go higher than the <em>hard</em> limit (which defaults to 4096 in many distributions).
<a href="https://github.com/basho/basho_docs/blob/master/content/riak/kv/2.2.3/using/performance/open-files-limit.md">The hard limit can be increased</a> via
<span class="code ">/etc/security/limits.conf</span>. This also requires enabling the <a href="http://askubuntu.com/a/34559">pam_limits.so</a> module
and re-login or reboot.</p>
<p>Note that limits cannot be changed for running OS processes.</p><div id="help-and-feedback"><h2>Getting Help and Providing Feedback</h2><p>
                    If you have questions about the contents of this guide or
                    any other topic related to RabbitMQ, don't hesitate to ask them
                    on the <a href="https://groups.google.com/forum/#!forum/rabbitmq-users">RabbitMQ mailing list</a>.
                  </p></div><div id="contribute"><h2>Help Us Improve the Docs &lt;3</h2><p>
                    If you'd like to contribute an improvement to the site,
                    its source is <a href="https://github.com/rabbitmq/rabbitmq-website">available on GitHub</a>.
                    Simply fork the repository and submit a pull request. Thank you!
                  </p></div></div><div id="right-nav"><div id="in-this-section"><h4>In This Section</h4><ul>
     <li><a href="/admin-guide.html" class="selected">Server Documentation</a><ul>
       <li><a href="/configure.html" class="selected">Configuration</a><ul>
         <li><a href="/relocate.html">File Locations</a></li>
         <li><a href="/logging.html">Logging</a></li>
         <li><a href="/persistence-conf.html">Persistence</a></li>
         <li><a href="/networking.html">Networking</a></li>
         <li><a href="/parameters.html">Parameters and Policies</a></li>
       </ul></li>
       <li><a href="/management.html">Management UI</a></li>
       <li><a href="/monitoring.html">Monitoring</a></li>
       <li><a href="/production-checklist.html">Production Checklist</a></li>
       <li><a href="/ssl.html">TLS Support</a></li>
       <li><a href="/streams.html">Streams</a></li>
       <li><a href="/feature-flags.html">Feature Flags</a></li>
       <li><a href="/distributed.html">Distributed RabbitMQ</a></li>
       <li><a href="/clustering.html">Clustering</a></li>
       <li><a href="/reliability.html">Reliable Delivery</a></li>
       <li><a href="/definitions.html">Schema Definition Export and Import</a></li>
       <li><a href="/backup.html">Backup and restore</a></li>
       <li><a href="/alarms.html">Alarms</a></li>
       <li><a href="/memory-use.html">Memory Use</a></li>
       <li><a href="/networking.html">Networking</a></li>
       <li><a href="/vhosts.html">Virtual Hosts</a></li>
       <li><a href="/access-control.html">Access Control (Authorisation)</a></li>
       <li><a href="/authentication.html">Authentication Mechanisms</a></li>
       <li><a href="/ldap.html">LDAP</a></li>
       <li><a href="/lazy-queues.html">Lazy Queues</a></li>
       <li><a href="/event-exchange.html">Internal Event Exchange</a></li>
       <li><a href="/firehose.html">Firehose (Message Tracing)</a></li>
       <li><a href="/manpages.html">Manual Pages</a></li>
       <li><a href="/windows-quirks.html">Windows Quirks</a></li>
       
       
       
       
     </ul></li>
     <li><a href="/clients.html">Client Documentation</a></li>
     <li><a href="/plugins.html">Plugins</a></li>
     <li><a href="/news.html">News</a></li>
     <li><a href="/protocol.html">Protocol</a></li>
     <li><a href="/extensions.html">Our Extensions</a></li>
     <li><a href="/build.html">Building</a></li>
     
     <li><a href="/mpl.html">License</a></li>
   </ul></div></div></div><div class="clear"></div><div class="pageFooter"><div class="container"></div><div class="container"><div class="rabbit-logo"><a href="/"><img src="/img/logo-rabbitmq-white.svg" alt="RabbitMQ" /></a></div><ul class="footerNav"><li><a href="/#features">Features</a></li><li><a href="/#getstarted">Get Started</a></li><li><a href="/#support">Support</a></li><li><a href="/#community">Community</a></li><li><a href="/documentation.html">Docs</a></li></ul><p id="copyright">
          Copyright Â© 2007-2023 <a href="https://tanzu.vmware.com/">VMware</a>, Inc. or its affiliates. All rights reserved.
          <a href="https://www.vmware.com/help/legal.html">Terms of Use</a> â€¢
          <a href="https://www.vmware.com/help/privacy.html">Privacy</a> â€¢
          <a href="/trademark-guidelines.html">Trademark Guidelines</a> â€¢
          <a href="https://www.vmware.com/help/privacy/california-privacy-rights.html">Your California Privacy Rights</a> â€¢
          <a class="ot-sdk-show-settings">Cookie Settings</a><br /><a id="teconsent"></a></p></div></div></div><script type="text/javascript" src="/js/highlight.pack.js"></script><script type="text/javascript">
        // code highlighting
        window.addEventListener("load", function() {
          const selectors = "pre.lang-bash, \
                             pre.lang-csharp, \
                             pre.lang-elixir, \
                             pre.lang-erlang, \
                             pre.lang-go, \
                             pre.lang-groovy, \
                             pre.lang-haskell, \
                             pre.lang-html, \
                             pre.lang-ini, \
                             pre.lang-java, \
                             pre.lang-javascript, \
                             pre.lang-json, \
                             pre.lang-makefile, \
                             pre.lang-objectivec, \
                             pre.lang-php, \
                             pre.lang-plaintext, \
                             pre.lang-powershell, \
                             pre.lang-python, \
                             pre.lang-ruby, \
                             pre.lang-swift, \
                             pre.lang-yaml, \
                             pre.lang-xml";
          document.querySelectorAll(selectors).forEach(function(el) {
            hljs.highlightBlock(el);
          });
        });
      </script></body>
</html>
