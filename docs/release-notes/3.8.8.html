<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
      new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&amp;l='+l:'';j.async=true;j.src=
      'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
      })(window,document,'script','dataLayer','GTM-NSPM4RC');</script><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="googlebot" content="NOODP" /><meta name="google-site-verification" content="nSYeDgyKM9mw5CWcZuD0xu7iSWXlJijAlg9rcxVOYf4" /><meta name="google-site-verification" content="6UEaC3SWhpGQvqRnSJIEm2swxXpM5Adn4dxZhFsNdw0" /><meta content="width=device-width, initial-scale=1.0, maximum-scale=1, minimum-scale=1, user-scalable=no" id="viewport" name="viewport" /><link href="https://fonts.googleapis.com/css?family=Raleway:400,500,600,700" rel="stylesheet" /><link rel="stylesheet" href="/css/rabbit.css" type="text/css" /><link rel="stylesheet" href="/css/highlightjs_style.css" type="text/css" /><link rel="stylesheet" href="/css/rabbit-next.css" type="text/css" /><!--[if IE 6]>
      <link rel="stylesheet" href="/css/rabbit-ie6.css" type="text/css" />
      <![endif]--><link rel="icon" type="/image/vnd.microsoft.icon" href="/favicon.ico" /><link rel="stylesheet" href="/css/tutorial.css" type="text/css" /><script async="true" type="text/javascript" src="/js/site.js"></script><title>(Untitled) — RabbitMQ</title></head>
  <body id="release-notes/3.8.8"><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NSPM4RC" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div id="outerContainer"><div class="container"><div class="rabbit-logo"><a href="/"><img src="/img/logo-rabbitmq.svg" alt="RabbitMQ" /></a></div><a class="btn menubtn" onclick="showHide()">Menu <img src="/img/carrot-down-white.svg" /></a><div class="mobilemenuicon" onclick="showHide()"><img src="/img/mobile-menu-icon.svg" /></div><div id="nav"><ul id="mainNav"><li><a href="/#features">Features</a></li><li><a href="/#getstarted">Get Started</a></li><li><a href="/#support">Support</a></li><li><a href="/#community">Community</a></li><li><a href="/documentation.html">Docs</a></li></ul></div></div><div class="nav-separator"></div><div id="innerContainer" class="container"><div id="left-content"><h1>(Untitled)</h1>
<h2>RabbitMQ 3.8.8</h2>
<p>RabbitMQ <span class="code ">3.8.8</span> is a maintenance release.
It focuses on bug fixes and usability improvements.</p>
<p>This releases introduces a <a href="https://github.com/rabbitmq/rabbitmq-server/issues/2321">new node operation mode</a>, called the <em>maintenance mode</em>.
This feature is useful when performing rolling upgrades and is covered
in more detail below.</p>
<p>This is the <a href="https://groups.google.com/forum/#!topic/rabbitmq-users/v3K5nZNsfwM">last RabbitMQ release to support Erlang 21.3</a>.</p>
<h3>Erlang 23 Compatibility</h3>
<p>This release is <a href="https://groups.google.com/forum/#!topic/rabbitmq-users/wlPIWz3UYHQ">compatible</a> with <a href="http://blog.erlang.org/OTP-23-Highlights/">Erlang 23</a>.</p>
<h3>Erlang/OTP Compatibility Notes</h3>
<p>This release <a href="https://www.rabbitmq.com/which-erlang.html"><strong>requires Erlang/OTP 21.3</strong></a> or later.
<span class="code ">22.3</span> or <span class="code ">23.0</span> releases are recommended.</p>
<p><a href="https://www.rabbitmq.com/which-erlang.html#erlang-repositories">Provisioning Latest Erlang Releases</a> explains
what package repositories and tools can be used to provision latest patch versions of Erlang <span class="code ">22.3.x</span>.</p>
<h2>Upgrade and Compatibility Notes</h2>
<h3>Upgrade Doc Guides and Change Log</h3>
<p>See <a href="https://github.com/rabbitmq/rabbitmq-server/releases/tag/v3.8.0">3.8.0 release notes</a> upgrade and
compatibility notes first if upgrading from an earlier release.</p>
<p>See the <a href="https://www.rabbitmq.com/upgrade.html">Upgrading guide</a> for general documentation on upgrades and
<a href="https://www.rabbitmq.com/changelog.html">RabbitMQ change log</a> for release notes of other releases.</p>
<h3>Upgrading to Erlang 22.x or Later Versions</h3>
<p>When upgrading to this release from <span class="code ">3.7.15</span> or an older version, extra care has to be taken.</p>
<p>Because older RabbitMQ CLI tools can be incompatible with Erlang 22+ releases,
RabbitMQ <strong>must be upgraded at the same time as Erlang</strong>.</p>
<p>Alternatively the node can be upgraded to <span class="code ">3.7.18</span> on Erlang 21.3 first,
then Erlang 22.x or 23.x, then RabbitMQ to most recent 3.8.x release.</p>
<h3>Getting Help</h3>
<p>Any questions about this release, upgrades or RabbitMQ in general are welcome on the <a href="https://groups.google.com/forum/#!forum/rabbitmq-users">RabbitMQ mailing list</a>.</p>
<h2>Changes Worth Mentioning</h2>
<h3>Core Server</h3>
<h4>Enhancements</h4>
<ul>
<li>Maintenance mode. This is a <a href="https://github.com/rabbitmq/rabbitmq-server/issues/2321">new mode operation mode for RabbitMQ nodes</a>. The mode is explicitly turned
   on and off by the operator using a bunch of new CLI commands (see below). For mixed-version cluster
   compatibility, this feature must be <a href="https://www.rabbitmq.com/feature-flags.html">enabled using a feature flag</a>.</li>
</ul>
<p>When a node is being put down for maintenance and in maintenance mode, it will not be available for
   serving client traffic and will try to transfer as many of its responsibilities as practically possible
   and safe.</p>
<p>Currently this involves the following steps:</p>
<div class="highlight"><pre><span></span>* Suspend all client connection listeners (no new client connections will be accepted)
* Close all existing client connections: applications are expected to reconnect to other nodes and recover
* Transfer primary replicas of all classic mirrored queues hosted on the target node
* Transfer primary replicas of all quorum queues hosted on the target node, and prevent them from participating
  in the subsequently triggered Raft elections
* Mark the node as down for maintenance
* At this point, a node shutdown will be least disruptive as the node has already transferred most of its
  responsibilities
</pre></div>


<p>A node in maintenance mode will not be considered for new primary queue replica placement,
   regardless of queue type and the <a href="https://www.rabbitmq.com/ha.html#master-migration-data-locality">queue master locator policy</a> used.</p>
<p>A node in maintenance mode is expected to be shut down, upgraded or reconfigured, and restarted in a short
   period of time. Nodes are not expected to be running in this mode for long periods of time.</p>
<p>A node in maintenance mode can be revived, that is, brough back into its regular operational state.
   When a node is revived restarted (e.g. after an upgrade), it will again accept client connections
   and be considered for primary queue replica placements. It will not recover previous client connections
   as RabbitMQ never initiates connections to clients, but clients will be able to reconnect to it.</p>
<p>This feature is expected to evolve based on the feedback from the community, the field and the
   RabbitMQ core team at VMware. For example, it can be adjusted based on the learnings when
   adding upgrades support to the <a href="https://www.rabbitmq.com/kubernetes/operator/operator-overview.html">RabbitMQ Cluster Operator for Kubernetes</a>.</p>
<p>GitHub issue: <a href="https://github.com/rabbitmq/rabbitmq-server/issues/2321">rabbitmq/rabbitmq-server#2321</a></p>
<h3>CLI</h3>
<h4>Enhancements</h4>
<ul>
<li><span class="code ">rabbitmq-upgrade drain</span> is a new command that puts a node in maintenance mode (see above).
   <span class="code ">rabbitmq-upgrade revive</span> is its counterpart that "revives" a node by putting it into the regular
   operating mode.</li>
</ul>
<p><span class="code ">rabbitmqctl suspend_listeners</span> is a new command that suspends all <a href="https://www.rabbitmq.com/networking.html#ports">client connection listeners</a>
   (ports) on the node. This means that existing connections won't be affected but no new connections
   will be accepted. This can be useful during upgrades, in particular using the
   <a href="https://www.rabbitmq.com/blue-green-upgrade.html">Blue/Green deployment strategy</a>.</p>
<p><span class="code ">rabbitmqctl resume_listeners</span> resumes all client listeners so that they accept new client connections
   again.</p>
<p>All these commands will have an effect only if the <span class="code ">maintenance_mode_status</span> flag is enabled.</p>
<p>GitHub issue: <a href="https://github.com/rabbitmq/rabbitmq-cli/pull/419">rabbitmq/rabbitmq-cli#419</a></p>
<h3>MQTT Plugin</h3>
<h4>Bug Fixes</h4>
<ul>
<li>Abrupt client connection termination could result in an Erlang process leak. This resource leak
   affects RabbitMQ versions between <span class="code ">3.8.5</span> and <span class="code ">3.8.7</span>, inclusive.</li>
</ul>
<p>GitHub issue: <a href="https://github.com/rabbitmq/rabbitmq-mqtt/pull/239">rabbitmq/rabbitmq-mqtt#239</a></p>
<h3>Management Plugin</h3>
<h4>Bug Fixes</h4>
<ul>
<li>A node that had a lot of on disk data and constrainted resources could spend a very long time
   activating the plugin while queue primary replicas were busy recovering the data.</li>
</ul>
<p>GitHub issue: <a href="https://github.com/rabbitmq/rabbitmq-server/issues/2437">rabbitmq/rabbitmq-server#2437</a></p>
<h3>OAuth 2 AuthN/AuthZ Plugin</h3>
<h4>Enhancements</h4>
<ul>
<li>Simplified scope merging code specific to Keycloak.</li>
</ul>
<p>Contributed by Simon @SimonAlling Alling.</p>
<p>GitHub issue: <a href="https://github.com/rabbitmq/rabbitmq-auth-backend-oauth2/pull/52">rabbitmq/rabbitmq-auth-backend-oauth2#52</a></p>
<h2>Dependency Upgrades</h2>
<ul>
<li><span class="code ">cuttlefish</span> was upgraded <a href="https://github.com/Kyorai/cuttlefish/compare/v2.3.0...v2.4.1">from 2.3.0 to 2.4.1</a></li>
</ul>
<h2>Source code archives</h2>
<p><strong>Warning</strong>: The source code archive provided by GitHub only contains the source of the broker, not the plugins or the client libraries.
Please download the archive named <span class="code ">rabbitmq-server-3.8.8.tar.xz</span>.</p><div id="help-and-feedback"><h2>Getting Help and Providing Feedback</h2><p>
                    If you have questions about the contents of this guide or
                    any other topic related to RabbitMQ, don't hesitate to ask them
                    on the <a href="https://groups.google.com/forum/#!forum/rabbitmq-users">RabbitMQ mailing list</a>.
                  </p></div><div id="contribute"><h2>Help Us Improve the Docs &lt;3</h2><p>
                    If you'd like to contribute an improvement to the site,
                    its source is <a href="https://github.com/rabbitmq/rabbitmq-website">available on GitHub</a>.
                    Simply fork the repository and submit a pull request. Thank you!
                  </p></div></div><div id="right-nav"></div></div><div class="clear"></div><div class="pageFooter"><div class="container"></div><div class="container"><div class="rabbit-logo"><a href="/"><img src="/img/logo-rabbitmq-white.svg" alt="RabbitMQ" /></a></div><ul class="footerNav"><li><a href="/#features">Features</a></li><li><a href="/#getstarted">Get Started</a></li><li><a href="/#support">Support</a></li><li><a href="/#community">Community</a></li><li><a href="/documentation.html">Docs</a></li></ul><p id="copyright">
          Copyright © 2007-2021 <a href="https://tanzu.vmware.com/">VMware</a>, Inc. or its affiliates. All rights reserved.
          <a href="https://pivotal.io/legal">Terms of Use</a>,
          <a href="https://pivotal.io/privacy-policy">Privacy</a> and
          <a href="/trademark-guidelines.html">Trademark Guidelines</a><br /><a id="teconsent"></a></p></div></div></div><script type="text/javascript" src="/js/highlight.pack.js"></script><script type="text/javascript">
        // code highlighting
        window.addEventListener("load", function() {
          const selectors = "pre.lang-bash, \
                             pre.lang-csharp, \
                             pre.lang-elixir, \
                             pre.lang-erlang, \
                             pre.lang-go, \
                             pre.lang-groovy, \
                             pre.lang-haskell, \
                             pre.lang-html, \
                             pre.lang-ini, \
                             pre.lang-java, \
                             pre.lang-javascript, \
                             pre.lang-json, \
                             pre.lang-makefile, \
                             pre.lang-objectivec, \
                             pre.lang-php, \
                             pre.lang-plaintext, \
                             pre.lang-powershell, \
                             pre.lang-python, \
                             pre.lang-ruby, \
                             pre.lang-swift, \
                             pre.lang-yaml, \
                             pre.lang-xml";
          document.querySelectorAll(selectors).forEach(function(el) {
            hljs.highlightBlock(el);
          });
        });
      </script></body>
</html>
