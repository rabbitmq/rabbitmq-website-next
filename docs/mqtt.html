<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta content="73d8ba46-8c12-43f6-8c22-24aa21b8d93d" name="onetrust-data-domain" /><meta content="https://tags.tiqcdn.com/utag/vmware/microsites-privacy/prod/utag.js" name="microsites-utag" /><script src="https://d1fto35gcfffzn.cloudfront.net/assets/jquery-1.11.2.min.js"></script><script src="//www.vmware.com/files/templates/inc/utag_data.js"></script><script src="//tags.tiqcdn.com/utag/vmware/microsites-privacy/prod/utag.sync.js"></script><script>function OptanonWrapper() { { window.dataLayer.push({ event: 'OneTrustGroupsUpdated' }); } }</script><script src="/js/gtm.js"></script><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="googlebot" content="NOODP" /><meta name="google-site-verification" content="nSYeDgyKM9mw5CWcZuD0xu7iSWXlJijAlg9rcxVOYf4" /><meta name="google-site-verification" content="6UEaC3SWhpGQvqRnSJIEm2swxXpM5Adn4dxZhFsNdw0" /><meta content="width=device-width, initial-scale=1.0, maximum-scale=1, minimum-scale=1, user-scalable=no" id="viewport" name="viewport" /><link href="https://fonts.googleapis.com/css?family=Raleway:400,500,600,700" rel="stylesheet" /><link rel="stylesheet" href="/css/rabbit.css" type="text/css" /><link rel="stylesheet" href="/css/highlightjs_style.css" type="text/css" /><link rel="stylesheet" href="/css/rabbit-next.css" type="text/css" /><!--[if IE 6]>
      <link rel="stylesheet" href="/css/rabbit-ie6.css" type="text/css" />
      <![endif]--><link rel="icon" type="/image/vnd.microsoft.icon" href="/favicon.ico" /><link rel="stylesheet" href="/css/tutorial.css" type="text/css" /><script async="true" type="text/javascript" src="/js/site.js"></script><title> MQTT Plugin 
 — RabbitMQ</title></head>
  <body id="mqtt"><div id="outerContainer"><div class="container"><div class="rabbit-logo"><a href="/"><img src="/img/logo-rabbitmq.svg" alt="RabbitMQ" /></a></div><a class="btn menubtn" onclick="showHide()">Menu <img src="/img/carrot-down-white.svg" /></a><div class="mobilemenuicon" onclick="showHide()"><img src="/img/mobile-menu-icon.svg" /></div><div id="nav"><ul id="mainNav"><li><a href="/#features">Features</a></li><li><a href="/#getstarted">Get Started</a></li><li><a href="/#support">Support</a></li><li><a href="/#community">Community</a></li><li><a href="/documentation.html">Docs</a></li></ul></div></div><div class="nav-separator"></div><div id="innerContainer" class="container"><div id="left-content"><h1> MQTT Plugin 
</h1>


<h2><a id="overview" class="anchor" href="#overview">Overview</a></h2>
<p>RabbitMQ supports MQTT versions
<a href="https://public.dhe.ibm.com/software/dw/webservices/ws-mqtt/mqtt-v3r1.html">3.1</a>,
<a href="https://docs.oasis-open.org/mqtt/mqtt/v3.1.1/os/mqtt-v3.1.1-os.html">3.1.1</a>, and
<a href="https://docs.oasis-open.org/mqtt/mqtt/v5.0/os/mqtt-v5.0-os.html">5.0</a>
via a plugin that ships in the core distribution.</p>
<p>This guide covers the following topics:</p>
<ul>
<li><a href="#enabling-plugin">How to enable the plugin</a></li>
<li><a href="#features">Supported MQTT features</a> and <a href="#limitations">limitations</a></li>
<li><a href="#implementation">MQTT plugin implementation overview</a></li>
<li>When (not) to use <a href="#quorum-queues">quorum queues</a></li>
<li><a href="#qos0-queue-type">MQTT QoS 0 queue type</a></li>
<li><a href="#authentication">Users and authentication</a> and <a href="#local-vs-remote">remote connections</a></li>
<li><a href="#config">Key configurable settings</a> of the plugin</li>
<li><a href="#tls">TLS support</a></li>
<li><a href="#virtual-hosts">Virtual hosts</a></li>
<li><a href="#metrics">Metrics</a></li>
<li><a href="#scalability">Performance and scalability check list</a></li>
<li><a href="#proxy-protocol">Proxy protocol</a></li>
<li><a href="#sparkplug-support">Sparkplug support</a></li>
</ul>
<h2><a id="enabling-plugin" class="anchor" href="#enabling-plugin">Enabling the Plugin</a></h2>
<p>The MQTT plugin is included in the RabbitMQ distribution. Before clients can successfully
connect, it must be enabled on all cluster nodes using <a href="rabbitmq-plugins.8.html">rabbitmq-plugins</a>:</p>
<pre class="lang-bash">
rabbitmq-plugins enable rabbitmq_mqtt
</pre>

<h2><a id="features" class="anchor" href="#features"> Supported MQTT features</a></h2>
<p>RabbitMQ supports most MQTT 5.0 features including the following:</p>
<ul>
<li><a href="https://docs.oasis-open.org/mqtt/mqtt/v5.0/os/mqtt-v5.0-os.html#_Toc3901235">QoS 0 (at most once)</a> and <a href="https://docs.oasis-open.org/mqtt/mqtt/v5.0/os/mqtt-v5.0-os.html#_Toc3901236">QoS 1 (at least once)</a> publish &amp; subscribe</li>
<li>TLS, OAuth 2.0</li>
<li><a href="https://docs.oasis-open.org/mqtt/mqtt/v5.0/os/mqtt-v5.0-os.html#_Toc3901039">Clean</a> and non-clean sessions</li>
<li><a href="https://docs.oasis-open.org/mqtt/mqtt/v5.0/os/mqtt-v5.0-os.html#_Toc3901112">Message Expiry Interval</a></li>
<li><a href="https://docs.oasis-open.org/mqtt/mqtt/v5.0/os/mqtt-v5.0-os.html#_Toc3901166">Subscription Identifier</a> and <a href="https://docs.oasis-open.org/mqtt/mqtt/v5.0/os/mqtt-v5.0-os.html#_Toc3901169">Subscription Options</a></li>
<li><a href="https://docs.oasis-open.org/mqtt/mqtt/v5.0/os/mqtt-v5.0-os.html#_Toc3901040">Will messages</a> including <a href="https://docs.oasis-open.org/mqtt/mqtt/v5.0/os/mqtt-v5.0-os.html#_Toc3901062">Will Delay Interval</a></li>
<li><a href="https://docs.oasis-open.org/mqtt/mqtt/v5.0/os/mqtt-v5.0-os.html#_Toc3901253">Request / Response</a> including interoperability with other protocols such as AMQP 0.9.1 and AMQP 1.0</li>
<li><a href="https://docs.oasis-open.org/mqtt/mqtt/v5.0/os/mqtt-v5.0-os.html#_Toc3901113">Topic Alias</a></li>
<li><a href="https://docs.oasis-open.org/mqtt/mqtt/v5.0/os/mqtt-v5.0-os.html#_Toc3901104">Retained</a> messages with the limitations described in section <a href="#retained">Retained Messages and Stores</a></li>
<li><a href="https://docs.oasis-open.org/mqtt/mqtt/v5.0/os/mqtt-v5.0-os.html#_Toc3901285">MQTT over a WebSocket</a> via the <a href="web-mqtt.html">RabbitMQ Web MQTT Plugin</a></li>
</ul>
<p>The <a href="https://blog.rabbitmq.com/posts/2023/07/mqtt5">MQTT 5.0 blog post</a> provides a complete list of supported MQTT 5.0 features including their usage and implementation details.</p>
<p>MQTT clients can interoperate with other protocols.
For example, MQTT publishers can send messages to AMQP 0.9.1 or AMQP 1.0 consumers if these consumers consume from a queue
that is bound to the MQTT <a href="tutorials/amqp-concepts.html#exchange-topic">topic exchange</a> (configured via <span class="code ">mqtt.exchange</span> and defaulting to <span class="code ">amq.topic</span>).
Likewise an AMQP 0.9.1, AMQP 1.0, or STOMP publisher can send messages to an MQTT subscriber if the publisher publishes to the MQTT topic exchange.</p>
<h2><a id="limitations" class="anchor" href="#limitations">Limitations</a></h2>
<p>The following MQTT features are unsupported:</p>
<ul>
<li><a href="https://docs.oasis-open.org/mqtt/mqtt/v5.0/os/mqtt-v5.0-os.html#_Toc3901237">QoS 2 (exactly once)</a></li>
<li><a href="https://docs.oasis-open.org/mqtt/mqtt/v5.0/os/mqtt-v5.0-os.html#_Toc3901250">Shared subscriptions</a></li>
<li>A <a href="https://docs.oasis-open.org/mqtt/mqtt/v5.0/os/mqtt-v5.0-os.html#_Toc3901040">Will Message</a> that is both <a href="https://docs.oasis-open.org/mqtt/mqtt/v5.0/os/mqtt-v5.0-os.html#_Toc3901062">delayed</a> and <a href="https://docs.oasis-open.org/mqtt/mqtt/v5.0/os/mqtt-v5.0-os.html#_Toc3901042">retained</a> is not retained.</li>
</ul>
<p>The following MQTT features are supported with limitations:</p>
<ul>
<li>Retained messages are stored and queried only node local. See <a href="#retained">Retained Messages and Stores</a>.</li>
<li>Overlapping subscriptions with different QoS levels can result in duplicate messages being delivered.
Applications need to account for this.
For example when the same MQTT client creates a QoS 0 subscription for topic filter <span class="code ">/sports/football/epl/#</span> and a QoS 1 subscription for topic filter <span class="code ">/sports/football/#</span>,
it will be delivered duplicate messages.</li>
</ul>
<h2><a id="implementation" class="anchor" href="#implementation">How the MQTT plugin works</a></h2>
<p>RabbitMQ MQTT plugin targets MQTT 3.1, 3.1.1, and 5.0 supporting a broad range
of MQTT clients. It also makes it possible for MQTT clients to interoperate
with <a href="https://www.rabbitmq.com/protocols.html">AMQP 0-9-1, AMQP 1.0, and STOMP</a> clients.
There is also support for multi-tenancy.</p>
<h3>Mapping MQTT to the AMQP 0.9.1 model</h3>
<p>RabbitMQ core implements the AMQP 0.9.1 protocol.
The plugin builds on top of the AMQP 0.9.1 entities: <a href="tutorials/amqp-concepts.html#exchanges">exchanges</a>, <a href="queues.html">queues</a>, and bindings.
Messages published to MQTT topics are routed by an AMQP 0.9.1 topic exchange.
MQTT subscribers consume from queues bound to the topic exchange.</p>
<p>The MQTT plugin creates a dedicated queue per MQTT subscriber. To be more precise, there could be 0, 1, or 2 queues per MQTT session:</p>
<ul>
<li>There are 0 queues for an MQTT session if the MQTT client never sends a <a href="https://docs.oasis-open.org/mqtt/mqtt/v5.0/os/mqtt-v5.0-os.html#_Toc3901161">SUBSCRIBE</a> packet. The MQTT client is only publishing messages.</li>
<li>There is 1 queue for an MQTT session if the MQTT client creates one or multiple subscriptions with the same QoS level.</li>
<li>There are 2 queues for an MQTT session if the MQTT client creates subscriptions with both QoS levels: QoS 0 and QoS 1.</li>
</ul>
<p>When listing queues you will observe the queue naming pattern <span class="code ">mqtt-subscription-&lt;MQTT client ID&gt;qos[0|1]</span> where <span class="code ">&lt;MQTT client ID&gt;</span> is the MQTT <a href="https://docs.oasis-open.org/mqtt/mqtt/v5.0/os/mqtt-v5.0-os.html#_Toc3901059">client identifier</a> and <span class="code ">[0|1]</span> is either <span class="code ">0</span> for a QoS 0 subscription or <span class="code ">1</span> for a QoS 1 subscription.
Having a separate queue per MQTT subscriber allows every MQTT subscriber to receive its own copy of the application message.</p>
<p>The plugin creates queues transparently for MQTT subscribing clients.
The MQTT specification does not define the concept of queues and MQTT clients are not aware that these queues exist.
A queue is an implementation detail of how RabbitMQ implements the MQTT protocol.</p>
<h3>Queue Types</h3>
<p>An MQTT client can publish a message to any queue type.
For that to work, a <a href="classic-queues.html">classic queue</a>, <a href="quorum-queues.html">quorum queue</a>, or <a href="streams.html">stream</a> must be bound to the topic exchange with a binding key matching the topic of the <a href="https://docs.oasis-open.org/mqtt/mqtt/v5.0/os/mqtt-v5.0-os.html#_Toc3901100">PUBLISH</a> packet.</p>
<p>The MQTT plugin creates a classic queue, quorum queue, or <a href="#qos0-queue-type">MQTT QoS 0 queue</a> per MQTT subscriber.
By default, the plugin creates a classic queue.</p>
<p>The plugin can be configured to create quorum queues (instead of classic queues) for subscribers whose MQTT session lasts longer than their MQTT network connection.
This is explained in section <a href="#quorum-queues">Quorum Queues</a>.</p>
<p>If <a href="feature-flags.html">feature flag</a> <span class="code ">rabbit_mqtt_qos0_queue</span> is enabled, the plugin creates an MQTT QoS 0 queue for QoS 0 subscribers whose MQTT session last as long as their MQTT network connection.
This is explained in section <a href="#qos0-queue-type">MQTT QoS 0 queue type</a>.</p>
<h3><a href="queues.html#properties">Queue Properties</a> and <a href="queues.html#optional-arguments">Arguments</a></h3>
<p>Since RabbitMQ 3.12 all queues created by the MQTT plugin</p>
<ul>
<li>are <a href="queues.html#durability">durable</a>, i.e. queue metadata is stored on disk.</li>
<li>are <a href="queues.html#exclusive-queues">exclusive</a> if the MQTT session lasts as long as the MQTT network connection.
In that case, RabbitMQ will delete all state for the MQTT client - including its queue - when the network connection (and session) ends.
Only the subscribing MQTT client can consume from its queue.</li>
<li>are not <span class="code ">auto-delete</span>. For example, if an MQTT client subscribes to a topic and subsequently unsubscribes, the queue will not be deleted.
However, the queue will be deleted when the MQTT session ends.</li>
<li>have a <a href="ttl.html#queue-ttl">Queue TTL</a> set (queue argument <span class="code ">x-expires</span>) if the MQTT session expires eventually (i.e. session expiry is not disabled by the RabbitMQ operator, see below) and outlasts the MQTT network connection.
The Queue TTL (in milliseconds) is determined by the minimum of the <a href="https://docs.oasis-open.org/mqtt/mqtt/v5.0/os/mqtt-v5.0-os.html#_Toc3901048">Session Expiry Interval</a> (in seconds) requested by the MQTT client in the <a href="https://docs.oasis-open.org/mqtt/mqtt/v5.0/os/mqtt-v5.0-os.html#_Toc3901033">CONNECT</a> packet and the server side configured <span class="code ">mqtt.max_session_expiry_interval_seconds</span>.</li>
</ul>
<p>The default value for <span class="code ">mqtt.max_session_expiry_interval_seconds</span> is 86400 (1 day).
A RabbitMQ operator can force all MQTT sessions to end as soon as their network connections end by setting this parameter to <span class="code ">0</span>.</p>
<p>A RabbitMQ operator can allow MQTT sessions to last forever by setting this parameter to <span class="code ">infinity</span>.
This carries a risk: short-lived clients that don't use clean sessions can leave queues and messages behind, which will consume resources and require manual cleanup.</p>
<p>RabbitMQ deletes any state for the MQTT client when the MQTT session ends.
This state includes the client's queue(s) including QoS 0 and QoS 1 messages and the queue bindings (i.e. the client's subscriptions).</p>
<h3>Topic level separator and wildcards</h3>
<p>The MQTT protocol specification defines slash ("/") as <a href="https://docs.oasis-open.org/mqtt/mqtt/v5.0/os/mqtt-v5.0-os.html#_Toc3901243">topic level separator</a> whereas
AMQP 0-9-1 defines a dot (".") as topic level separator. This plugin translates patterns under the hood
to bridge the two.</p>
<p>For example, MQTT topic <span class="code ">cities/london</span> becomes AMQP 0.9.1 topic <span class="code ">cities.london</span> and vice versa.
Therefore, when an MQTT client publishes a message with topic <span class="code ">cities/london</span>, if an AMQP 0.9.1 client wants to receive that message, it should create a binding from its queue
to the topic exchange with binding key <span class="code ">cities.london</span>.</p>
<p>Vice versa, when an AMQP 0.9.1 client publishes a message with topic <span class="code ">cities.london</span>, if an MQTT client wants to receive that message, it should create an MQTT subscription with topic filter <span class="code ">cities/london</span>.</p>
<p>This has one important limitation: MQTT topics that have dots in them won't work as expected and are to be avoided, the same goes for AMQP 0-9-1 routing and binding keys that contains slashes.</p>
<p>Furthermore, MQTT defines the plus sign ("+") as <a href="https://docs.oasis-open.org/mqtt/mqtt/v5.0/os/mqtt-v5.0-os.html#_Toc3901245">single-level wildcard</a> whereas AMQP 0.9.1
defines the asterisk sign ("*") to match a single word:</p>
<table>
<thead>
<tr>
<th>MQTT</th>
<th>AMQP 0.9.1</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>/ (slash)</td>
<td>. (dot)</td>
<td>topic level separator</td>
</tr>
<tr>
<td>+ (plus)</td>
<td>* (asterisk)</td>
<td>single-level wildcard (match a single word)</td>
</tr>
<tr>
<td># (hash)</td>
<td># (hash)</td>
<td>multi-level wildcard (match zero or more words)</td>
</tr>
</tbody>
</table>
<h2><a id="quorum-queues" class="anchor" href="#quorum-queues">Using Quorum Queues</a></h2>
<p>Using the <span class="code ">mqtt.durable_queue_type</span> option, it is possible to opt in to use <a href="quorum-queues.html">quorum queues</a> for subscribers whose MQTT session lasts longer than their MQTT network connection.</p>
<p><strong>This value must only be enabled for new clusters</strong> before any clients declare durable subscriptions.
Since a queue type cannot be changed after declaration, if the value of this setting is changed for an existing cluster, clients with an existing durable state would run into a queue type mismatch error and <strong>fail to subscribe</strong>.</p>
<p>Below is a <a href="configure.html#config-file">rabbitmq.conf</a> example that opts in to use quorum queues:</p>
<pre class="lang-ini">
# must ONLY be enabled for new clusters before any clients declare durable subscriptions
mqtt.durable_queue_type = quorum
</pre>

<p>Currently, this setting applies to <strong>all</strong> MQTT clients that:</p>
<ol>
<li>subscribe with QoS 1, and</li>
<li>connected with a <a href="https://docs.oasis-open.org/mqtt/mqtt/v5.0/os/mqtt-v5.0-os.html#_Toc3901048">Session Expiry Interval</a> greater than 0 (MQTT 5.0) or set CleanSession to 0 (MQTT 3.1.1)</li>
</ol>
<p>The second condition means that the MQTT session outlasts the MQTT network connection.</p>
<p>While quorum queues are designed for data safety and predictable efficient recovery
from replica failures, they also have downsides. A quorum queue by definition requires
at least three replicas in the cluster. Therefore quorum queues take longer to declare
and delete, and are not a good fit for environments with <a href="networking.html#dealing-with-high-connection-">high client connection churn</a> or
environments with many (hundreds of thousands) subscribers.</p>
<p>Quorum queues are a great fit for a few (hundreds) longer lived clients that actually care a great deal about data safety.</p>
<h2><a id="qos0-queue-type" class="anchor" href="#qos0-queue-type">MQTT QoS 0 queue type</a></h2>
<p>The MQTT plugin creates an MQTT QoS 0 queue if the following three conditions are met:</p>
<ol>
<li><a href="feature-flags.html">Feature flag</a> <span class="code ">rabbit_mqtt_qos0_queue</span> is enabled.</li>
<li>The MQTT client subscribes with QoS 0.</li>
<li>The MQTT 5.0 client connects with a <a href="https://docs.oasis-open.org/mqtt/mqtt/v5.0/os/mqtt-v5.0-os.html#_Toc3901048">Session Expiry Interval</a> of 0, or the MQTT 3.1.1 client connects with CleanSession set to 1.</li>
</ol>
<p>The third condition means that the MQTT session lasts only as long as the network connection.</p>
<p>The MQTT QoS 0 queue type can be thought of as a “pseudo” or “virtual” queue:
It is very different from the other queue types (classic queues, quorum queues, and streams) in the sense that this new queue type is neither a separate Erlang process nor does it store messages on disk.
Instead, this queue type is a subset of the Erlang process mailbox.
MQTT messages are directly sent to the MQTT connection process of the subscribing client.
In other words, MQTT messages are sent to any “online” MQTT subscribers.</p>
<p>It is more accurate to think of the queue being "skipped".
The fact that sending messages directly to the MQTT connection process is implemented as a queue type is to simplify routing of messages and protocol interoperability,
such that messages can not only be sent from the MQTT publishing connection process, but also from an AMQP 0.9.1 <a href="channels.html">channel</a> process.
The latter enables sending messages from an AMQP 0.9.1, AMQP 1.0 or STOMP client directly to the MQTT subscriber connection process skipping a dedicated queue process.</p>
<p>The benefits of using the MQTT QoS 0 queues type are:</p>
<ol>
<li>Support for larger fanouts, e.g. sending a message from the "cloud" (RabbitMQ) to all devices (MQTT clients).</li>
<li>Lower memory usage</li>
<li>Lower publisher confirm latency</li>
<li>Lower end-to-end latency</li>
</ol>
<p>Because the MQTT QoS 0 queue type has no flow control, MQTT messages might arrive faster in the MQTT connection process mailbox than being delivered from the MQTT connection process to the MQTT subscribing client.
This can happen when the network connection between MQTT subscribing client and RabbitMQ is poor or in a large fan-in scenario where many publishers overload a single MQTT subscribing client.</p>
<h3>Overload protection</h3>
<p>To protect against high memory usage due to MQTT QoS 0 messages piling up in the MQTT connection process mailbox, RabbitMQ intentionally drops QoS 0 messages from the MQTT QoS 0 queue if both conditions are true:</p>
<ol>
<li>the number of messages in the MQTT connection process mailbox exceeds the configured <span class="code ">mqtt.mailbox_soft_limit</span> (defaults to 200), and</li>
<li>the socket sending to the MQTT client is busy (not sending fast enough due to TCP backpressure).</li>
</ol>
<p>Note that there can be other messages in the process mailbox (e.g. applications messages sent from the MQTT subscribing client to RabbitMQ or confirmations from another queue type to the MQTT connection process) which are obviously not dropped.
However, these other messages also contribute to the <span class="code ">mqtt.mailbox_soft_limit</span>.</p>
<p>Setting <span class="code ">mqtt.mailbox_soft_limit</span> to 0 disables the overload protection mechanism meaning QoS 0 messages are never dropped intentionally by RabbitMQ.
Setting <span class="code ">mqtt.mailbox_soft_limit</span> to a very high value decreases the likelihood of intentionally dropping QoS 0 messages while increasing the risk of causing a cluster wide memory alarm
(especially if the message payloads are large or if there are many overloaded queues of type <span class="code ">rabbit_mqtt_qos0_queue</span>).</p>
<p>The <span class="code ">mqtt.mailbox_soft_limit</span> can be thought of a <a href="maxlength.html">queue length limit</a> (although not precisely because, as mentioned previously, the Erlang process mailbox can contain other messages than MQTT application messages).
This is why the configuration key <span class="code ">mqtt.mailbox_soft_limit</span> contains the word <span class="code ">soft</span>.
The described overload protection mechanism corresponds roughly to <a href="maxlength.html#overflow-behaviour">overflow behaviour</a> <span class="code ">drop-head</span> that exists in classic queues and quorum queues.</p>
<p>The following Prometheus metric reported by a given RabbitMQ node shows how many QoS 0 messages were dropped in total across all queues of type <span class="code ">rabbit_mqtt_qos0_queue</span> during the lifetime of that node:</p>
<pre class="lang-bash">
rabbitmq_global_messages_dead_lettered_maxlen_total{queue_type="rabbit_mqtt_qos0_queue",dead_letter_strategy="disabled"} 0
</pre>

<p>The <a href="https://blog.rabbitmq.com/posts/2023/03/native-mqtt/#new-mqtt-qos-0-queue-type">Native MQTT</a> blog post describes the MQTT QoS 0 queue type in more detail.</p>
<h2><a id="authentication" class="anchor" href="#authentication">Users and Authentication</a></h2>
<p>MQTT clients will be able to connect provided that they have a set of credentials for an existing user with the appropriate permissions.</p>
<p>For an MQTT connection to succeed, it must successfully authenticate and the user must
have the <a href="./access-control.html">appropriate permissions</a> to the virtual host used by the
plugin (see below).</p>
<p>MQTT clients can (and usually do) specify a set of credentials when they connect.</p>
<p>The plugin supports anonymous authentication but its use is highly discouraged and it is a subject
to certain limitations (listed below) enforced for a reasonable level of security
by default.</p>
<p>Users and their permissions can be managed using <a href="./cli.html">rabbitmqctl</a>, <a href="./management.html">management UI</a>
or <a href="management.html#http-api">HTTP API</a>.</p>
<p>For example, the following commands create a new user for MQTT connections with full access
to the default <a href="./vhosts.html">virtual host</a> used by this plugin:</p>
<pre class="lang-bash">
# username and password are both "mqtt-test"
rabbitmqctl add_user mqtt-test mqtt-test
rabbitmqctl set_permissions -p / mqtt-test ".*" ".*" ".*"
rabbitmqctl set_user_tags mqtt-test management
</pre>

<p>Note that colons may not appear in usernames.</p>
<h3><a id="local-vs-remote" class="anchor" href="#local-vs-remote">Local vs. Remote Client Connections</a></h3>
<p>When an MQTT client provides no login credentials, the plugin uses the
<span class="code ">guest</span> account by default which will not allow non-<span class="code ">localhost</span>
connections. When connecting from a remote host, here are the options
that make sure remote clients can successfully connect:</p>
<ul>
<li>Create one or more new user(s), grant them full permissions to the virtual host used by the MQTT plugin and make clients
   that connect from remote hosts use those credentials. This is the recommended option.</li>
<li>Set <span class="code ">default_user</span> and <span class="code ">default_pass</span> via <a href="#config">plugin configuration</a> to a non-<span class="code ">guest</span> user who has the
<a href="./access-control.html">appropriate permissions</a>.</li>
</ul>
<h3><a id="anonymous-connections" class="anchor" href="#anonymous-connections">Anonymous Connections</a></h3>
<p>MQTT supports optional authentication (clients may provide no credentials) but RabbitMQ
does not. Therefore a default set of credentials is used for anonymous connections.</p>
<p>The <span class="code ">mqtt.default_user</span> and <span class="code ">mqtt.default_pass</span> configuration keys are used to specify
the credentials:</p>
<pre class="lang-ini">
mqtt.default_user = some-user
mqtt.default_pass = s3kRe7
</pre>

<p>It is possible to disable anonymous connections:</p>
<pre class="lang-ini">
mqtt.allow_anonymous = false
</pre>

<p>If the <span class="code ">mqtt.allow_anonymous</span> key is set to <span class="code ">false</span> then clients <strong>must</strong> provide credentials.</p>
<p>The use of anonymous connections is highly discouraged and it is a subject
to certain limitations (see above) enforced for a reasonable level of security
by default.</p>
<h2><a id="config" class="anchor" href="#config">Plugin Configuration</a></h2>
<p>Here is a sample <a href="./configure.html#config-file">configuration</a> that demonstrates a number of MQTT plugin settings:</p>
<pre class="lang-ini">
mqtt.listeners.tcp.default = 1883
## Default MQTT with TLS port is 8883
# mqtt.listeners.ssl.default = 8883

# anonymous connections, if allowed, will use the default
# credentials specified here
mqtt.allow_anonymous  = true
mqtt.default_user     = guest
mqtt.default_pass     = guest

mqtt.vhost            = /
mqtt.exchange         = amq.topic
mqtt.prefetch         = 10
# 24 hours by default
mqtt.max_session_expiry_interval_seconds = 86400
</pre>

<h3><a id="tcp-listeners" class="anchor" href="#tcp-listeners">TCP Listeners</a></h3>
<p>When no configuration is specified the MQTT plugin will listen on
all interfaces on port 1883 and have a default user login/passcode
of <span class="code ">guest</span>/<span class="code ">guest</span>.</p>
<p>To change the listener port, edit your
<a href="./configure.html#configuration-files">Configuration file</a>,
to contain a <span class="code ">tcp_listeners</span> variable for the <span class="code ">rabbitmq_mqtt</span> application.</p>
<p>For example, a minimalistic configuration file which changes the listener
port to 12345 would look like:</p>
<pre class="lang-ini">
mqtt.listeners.tcp.1 = 12345
</pre>

<p>while one which changes the listener to listen only on localhost (for
both IPv4 and IPv6) would look like:</p>
<pre class="lang-ini">
mqtt.listeners.tcp.1 = 127.0.0.1:1883
mqtt.listeners.tcp.2 = ::1:1883
</pre>

<h3><a id="listener-opts" class="anchor" href="#listener-opts">TCP Listener Options</a></h3>
<p>The plugin supports TCP listener option configuration.</p>
<p>The settings use a common prefix, <span class="code ">mqtt.tcp_listen_options</span>, and control
things such as TCP buffer sizes, inbound TCP connection queue length, whether <a href="./heartbeats.html#tcp-keepalives">TCP keepalives</a>
are enabled and so on. See the <a href="networking.html">Networking guide</a> for details.</p>
<pre class="lang-ini">
mqtt.listeners.tcp.1 = 127.0.0.1:1883
mqtt.listeners.tcp.2 = ::1:1883

mqtt.tcp_listen_options.backlog = 4096
mqtt.tcp_listen_options.buffer  = 131072
mqtt.tcp_listen_options.recbuf  = 131072
mqtt.tcp_listen_options.sndbuf  = 131072

mqtt.tcp_listen_options.keepalive = true
mqtt.tcp_listen_options.nodelay   = true

mqtt.tcp_listen_options.exit_on_close = true
mqtt.tcp_listen_options.send_timeout  = 120
</pre>

<h3><a id="tls" class="anchor" href="#tls">TLS Support</a></h3>
<p>To use TLS for MQTT connections, <a href="./ssl.html">TLS must be configured</a> in the broker. To enable
TLS-enabled MQTT connections, add a TLS listener for MQTT using the <span class="code ">mqtt.listeners.ssl.*</span> configuration keys.</p>
<p>The plugin will use core RabbitMQ server
certificates and key (just like AMQP 0-9-1 and AMQP 1.0 listeners do):</p>
<pre class="lang-ini">
ssl_options.cacertfile = /path/to/ca_certificate.pem
ssl_options.certfile   = /path/to/server_certificate.pem
ssl_options.keyfile    = /path/to/server_key.pem
ssl_options.verify     = verify_peer
ssl_options.fail_if_no_peer_cert  = true

# default TLS-enabled port for MQTT connections
mqtt.listeners.ssl.default = 8883
mqtt.listeners.tcp.default = 1883
</pre>

<p>Note that RabbitMQ rejects SSLv3 connections by default because that protocol
is known to be compromised.</p>
<p>See the <a href="https://www.rabbitmq.com/ssl.html">TLS configuration guide</a> for details.</p>
<h3><a id="virtual-hosts" class="anchor" href="#virtual-hosts"> Virtual Hosts</a></h3>
<p>RabbitMQ is a multi-tenant system at the core and every connection belongs
to a virtual host. Some messaging protocols have the concept of vhosts,
others don't. MQTT falls into the latter category. Therefore the MQTT plugin
needs to provide a way to map connections to vhosts.</p>
<p>The <span class="code ">vhost</span> option controls which RabbitMQ vhost the adapter connects to
by default. The <span class="code ">vhost</span>
configuration is only consulted if no vhost is provided during connection establishment.
There are several (optional) ways to specify the vhost the client will
connect to.</p>
<h4>Port to Virtual Host Mapping</h4>
<p>First way is mapping MQTT plugin (TCP or TLS) listener ports to vhosts. The mapping
is specified thanks to the <span class="code ">mqtt_port_to_vhost_mapping</span> <a href="./parameters.html">global runtime parameter</a>.
Let's take the following plugin configuration:</p>
<pre class="lang-ini">
mqtt.listeners.tcp.1 = 1883
mqtt.listeners.tcp.2 = 1884

mqtt.listeners.ssl.1 = 8883
mqtt.listeners.ssl.2 = 8884

# (other TLS settings are omitted for brevity)

mqtt.vhost            = /
</pre>

<p>Note the plugin listens on ports 1883, 1884, 8883, and 8884. Imagine you
want clients connecting to ports 1883 and 8883 to connect to the <span class="code ">vhost1</span> virtual
host, and clients connecting to ports 1884 and 8884 to connect to the <span class="code ">vhost2</span>
virtual host. You can specify port-to-vhost mapping by setting the
<span class="code ">mqtt_port_to_vhost_mapping</span> global parameter with <span class="code ">rabbitmqctl</span>:</p>
<pre class="lang-bash">
rabbitmqctl set_global_parameter mqtt_port_to_vhost_mapping \
    '{"1883":"vhost1", "8883":"vhost1", "1884":"vhost2", "8884":"vhost2"}'
</pre>

<p>with <span class="code ">rabbitmqctl.bat</span> on Windows:</p>
<pre class="lang-powershell">
rabbitmqctl.bat set_global_parameter mqtt_port_to_vhost_mapping ^
    "{""1883"":""vhost1"", ""8883"":""vhost1"", ""1884"":""vhost2"", ""8884"":""vhost2""}"
</pre>

<p>and with the HTTP API:</p>
<pre class="lang-bash">
PUT /api/global-parameters/mqtt_port_to_vhost_mapping
# =&gt; {"value": {"1883":"vhost1", "8883":"vhost1", "1884":"vhost2", "8884":"vhost2"}}
</pre>

<p>If there's no mapping for a given port (because the port cannot be found in
the <span class="code ">mqtt_port_to_vhost_mapping</span> global parameter JSON document or if the global parameter
isn't set at all), the plugin will try to extract the virtual host from the username
(see below) and will ultimately use the <span class="code ">vhost</span> plugin config option.</p>
<p>The broker queries the <span class="code ">mqtt_port_to_vhost_mapping</span> global parameter value at connection time.
If the value changes, connected clients are not notified or disconnected. They need
to reconnect to switch to a new virtual host.</p>
<h4>Virtual Host as Part of Username</h4>
<p>Another and more specific way to specify a vhost while connecting is to prepend the vhost
to the username and to separate with a colon.</p>
<p>For example, connecting with</p>
<pre><span class="code ">/:guest
</span></pre>
<p>is equivalent to the default vhost and username.</p>
<pre><span class="code ">mqtt-vhost:mqtt-username
</span></pre>
<p>means connecting to the vhost <span class="code ">mqtt-host</span> with username <span class="code ">mqtt-username</span>.</p>
<p>Specifying the virtual host in the username takes precedence over the port-to-vhost
mapping specified with the <span class="code ">mqtt_port_to_vhost_mapping</span> global parameter.</p>
<h3><a id="tls-certificate-authentication" class="anchor" href="#tls-certificate-authentication">Authentication with TLS/x509 client certificates</a></h3>
<p>The plugin can authenticate TLS-enabled connections by extracting
a name from the client's TLS (x509) certificate, without using a password.</p>
<p>For safety the server must be <a href="#tls">configured with the TLS options</a>
<span class="code ">fail_if_no_peer_cert</span> set to <span class="code ">true</span> and <span class="code ">verify</span> set to <span class="code ">verify_peer</span>, to
force all TLS clients to have a verifiable client certificate.</p>
<p>To switch this feature on, set <span class="code ">ssl_cert_login</span> to <span class="code ">true</span> for the
<span class="code ">rabbitmq_mqtt</span> application. For example:</p>
<pre class="lang-ini">
mqtt.ssl_cert_login = true
</pre>

<p>By default this will set the username to an RFC4514-ish string form of
the certificate's subject's Distinguished Name, similar to that
produced by OpenSSL's "-nameopt RFC2253" option.</p>
<p>To use the Common Name instead, add:</p>
<pre class="lang-ini">
ssl_cert_login_from = common_name
</pre>

<p>to your configuration.</p>
<p>Note that:</p>
<ul>
<li>The authenticated user must exist in the configured authentication / authorisation backend(s).</li>
<li>Clients <strong>must not</strong> supply username and password.</li>
</ul>
<p>You can optionally specify a virtual host for a client certificate by using the <span class="code ">mqtt_default_vhosts</span>
<a href="./parameters.html">global runtime parameter</a>. The value of this global parameter must contain a JSON document that
maps certificates' subject's Distinguished Name to their target virtual host. Let's see how to
map 2 certificates, <span class="code ">O=client,CN=guest</span> and <span class="code ">O=client,CN=rabbit</span>, to the <span class="code ">vhost1</span> and <span class="code ">vhost2</span>
virtual hosts, respectively.</p>
<p>Global parameters can be set up with <span class="code ">rabbitmqctl</span>:</p>
<pre class="lang-bash">
rabbitmqctl set_global_parameter mqtt_default_vhosts \
    '{"O=client,CN=guest": "vhost1", "O=client,CN=rabbit": "vhost2"}'
</pre>

<p>With <span class="code ">rabbitmqctl</span>, on Windows:</p>
<pre class="lang-powershell">
rabbitmqctl set_global_parameter mqtt_default_vhosts ^
    "{""O=client,CN=guest"": ""vhost1"", ""O=client,CN=rabbit"": ""vhost2""}'
</pre>

<p>And with the HTTP API:</p>
<pre class="lang-bash">
PUT /api/global-parameters/mqtt_default_vhosts
# =&gt; {"value": {"O=client,CN=guest": "vhost1", "O=client,CN=rabbit": "vhost2"}}
</pre>

<p>Note that:</p>
<ul>
<li>If the virtual host for a certificate cannot be found (because the certificate
subject's DN cannot be found in the <span class="code ">mqtt_default_vhosts</span> global parameter JSON
document or if the global parameter isn't set at all), the virtual host specified
by the <span class="code ">vhost</span> plugin config option will be used.</li>
<li>The broker queries the <span class="code ">mqtt_default_vhosts</span> global parameter value at connection time.
If the value changes, connected clients are not notified or disconnected. They need
to reconnect to switch to a new virtual host.</li>
<li>The certificate-to-vhost mapping with the <span class="code ">mqtt_default_vhosts</span> global parameter
is considered more specific than the port-to-vhost mapping with the <span class="code ">mqtt_port_to_vhost_mapping</span>
global parameter and so takes precedence over it.</li>
</ul>
<h3><a id="flow" class="anchor" href="#flow"><a href="https://docs.oasis-open.org/mqtt/mqtt/v5.0/os/mqtt-v5.0-os.html#_Toc3901251">Flow Control</a></a></h3>
<p>The <span class="code ">prefetch</span> option controls the maximum number of unacknowledged PUBLISH packets with QoS=1 that will be delivered.
This option is interpreted in the same way as <a href="consumer-prefetch.html">consumer prefetch</a>.</p>
<p>An MQTT 5.0 client can define a lower number by setting <a href="https://docs.oasis-open.org/mqtt/mqtt/v5.0/os/mqtt-v5.0-os.html#_Toc3901049">Receive Maximum</a> in the CONNECT packet.</p>
<h3><a id="custom-exchanges" class="anchor" href="#custom-exchanges">Custom Exchanges</a></h3>
<p>The <span class="code ">exchange</span> option determines which exchange messages from MQTT clients are published to.
The exchange must be created before clients publish any messages. The exchange is expected to be a <a href="tutorials/amqp-concepts.html#exchange-topic">topic exchange</a>.</p>
<p>The default topic exchange <span class="code ">amq.topic</span> is pre-declared: It therefore exists when RabbitMQ is started.</p>
<h2><a id="retained" class="anchor" href="#retained">Retained Messages and Stores</a></h2>
<p>The plugin supports retained messages with the limitations described in this section.
The message store implementation is pluggable and the plugin ships with two implementation out of the box:</p>
<ul>
<li><a href="https://www.erlang.org/doc/man/ets.html">ETS</a>-based (in memory), implemented in module <span class="code ">rabbit_mqtt_retained_msg_store_ets</span></li>
<li><a href="https://www.erlang.org/doc/man/dets.html">DETS</a>-based (on disk), implemented in module <span class="code ">rabbit_mqtt_retained_msg_store_dets</span></li>
</ul>
<p>Both implementations have limitations and trade-offs.
With the first one, the maximum number of messages that can be retained is limited by RAM.
With the second one, there is a limit of 2 GB per vhost. Both are <strong>node-local</strong>:
Retained messages are neither replicated to nor queried from remote cluster nodes.</p>
<p>An example that works is the following: An MQTT Client publishes a retained message to node A with topic <span class="code ">topic/1</span>.
Thereafter another client subscribes with topic filter <span class="code ">topic/1</span> on node A.
The new subscriber will receive the retained message.</p>
<p>However, if a client publishes a retained message on node A and another client subsequently subscribes on node B,
that subscribing client will not receive any retained message stored on node A.</p>
<p>Furthermore, if the topic filter contains wildcards (the <a href="https://docs.oasis-open.org/mqtt/mqtt/v5.0/os/mqtt-v5.0-os.html#_Toc3901244">multi-level wildcard character</a> “#” or the <a href="https://docs.oasis-open.org/mqtt/mqtt/v5.0/os/mqtt-v5.0-os.html#_Toc3901245">single-level wildcard character</a> “+”), no retained messages are sent.</p>
<p>To configure the store, use the <span class="code ">mqtt.retained_message_store</span> configuration key:</p>
<pre class="lang-ini">
## use DETS (disk-based) store for retained messages
mqtt.retained_message_store = rabbit_mqtt_retained_msg_store_dets
## only used by DETS store (in milliseconds)
mqtt.retained_message_store_dets_sync_interval = 2000
</pre>

<p>The value must be a module that implements the store:</p>
<ul>
<li><span class="code ">rabbit_mqtt_retained_msg_store_ets</span> for RAM-based</li>
<li><span class="code ">rabbit_mqtt_retained_msg_store_dets</span> for disk-based (This is the default value.)</li>
</ul>
<p>These implementations are suitable for development but sometimes won't be for production needs.
The MQTT specification does not define consistency or replication requirements for retained
message stores, therefore RabbitMQ allows for custom ones to meet the consistency and
availability needs of a particular environment. For example, stores based on <a href="http://basho.com/riak/">Riak</a>
and <a href="http://cassandra.apache.org/">Cassandra</a> would be suitable for most production environments as
those data stores provide <a href="https://github.com/basho/basho_docs/blob/master/content/riak/kv/2.2.3/using/reference/strong-consistency.md">tunable consistency</a>.</p>
<p>Message stores must implement the <span class="code ">rabbit_mqtt_retained_msg_store</span> behaviour.</p>
<h2><a id="metrics" class="anchor" href="#metrics">Metrics</a></h2>
<h3>Prometheus</h3>
<p>This plugin emits the Prometheus metrics listed in <a href="https://github.com/rabbitmq/rabbitmq-server/blob/main/deps/rabbitmq_prometheus/metrics.md#global-counters">Global Counters</a>.</p>
<p>The values for Prometheus label <span class="code ">protocol</span> are <span class="code ">mqtt310</span>, <span class="code ">mqtt311</span>, and <span class="code ">mqtt50</span> depending on whether the MQTT client uses MQTT 3.1, MQTT 3.1.1, or MQTT 5.0.</p>
<p>The values for Prometheus label <span class="code ">queue_type</span> are <span class="code ">rabbit_classic_queue</span>, <span class="code ">rabbit_quorum_queue</span>, and <span class="code ">rabbit_mqtt_qos0_queue</span> depending on the queue type the MQTT client consumes from.
(Note that MQTT clients never consume from <a href="streams.html">streams</a> directly although they can publish messages to streams.)</p>
<h3>RabbitMQ Management API</h3>
<p>The Management API delivers metrics for MQTT Connections (e.g. network traffic from / to client) and for Classic Queues and Quorum Queues (e.g. how many messages they contain).
However, Management API metrics that are tied to AMQP 0.9.1 <a href="channels.html">channels</a>, e.g message rates, are not available since 3.12.</p>
<h2><a id="scalability" class="anchor" href="#scalability">Performance and Scalability Check List</a></h2>
<p>MQTT is the standard protocol for the Internet of Things (IoT).
A common IoT workload is that many MQTT devices publish sensor data periodically to the MQTT broker.
There could be hundreds of thousands, sometimes even millions of IoT devices that connect to the MQTT broker.
The blog post <a href="https://blog.rabbitmq.com/posts/2023/03/native-mqtt">Native MQTT</a> demonstrates performance benchmarks of such workloads.</p>
<p>This section aims at providing a non-exhaustive checklist with tips and tricks to configure RabbitMQ as an efficient MQTT broker that supports many client connections:</p>
<ol>
<li>Set <span class="code ">management_agent.disable_metrics_collector = true</span> to disable metrics collection in the <a href="management.html">Management plugin</a>.
The RabbitMQ Management plugin has not been designed for excessive metrics collection.
In fact, metrics delivery via the management API is <a href="https://blog.rabbitmq.com/posts/2021/08/4.0-deprecation-announcements/#disable-metrics-delivery-via-the-management-api--ui">deprecated</a>. Instead, use a tool that has been designed for collecting and querying a huge number of metrics: Prometheus.</li>
<li>MQTT packets and subscriptions with QoS 0 provide much better performance than QoS 1.
Unlike AMQP 0.9.1 and AMQP 1.0, MQTT is not designed to maximise throughput: For example, there are no <a href="confirms.html#consumer-acks-multiple-parameter">multi-acks</a>.
Every <a href="https://docs.oasis-open.org/mqtt/mqtt/v5.0/os/mqtt-v5.0-os.html#_Toc3901100">PUBLISH</a> packet with QoS 1 needs to be acknowledged individually.</li>
<li>Decrease TCP buffer sizes as described in section <a href="#listener-opts">TCP Listener Options</a>.
This substantially reduces memory usage in RabbitMQ when many clients connect.</li>
<li>Less topic levels (in an MQTT topic and MQTT topic filter) perform better than more topic levels.
For example, prefer to structure your topic as <span class="code ">city/name</span> instead of <span class="code ">continent/country/city/name</span>, if possible.
Each topic level in a topic filter currently creates its own entry in the database used by RabbitMQ.
Therefore, creating and deleting many subscriptions will be faster when there are fewer topic levels.
Also, routing messages with fewer topic levels is faster.</li>
<li>In workloads with high subscription churn, increase Mnesia configuration parameter <span class="code ">dump_log_write_threshold</span> (e.g. <span class="code ">RABBITMQ_SERVER_ADDITIONAL_ERL_ARGS="-mnesia dump_log_write_threshold 20000"</span>)</li>
<li>When connecting many clients, increase the maximum number of Erlang processes (e.g. <span class="code ">RABBITMQ_SERVER_ADDITIONAL_ERL_ARGS="+P 10000000</span>)
and the maximum number of open ports (e.g. <span class="code ">ERL_MAX_PORTS=10000000</span>).</li>
</ol>
<p>Consult the <a href="networking.html">Networking</a> and <a href="configure.html">Configuration</a> guides for more information.</p>
<h2><a id="proxy-protocol" class="anchor" href="#proxy-protocol">Proxy Protocol</a></h2>
<p>The MQTT plugin supports the <a href="http://www.haproxy.org/download/1.8/doc/proxy-protocol.txt">proxy protocol</a>.
This feature is disabled by default, to enable it for MQTT clients:</p>
<pre class="lang-ini">
mqtt.proxy_protocol = true
</pre>

<p>See the <a href="./networking.html#proxy-protocol">Networking Guide</a> for more information
about the proxy protocol.</p>
<h2><a id="sparkplug-support" class="anchor" href="#sparkplug-support">Sparkplug Support</a></h2>
<p><a href="https://www.cirrus-link.com/mqtt-sparkplug-tahu/">Sparkplug</a> is a specification
that provides guidance for the design of an MQTT system. In Sparkplug,
MQTT topics must start with <span class="code ">spAvM.N</span> or <span class="code ">spBvM.N</span>, where <span class="code ">M</span> and <span class="code ">N</span> are integers.
This unfortunately conflicts with the way the RabbitMQ MQTT plugin <a href="#implementation">translates MQTT
topics into AMQP 0.9.1 routing keys</a>.</p>
<p>To solve this, the <span class="code ">sparkplug</span> configuration entry can be set to <span class="code ">true</span>:</p>
<pre class="lang-ini">
mqtt.sparkplug = true
</pre>

<p>When the Sparkplug support is enabled, the MQTT plugin will not translate the
<span class="code ">spAvM.N</span>/<span class="code ">spBvM.N</span> part of the names of topics.</p><div id="help-and-feedback"><h2>Getting Help and Providing Feedback</h2><p>
                    If you have questions about the contents of this guide or
                    any other topic related to RabbitMQ, don't hesitate to ask them
                    on the <a href="https://groups.google.com/forum/#!forum/rabbitmq-users">RabbitMQ mailing list</a>.
                  </p></div><div id="contribute"><h2>Help Us Improve the Docs &lt;3</h2><p>
                    If you'd like to contribute an improvement to the site,
                    its source is <a href="https://github.com/rabbitmq/rabbitmq-website">available on GitHub</a>.
                    Simply fork the repository and submit a pull request. Thank you!
                  </p></div></div><div id="right-nav"><div id="in-this-section"><h4>In This Section</h4><ul>
     <li><a href="/admin-guide.html">Server Documentation</a></li>
     <li><a href="/clients.html">Client Documentation</a></li>
     <li><a href="/plugins.html" class="selected">Plugins</a><ul>
       <li><a href="/management.html">Management plugin</a></li>
       <li><a href="/federation.html">Federation plugin</a></li>
       <li><a href="/shovel.html">Shovel plugin</a></li>
       <li><a href="/stream.html">Stream plugin</a></li>
       <li><a href="/stomp.html">STOMP plugin</a></li>
       <li><a href="/web-stomp.html">STOMP-over-WebSockets</a></li>
       <li><a href="/mqtt.html" class="selected">MQTT plugin</a></li>
       <li><a href="/web-mqtt.html">MQTT-over-WebSockets</a></li>
       <li><a href="/ldap.html">LDAP plugin</a></li>
       <li><a href="/oauth2.html">OAuth 2.0 plugin</a></li>
       <li><a href="/installing-plugins.html">Installing plugins</a></li>
       <li><a href="/plugin-development.html">Plugin development</a></li>
       
     </ul></li>
     <li><a href="/news.html">News</a></li>
     <li><a href="/protocol.html">Protocol</a></li>
     <li><a href="/extensions.html">Our Extensions</a></li>
     <li><a href="/build.html">Building</a></li>
     
     <li><a href="/mpl.html">License</a></li>
   </ul></div></div></div><div class="clear"></div><div class="pageFooter"><div class="container"></div><div class="container"><div class="rabbit-logo"><a href="/"><img src="/img/logo-rabbitmq-white.svg" alt="RabbitMQ" /></a></div><ul class="footerNav"><li><a href="/#features">Features</a></li><li><a href="/#getstarted">Get Started</a></li><li><a href="/#support">Support</a></li><li><a href="/#community">Community</a></li><li><a href="/documentation.html">Docs</a></li></ul><p id="copyright">
          Copyright © 2007-2023 <a href="https://tanzu.vmware.com/">VMware</a>, Inc. or its affiliates. All rights reserved.
          <a href="https://www.vmware.com/help/legal.html">Terms of Use</a> •
          <a href="https://www.vmware.com/help/privacy.html">Privacy</a> •
          <a href="/trademark-guidelines.html">Trademark Guidelines</a> •
          <a href="https://www.vmware.com/help/privacy/california-privacy-rights.html">Your California Privacy Rights</a> •
          <a class="ot-sdk-show-settings">Cookie Settings</a><br /><a id="teconsent"></a></p></div></div></div><script type="text/javascript" src="/js/highlight.pack.js"></script><script type="text/javascript">
        // code highlighting
        window.addEventListener("load", function() {
          const selectors = "pre.lang-apacheconf, \
                             pre.lang-bash, \
                             pre.lang-csharp, \
                             pre.lang-clojure, \
                             pre.lang-elixir, \
                             pre.lang-erlang, \
                             pre.lang-go, \
                             pre.lang-groovy, \
                             pre.lang-haskell, \
                             pre.lang-ini, \
                             pre.lang-java, \
                             pre.lang-javascript, \
                             pre.lang-json, \
                             pre.lang-makefile, \
                             pre.lang-nginxconf, \
                             pre.lang-objectivec, \
                             pre.lang-php, \
                             pre.lang-plaintext, \
                             pre.lang-powershell, \
                             pre.lang-python, \
                             pre.lang-ruby, \
                             pre.lang-swift, \
                             pre.lang-yaml, \
                             pre.lang-xml";
          document.querySelectorAll(selectors).forEach(function(el) {
            hljs.highlightBlock(el);
          });
        });
      </script></body>
</html>
