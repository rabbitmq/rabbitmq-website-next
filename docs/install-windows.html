<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta content="73d8ba46-8c12-43f6-8c22-24aa21b8d93d" name="onetrust-data-domain" /><meta content="https://tags.tiqcdn.com/utag/vmware/microsites-privacy/prod/utag.js" name="microsites-utag" /><script src="https://d1fto35gcfffzn.cloudfront.net/assets/jquery-1.11.2.min.js"></script><script src="//www.vmware.com/files/templates/inc/utag_data.js"></script><script src="//tags.tiqcdn.com/utag/vmware/microsites-privacy/prod/utag.sync.js"></script><script>function OptanonWrapper() { { window.dataLayer.push({ event: 'OneTrustGroupsUpdated' }); } }</script><script src="/js/gtm.js"></script><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="googlebot" content="NOODP" /><meta name="google-site-verification" content="nSYeDgyKM9mw5CWcZuD0xu7iSWXlJijAlg9rcxVOYf4" /><meta name="google-site-verification" content="6UEaC3SWhpGQvqRnSJIEm2swxXpM5Adn4dxZhFsNdw0" /><meta content="width=device-width, initial-scale=1.0, maximum-scale=1, minimum-scale=1, user-scalable=no" id="viewport" name="viewport" /><link href="https://fonts.googleapis.com/css?family=Raleway:400,500,600,700" rel="stylesheet" /><link rel="stylesheet" href="/css/rabbit.css" type="text/css" /><link rel="stylesheet" href="/css/highlightjs_style.css" type="text/css" /><link rel="stylesheet" href="/css/rabbit-next.css" type="text/css" /><!--[if IE 6]>
      <link rel="stylesheet" href="/css/rabbit-ie6.css" type="text/css" />
      <![endif]--><link rel="icon" type="/image/vnd.microsoft.icon" href="/favicon.ico" /><link rel="stylesheet" href="/css/tutorial.css" type="text/css" /><script async="true" type="text/javascript" src="/js/site.js"></script><title> Installing on Windows
 — RabbitMQ</title></head>
  <body id="install-windows"><div id="outerContainer"><div class="container"><div class="rabbit-logo"><a href="/"><img src="/img/logo-rabbitmq.svg" alt="RabbitMQ" /></a></div><a class="btn menubtn" onclick="showHide()">Menu <img src="/img/carrot-down-white.svg" /></a><div class="mobilemenuicon" onclick="showHide()"><img src="/img/mobile-menu-icon.svg" /></div><div id="nav"><ul id="mainNav"><li><a href="/#features">Features</a></li><li><a href="/#getstarted">Get Started</a></li><li><a href="/#support">Support</a></li><li><a href="/#community">Community</a></li><li><a href="/documentation.html">Docs</a></li></ul></div></div><div class="nav-separator"></div><div id="innerContainer" class="container"><div id="left-content"><h1> Installing on Windows
</h1>


<h2><a id="overview" class="anchor" href="#overview">Overview</a></h2>
<p>This guide covers RabbitMQ installation on Windows. It focuses on the two recommended installation
options:</p>
<ul>
<li><a href="#chocolatey">Using Chocolatey</a></li>
<li><a href="#installer">Using the official installer</a> as an administrative user</li>
</ul>
<p>The guide also covers a few post-installation topics in the context of Windows:</p>
<ul>
<li>The basics of <a href="#configure">node configuration</a></li>
<li><a href="#cli">CLI tool authentication</a></li>
<li><a href="#service">RabbitMQ Windows Service</a></li>
<li><a href="#managing">Managing the node</a></li>
<li><a href="#firewall">Firewall and security tools</a> effects</li>
<li><a href="#server-logs">Log file location</a></li>
<li><a href="#default-user-access">Default user limitations</a></li>
</ul>
<p>and more. These topics are covered in more details in the <a href="/documentation.html">rest of documentation guides</a>.</p>
<p>A separate companion guide covers known <a href="/windows-quirks.html">Windows-specific issues</a>
and ways to mitigate them.</p>
<h2><a id="chocolatey" class="anchor" href="#chocolatey">Using chocolatey</a></h2>
<p>RabbitMQ packages are <a href="https://chocolatey.org/packages/rabbitmq">distributed via Chocolatey</a>.
New releases can take a while (sometimes weeks) to get through approvals,
so this option is not guaranteed to provide the latest release.
It does, however, manage the required dependencies.</p>
<p>To install RabbitMQ using Chocolatey, run the following command from the command line or from PowerShell:</p>
<pre class="lang-powershell">
choco install rabbitmq
</pre>

<p>For many use cases, Chocolatey is the optimal installation method.</p>
<p>The Chocolatey RabbitMQ package is open source and can be <a href="https://github.com/rabbitmq/chocolatey-package">found on GitHub</a>.</p>
<h2><a id="installer" class="anchor" href="#installer">Using the Installer</a></h2>
<p>The official RabbitMQ installer is produced for <a href="/changelog.html">every RabbitMQ release</a>.</p>
<p>Compared to <a href="#chocolatey">installation via Chocolatey</a>, this option gives Windows users
the most flexibility but also requires them to be
aware of certain assumptions and requirements in the installer:</p>
<ul>
<li>There must be only one Erlang version installed at a time</li>
<li>Erlang must be installed <strong>using an administrative account</strong></li>
<li>It is <strong>highly recommended</strong> that RabbitMQ is also installed as an administrative account</li>
<li>Installation path must only contain ASCII characters</li>
<li>It may be necessary to manually copy the <a href="">shared secret</a> file used by CLI tools</li>
<li>CLI tools require Windows console to operate in UTF-8 mode</li>
</ul>
<p>When these conditions are not met, Windows service and CLI tools may require
reinstallation or other manual steps to get them to function as expected.</p>
<p>This is covered in more detail in the <a href="/windows-quirks.html">Windows-specific Issues</a> guide.</p>
<h3>Dependencies</h3>
<p>RabbitMQ requires a 64-bit <a href="/which-erlang.html">supported version of Erlang</a> for Windows to be installed.
Latest binary builds for Windows can be obtained from the <a href="https://erlang.org/download/otp_versions_tree.html">Erlang/OTP Version Tree</a> page.</p>
<p>Note that Erlang must be installed <strong>using an administrative account</strong> or it won't be
discoverable to the RabbitMQ Windows service.</p>
<p>Once a supported version of Erlang is installed, download the RabbitMQ installer, <span class="code ">rabbitmq-server-{version}.exe</span>
and run it. It installs RabbitMQ as a Windows service and starts it using the default configuration.</p>
<h3><a id="downloads" class="anchor" href="#downloads">Direct Downloads</a></h3>
<table>
  <thead>
    <th>Description</th>
    <th>Download</th>
    <th>Signature</th>
  </thead>

  <tr>
    <td>
      Installer for Windows systems (from <a href="https://github.com/rabbitmq/rabbitmq-server/releases">GitHub</a>)
    </td>
    <td>
      <a href="https://github.com/rabbitmq/rabbitmq-server/releases/download/v3.9.4/rabbitmq-server-3.9.4.exe">rabbitmq-server-3.9.4.exe</a>
    </td>
    <td>
      <a href="https://github.com/rabbitmq/rabbitmq-server/releases/download/v3.9.4/rabbitmq-server-3.9.4.exe.asc">Signature</a>
    </td>
  </tr>
</table>

<h2><a id="service" class="anchor" href="#service">Run RabbitMQ Windows Service</a></h2>
<p>Once both Erlang and RabbitMQ have been installed, a RabbitMQ node can be started as a Windows service.
The RabbitMQ service starts automatically. RabbitMQ Windows service
can be managed from the Start menu.</p>
<h2><a id="cli" class="anchor" href="#cli">CLI Tools</a></h2>
<p>RabbitMQ nodes are often managed, inspected and operated using <a href="/cli.html">CLI Tools</a>
in <a href="https://docs.microsoft.com/en-us/windows-server/administration/windows-commands/powershell">PowerShell</a>.</p>
<p>On Windows, CLI tools have a <span class="code ">.bat</span> suffix compared to other platforms. For example,
<span class="code ">rabbitmqctl</span> on Windows is invoked as <span class="code ">rabbitmqctl.bat</span>.</p>
<p>In order for these tools to work they must be able to <a href="/cli.html#erlang-cookie">authenticate with RabbitMQ nodes</a>
using a shared secret file called the Erlang cookie.</p>
<p>The main <a href="/cli.html">CLI tools guide</a> covers most topics related to command line tool usage.</p>
<p>In order to explore what commands various RabbitMQ CLI tools provide, use the <span class="code ">help</span> command:</p>
<pre class="lang-powershell">
# lists commands provided by rabbitmqctl.bat
rabbitmqctl.bat help

# lists commands provided by rabbitmq-diagnostics.bat
rabbitmq-diagnostics.bat help

# ...you guessed it!
rabbitmq-plugins.bat help
</pre>

<p>To learn about a specific command, pass its name as an argument to <span class="code ">help</span>:</p>
<pre class="lang-powershell">
rabbitmqctl.bat help add_user
</pre>

<h2><a id="cli-cookie-file-location" class="anchor" href="#cli-cookie-file-location">Cookie File Location</a></h2>
<p>On Windows, the <a href="/cli.html#cookie-file-locations">cookie file location</a> depends on
whether the <span class="code ">HOMEDRIVE</span> and <span class="code ">HOMEPATH</span> environment variables are set.</p>
<p>If RabbitMQ is installed using a non-administrative account, a <a href="/cli.html#erlang-cookie">shared secret</a> file
used by nodes and CLI tools will not be placed into a correct location,
leading to <a href="/cli.html#cli-authentication-failures">authentication failures</a> when <span class="code ">rabbitmqctl.bat</span>
and other CLI tools are used.</p>
<p>One of these options can be used to mitigate:</p>
<ul>
<li>Re-install RabbitMQ using an administrative user</li>
<li>Copy the file <span class="code ">.erlang.cookie</span> manually from <span class="code ">%SystemRoot%</span> or <span class="code ">%SystemRoot%\system32\config\systemprofile</span>
   to <span class="code ">%HOMEDRIVE%%HOMEPATH%</span>.</li>
</ul>
<h2><a id="configure" class="anchor" href="#configure">Node Configuration</a></h2>
<p>The service starts using its default <a href="configure.html">settings</a>, listening
for connections on <a href="/networking.html#interfaces">default interfaces</a> and <a href="#ports">ports</a>.</p>
<p>Node configuration is primarily done using a <a href="/configure.html#configuration-file">configuration file</a>.
A number of available <a href="/configure.html#customise-windows-environment">environment variables</a> can be used
to control node's <a href="/relocate.html">data location</a>, configuration file path and so on.</p>
<p>This is covered in more detail in the <a href="configure.html">Configuration guide</a></p>
<h3>Environment Variable Changes on Windows</h3>
<p><strong>Important</strong>: after setting environment variables, it is necessary to <a href="/configure.html#rabbitmq-env-file-windows"><strong>re-install</strong> the Windows service</a>. Restarting the service will not be sufficient.</p>
<h2><a id="managing" class="anchor" href="#managing">Managing a RabbitMQ Node</a></h2>
<h3><a id="managing-service" class="anchor" href="#managing-service">Managing the Service</a></h3>
<p>Links to RabbitMQ directories can be found in the Start Menu.</p>
<p>There is also a link to a command prompt window that
will start in the sbin dir, in the Start Menu. This is
the most convenient way to run the <a href="#cli">command line tools</a>.</p>
<p>Note that CLI tools will have to <a href="#cli">authenticate to the target RabbitMQ node</a>.</p>
<h3><a id="stop-service" class="anchor" href="#stop-service">Stopping a Node</a></h3>
<p>To stop the broker or check its status, use
<span class="code ">rabbitmqctl.bat</span> in <span class="code ">sbin</span> (as an administrator).</p>
<pre class="lang-powershell">
rabbitmqctl.bat stop
</pre>

<h3><a id="status" class="anchor" href="#status">Checking Node Status</a></h3>
<p>The following <a href="#cli">CLI command</a> runs a basic <a href="/monitoring.html#health-checks">health check</a>
and displays some information about the node if it is running.</p>
<pre class="lang-powershell">
# A basic health check of both the node and CLI tool connectivity/authentication
rabbitmqctl.bat status
</pre>

<p>For it to work,
two conditions must be true:</p>
<ul>
<li>The node must be running</li>
<li><span class="code ">rabbitmqctl.bat</span> must be able to authenticate with the node</li>
</ul>
<p>See the <a href="#cli">CLI tools section</a> and the <a href="/monitoring.html">Monitoring and Health Checks guide</a>
to learn more.</p>
<h3><a id="server-logs" class="anchor" href="#server-logs">Log Files and Management</a></h3>
<p>Server logs are critically important in troubleshooting and root cause analysis.
See <a href="/logging.html">Logging</a> and <a href="/relocate.html">File and Directory Location</a> guides
to learn about log file location, log rotation and more.</p>
<h2><a id="firewall" class="anchor" href="#firewall">Firewalls and Security Tools</a></h2>
<p>Firewalls and security tools can prevent RabbitMQ Windows service and CLI tools from operating
correctly.</p>
<p>Such tools should be configured to whitelist access to <a href="#ports">ports used by RabbitMQ</a>.</p>
<h2><a id="default-user-access" class="anchor" href="#default-user-access">Default User Access</a></h2>
<p>The broker creates a user <span class="code ">guest</span> with password
<span class="code ">guest</span>. Unconfigured clients will in general use these
credentials. <strong>By default, these credentials can only be
used when connecting to the broker as localhost</strong> so you
will need to take action before connecting from any other
machine.</p>
<p>See the documentation on <a href="access-control.html">access control</a> for information on how to create more users and delete
the <span class="code ">guest</span> user.</p>
<h2><a id="ports" class="anchor" href="#ports">Port Access</a></h2>
<p>RabbitMQ nodes bind to ports (open server TCP sockets) in order to accept client and CLI tool connections.
Other processes and tools such as anti-virus software may prevent RabbitMQ from binding to a port. When that happens,
the node will fail to start.</p>
<p>CLI tools, client libraries and RabbitMQ nodes also open connections (client TCP sockets).
Firewalls can prevent nodes and CLI tools from communicating with each other.
Make sure the following ports are accessible:</p>
<ul>
<li>4369: <a href="http://erlang.org/doc/man/epmd.html">epmd</a>, a peer discovery service used by RabbitMQ nodes and CLI tools</li>
<li>5672, 5671: used by AMQP 0-9-1 and 1.0 clients without and with TLS</li>
<li>25672: used for inter-node and CLI tools communication (Erlang distribution server port)
   and is allocated from a dynamic range (limited to a single port by default,
   computed as AMQP port + 20000). Unless external connections on these ports are really necessary (e.g.
   the cluster uses <a href="federation.html">federation</a> or CLI tools are used on machines outside the subnet),
   these ports should not be publicly exposed. See <a href="networking.html">networking guide</a> for details.</li>
<li>35672-35682: used by CLI tools (Erlang distribution client ports) for communication with nodes
   and is allocated from a dynamic range (computed as server distribution port + 10000 through
   server distribution port + 10010). See <a href="networking.html">networking guide</a> for details.</li>
<li>15672: <a href="/management.html">HTTP API</a> clients, <a href="/management.html">management UI</a> and <a href="/management-cli.html">rabbitmqadmin</a>
   (only if the <a href="/management.html">management plugin</a> is enabled)</li>
<li>61613, 61614: <a href="https://stomp.github.io/stomp-specification-1.2.html">STOMP clients</a> without and with TLS (only if the <a href="/stomp.html">STOMP plugin</a> is enabled)</li>
<li>1883, 8883: <a href="http://mqtt.org/">MQTT clients</a> without and with TLS, if the <a href="/mqtt.html">MQTT plugin</a> is enabled</li>
<li>15674: STOMP-over-WebSockets clients (only if the <a href="/web-stomp.html">Web STOMP plugin</a> is enabled)</li>
<li>15675: MQTT-over-WebSockets clients (only if the <a href="/web-mqtt.html">Web MQTT plugin</a> is enabled)</li>
</ul>
<p>It is possible to <a href="configure.html">configure RabbitMQ</a>
to use <a href="networking.html">different ports and specific network interfaces</a>.</p>
<h2><a id="upgrading-erlang" class="anchor" href="#upgrading-erlang">Upgrading Erlang VM</a></h2>
<p>If you have an existing installation and are planning to upgrade
the Erlang VM from a 32-bit to a 64-bit version then you must uninstall
the broker before upgrading the VM. The installer will not be able to stop
or remove a service that was installed with an Erlang VM of a different
architecture.</p>
<h2><a id="dump-file" class="anchor" href="#dump-file">Dump File Location When Running as a Service</a></h2>
<p>In the event that the Erlang VM terminates when RabbitMQ is running
as a service, rather than writing the crash dump to the current
directory (which doesn't make sense for a service) it is written
to an <span class="code ">erl_crash.dump</span> file in the <a href="/relocate.html">base directory</a> of
the RabbitMQ server, defaulting to <span class="code ">%APPDATA%\%RABBITMQ_SERVICENAME%</span> - typically <span class="code ">%APPDATA%\RabbitMQ</span> otherwise.</p><div id="help-and-feedback"><h2>Getting Help and Providing Feedback</h2><p>
                    If you have questions about the contents of this guide or
                    any other topic related to RabbitMQ, don't hesitate to ask them
                    on the <a href="https://groups.google.com/forum/#!forum/rabbitmq-users">RabbitMQ mailing list</a>.
                  </p></div><div id="contribute"><h2>Help Us Improve the Docs &lt;3</h2><p>
                    If you'd like to contribute an improvement to the site,
                    its source is <a href="https://github.com/rabbitmq/rabbitmq-website">available on GitHub</a>.
                    Simply fork the repository and submit a pull request. Thank you!
                  </p></div></div><div id="right-nav"><div id="related-links"><h4>Related Links</h4><ul><li><a href="/windows-quirks.html">Windows Quirks</a></li></ul></div></div></div><div class="clear"></div><div class="pageFooter"><div class="container"></div><div class="container"><div class="rabbit-logo"><a href="/"><img src="/img/logo-rabbitmq-white.svg" alt="RabbitMQ" /></a></div><ul class="footerNav"><li><a href="/#features">Features</a></li><li><a href="/#getstarted">Get Started</a></li><li><a href="/#support">Support</a></li><li><a href="/#community">Community</a></li><li><a href="/documentation.html">Docs</a></li></ul><p id="copyright">
          Copyright © 2007-2021 <a href="https://tanzu.vmware.com/">VMware</a>, Inc. or its affiliates. All rights reserved.
          <a href="https://www.vmware.com/help/legal.html">Terms of Use</a> •
          <a href="https://www.vmware.com/help/privacy.html">Privacy</a> •
          <a href="/trademark-guidelines.html">Trademark Guidelines</a> •
          <a href="https://www.vmware.com/help/privacy/california-privacy-rights.html">Your California Privacy Rights</a> •
          <a class="ot-sdk-show-settings">Cookie Settings</a><br /><a id="teconsent"></a></p></div></div></div><script type="text/javascript" src="/js/highlight.pack.js"></script><script type="text/javascript">
        // code highlighting
        window.addEventListener("load", function() {
          const selectors = "pre.lang-bash, \
                             pre.lang-csharp, \
                             pre.lang-elixir, \
                             pre.lang-erlang, \
                             pre.lang-go, \
                             pre.lang-groovy, \
                             pre.lang-haskell, \
                             pre.lang-html, \
                             pre.lang-ini, \
                             pre.lang-java, \
                             pre.lang-javascript, \
                             pre.lang-json, \
                             pre.lang-makefile, \
                             pre.lang-objectivec, \
                             pre.lang-php, \
                             pre.lang-plaintext, \
                             pre.lang-powershell, \
                             pre.lang-python, \
                             pre.lang-ruby, \
                             pre.lang-swift, \
                             pre.lang-yaml, \
                             pre.lang-xml";
          document.querySelectorAll(selectors).forEach(function(el) {
            hljs.highlightBlock(el);
          });
        });
      </script></body>
</html>
