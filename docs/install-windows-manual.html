<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta content="73d8ba46-8c12-43f6-8c22-24aa21b8d93d" name="onetrust-data-domain" /><meta content="https://tags.tiqcdn.com/utag/vmware/microsites-privacy/prod/utag.js" name="microsites-utag" /><script src="https://d1fto35gcfffzn.cloudfront.net/assets/jquery-1.11.2.min.js"></script><script src="//www.vmware.com/files/templates/inc/utag_data.js"></script><script src="//tags.tiqcdn.com/utag/vmware/microsites-privacy/prod/utag.sync.js"></script><script>function OptanonWrapper() { { window.dataLayer.push({ event: 'OneTrustGroupsUpdated' }); } }</script><script src="/js/gtm.js"></script><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="googlebot" content="NOODP" /><meta name="google-site-verification" content="nSYeDgyKM9mw5CWcZuD0xu7iSWXlJijAlg9rcxVOYf4" /><meta name="google-site-verification" content="6UEaC3SWhpGQvqRnSJIEm2swxXpM5Adn4dxZhFsNdw0" /><meta content="width=device-width, initial-scale=1.0, maximum-scale=1, minimum-scale=1, user-scalable=no" id="viewport" name="viewport" /><link href="https://fonts.googleapis.com/css?family=Raleway:400,500,600,700" rel="stylesheet" /><link rel="stylesheet" href="/css/rabbit.css" type="text/css" /><link rel="stylesheet" href="/css/highlightjs_style.css" type="text/css" /><link rel="stylesheet" href="/css/rabbit-next.css" type="text/css" /><!--[if IE 6]>
      <link rel="stylesheet" href="/css/rabbit-ie6.css" type="text/css" />
      <![endif]--><link rel="icon" type="/image/vnd.microsoft.icon" href="/favicon.ico" /><link rel="stylesheet" href="/css/tutorial.css" type="text/css" /><script async="true" type="text/javascript" src="/js/site.js"></script><title> Installing on Windows Manually
 — RabbitMQ</title></head>
  <body id="install-windows-manual"><div id="outerContainer"><div class="container"><div class="rabbit-logo"><a href="/"><img src="/img/logo-rabbitmq.svg" alt="RabbitMQ" /></a></div><a class="btn menubtn" onclick="showHide()">Menu <img src="/img/carrot-down-white.svg" /></a><div class="mobilemenuicon" onclick="showHide()"><img src="/img/mobile-menu-icon.svg" /></div><div id="nav"><ul id="mainNav"><li><a href="/#features">Features</a></li><li><a href="/#getstarted">Get Started</a></li><li><a href="/#support">Support</a></li><li><a href="/#community">Community</a></li><li><a href="/documentation.html">Docs</a></li></ul></div></div><div class="nav-separator"></div><div id="innerContainer" class="container"><div id="left-content"><h1> Installing on Windows Manually
</h1>


<h2><a id="overview" class="anchor" href="#overview">Overview</a></h2>
<p>This guide describes how RabbitMQ can be installed and configured manually on Windows. In general
we recommend using one the <a href="./install-windows.html">more automation-friendly options for Windows</a> when possible.</p>
<h2><a id="install-erlang" class="anchor" href="#install-erlang">Install Erlang/OTP</a></h2>
<p>RabbitMQ requires a 64-bit <a href="./which-erlang.html">supported version of Erlang</a> for Windows to be installed.
Latest binary builds for Windows can be obtained from the <a href="https://erlang.org/download/otp_versions_tree.html">Erlang/OTP Version Tree</a> page.</p>
<p>Erlang will appear in the Start Menu,
and <span class="code ">\erl{version}\bin\erl.exe</span> will be in <span class="code ">C:\Program Files</span> for 64-bit Erlang installations</p>
<p><strong>Important:</strong> your system should only have one version of Erlang installed.
Please consult the <a href="windows-quirks.html">Windows-specific Issues</a> page.</p>
<h3><a id="set-erlang-home-variable" class="anchor" href="#set-erlang-home-variable">Make Sure ERLANG_HOME is Set</a></h3>
<p>In case there's an existing RabbitMQ installation with the broker running as a service and
you installed an Erlang VM with a different architecture then the service must be uninstalled
before updating <span class="code ">ERLANG_HOME</span>.</p>
<p>Set <span class="code ">ERLANG_HOME</span> to where you actually put your Erlang installation, e.g.
<span class="code ">C:\Program Files\erl{version}</span> (full path).
The RabbitMQ batch files expect to execute <span class="code ">%ERLANG_HOME%\bin\erl.exe</span>.</p>
<p>Go to <span class="code ">Start</span> &gt; <span class="code ">Settings</span> &gt; <span class="code ">Control Panel</span> &gt; <span class="code ">System</span> &gt; <span class="code ">Advanced</span> &gt; <span class="code ">Environment Variables</span>.
Create the system environment variable <span class="code ">ERLANG_HOME</span>
and set it to the full path of the directory which contains <span class="code ">bin\erl.exe</span>.</p>
<h2><a id="install-rabbitmq" class="anchor" href="#install-rabbitmq">Install RabbitMQ Server</a></h2>
<p>After making sure a supported Erlang version is installed, download <span class="code ">rabbitmq-server-windows-3.10.5.zip</span>.</p>
<h3><a id="downloads" class="anchor" href="#downloads">Direct Downloads</a></h3>
<table>
  <thead>
    <th>Description</th>
    <th>Download</th>
    <th>Signature</th>
  </thead>

  <tr>
    <td>
      Installer for Windows systems (from <a href="https://github.com/rabbitmq/rabbitmq-server/releases">GitHub</a>)
    </td>
    <td>
      <a href="https://github.com/rabbitmq/rabbitmq-server/releases/download/v3.10.5/rabbitmq-server-windows-3.10.5.zip">rabbitmq-server-windows-3.10.5.zip</a>
    </td>
    <td>
      <a href="https://github.com/rabbitmq/rabbitmq-server/releases/download/v3.10.5/rabbitmq-server-windows-3.10.5.zip.asc">Signature</a>
    </td>
  </tr>
</table>

<p>From the zip file, extract the folder named
<span class="code ">rabbitmq_server-3.10.5</span>
into <span class="code ">C:\Program Files\RabbitMQ</span>
(or somewhere suitable for application files).</p>
<h2><a id="erlang-cookie" class="anchor" href="#erlang-cookie">Synchronise the Erlang Cookie</a></h2>
<p>The Erlang cookie is a shared secret used for authentication between <a href="./clustering.html">RabbitMQ nodes</a> and <a href="./cli.html">CLI tools</a>.
The value is stored in a file commonly referred to as the Erlang cookie file.</p>
<p>The cookie file used by the service account and the user
running <span class="code ">rabbitmqctl.bat</span> must be synchronised for
CLI tools such as <span class="code ">rabbitmqctl.bat</span> to function. All nodes in a cluster must have the same
cookie value (cookie file contents).</p>
<p>Please see <a href="./cli.html#erlang-cookie">How CLI Tools Authenticate to Nodes (and Nodes to Each Other): the Erlang Cookie</a> for details.</p>
<h2><a id="locating-binaries-and-data" class="anchor" href="#locating-binaries-and-data">Locating CLI Tools and App Data</a></h2>
<h3><a id="locating-binaries" class="anchor" href="#locating-binaries">CLI tools</a></h3>
<p>Within the <span class="code ">rabbitmq_server-3.10.5\sbin</span>
directory are some scripts which run commands to control the RabbitMQ server.</p>
<p>The RabbitMQ server can be run as either an application or service (not both).</p>
<ul>
<li><a href="man/rabbitmq-server.8.html">rabbitmq-server.bat</a> starts the broker as an application</li>
<li><a href="man/rabbitmq-service.8.html">rabbitmq-service.bat</a> manages the service and starts the broker</li>
<li><a href="man/rabbitmqctl.8.html">rabbitmqctl.bat</a> manages a running broker</li>
</ul>
<p>Log in as an administrator. To see the output, run these from a
<a href="http://windows.microsoft.com/en-GB/windows7/Command-Prompt-frequently-asked-questions">Command Prompt</a>
in the <span class="code ">sbin</span> directory.</p>
<p><em>Note: </em>On Windows Vista (and later) it is necessary to
<a href="http://windows.microsoft.com/en-GB/windows7/Command-Prompt-frequently-asked-questions">elevate privilege</a>
(e.g. right-click on the icon to select Run as Administrator).</p>
<p>Set up the system path so RabbitMQ server and CLI tools from the <span class="code ">sbin</span> directory
can be executed without using fully qualified paths.</p>
<ul>
<li>Create a system environment variable (e.g. <span class="code ">RABBITMQ_SERVER</span>) for
   <span class="code ">"C:\Program Files\RabbitMQ\rabbitmq_server-3.10.5"</span>.
   Adjust this if you put <span class="code ">rabbitmq_server-3.10.5</span> elsewhere,
   or if you upgrade versions.</li>
<li>Append the literal string "<span class="code ">;%RABBITMQ_SERVER%\sbin</span>" to your system path (aka <span class="code ">%PATH%</span>).</li>
</ul>
<p>Now it should be possible to run rabbitmq commands from any (administrator) Command Prompt.</p>
<p>Navigate to <span class="code ">rabbitmq_server-3.10.5\sbin</span>
to run commands if the system path does not contain the RabbitMQ <span class="code ">sbin</span>
directory.</p>
<h3><a id="locating-data-directory" class="anchor" href="#locating-data-directory">Node Data Directory</a></h3>
<p>By default, the RabbitMQ logs and node's data directory
are stored in the current user's Application Data directory
e.g. <span class="code ">C:\Documents and Settings\<span class="envvar">%USERNAME%</span>\Application Data</span> or
<span class="code ">C:\Users\<span class="envvar">%USERNAME%</span>\AppData\Roaming</span>.</p>
<p>Execute <span class="code ">echo %APPDATA%</span> at a Command Prompt
to find this directory. Alternatively, Start &gt; Run <span class="code ">%APPDATA%</span> will open this folder.</p>
<p>A node can be <a href="configure.html">configured</a> to use a <a href="./relocate.html">different data directory</a>
using one of these environment variables: <span class="code ">RABBITMQ_BASE</span>, <span class="code ">RABBITMQ_MNESIA_BASE</span> or
<span class="code ">RABBITMQ_MNESIA_DIR</span>. Please read <a href="./relocate.html">the relocation guide</a> for a description
of how each of these variables works.</p>
<h2><a id="running-windows" class="anchor" href="#running-windows">Running RabbitMQ Server as an Application</a></h2>
<p>The application is started by the <span class="code ">rabbitmq-server.bat</span>
script in <span class="code ">sbin</span>.</p>
<h3>Customise RabbitMQ Environment Variables</h3>
<p>The service will run fine using its default settings. It is possible to <a href="./configure.html#customise-windows-environment">customise the RabbitMQ environment</a>
or edit <a href="./configure.html#configuration-files">configuration</a>.</p>
<p><strong>Important</strong>: after setting environment variables, it is necessary to restart the node.</p>
<h3><a id="start-as-application" class="anchor" href="#start-as-application">Start the Broker as an Application</a></h3>
<p>Run the command</p>
<pre class="lang-powershell">rabbitmq-server.bat -detached</pre>

<p>This will start a node in the background (not attached to the Command Prompt).</p>
<p>Alternatively, <span class="code ">rabbitmq-server.bat</span> can be executed in Windows Explorer
to start a node in foreground.</p>
<p>When a node is started, a Command Prompt window opens,
displays a short startup banner, indicating that the RabbitMQ
broker has been started successfully.</p>
<p>If the node was started without the <span class="code ">-detached</span> option,
e.g. using Windows Explorer, a second Command Prompt
window will be necessary to control the application using CLI tools.</p>
<p><strong>Important</strong>: closing the original Command Prompt window
will forcefully shut down a server started this way.</p>
<h2><a id="running-windows-service" class="anchor" href="#running-windows-service">Running RabbitMQ Server as a Service</a></h2>
<p>The service will run in the security context of the system account
without the need for a user to be logged in on a console.
This is normally more appropriate for production use.
The server should not be run as a
service and application simultaneously.</p>
<p>The service runs using the <span class="code ">rabbitmq-service.bat</span> script in <span class="code ">sbin</span>.</p>
<h3>Customise RabbitMQ Environment Variables</h3>
<p>The service will run fine using its default settings. It is possible to <a href="./configure.html#customise-windows-environment">customise the RabbitMQ environment</a>
or edit <a href="./configure.html#configuration-files">configuration</a>.</p>
<p><strong>Important</strong>: after setting environment variables, it is necessary to reinstall the service.</p>
<h3><a id="install-service" class="anchor" href="#install-service">Install the Service</a></h3>
<p>Install the service by running</p>
<pre class="lang-powershell">rabbitmq-service.bat install</pre>

<p>A service with the name defined by <b>RABBITMQ_SERVICENAME</b>
should now appear in the Windows Services control panel
(Start &gt; Run <span class="code ">services.msc</span>).</p>
<h3><a id="manage-service" class="anchor" href="#manage-service">Managing the Service</a></h3>
<p>To manage the service (install, remove, start, stop,
enable, disable), use
<a href="man/rabbitmq-service.8.html"><span class="code ">rabbitmq-service.bat</span></a>
commands.  Alternatively, the Windows Services panel
(<span class="code ">services.msc</span>) can be used to perform some of the
same functions as the service script.</p>
<h3><a id="start-service" class="anchor" href="#start-service">Start the Broker as a Service</a></h3>
<p>To start the broker, execute</p>
<pre class="lang-powershell">rabbitmq-service.bat start</pre>

<p>If the output from this command is
"<span class="code ">Service <em>RABBITMQ_SERVICENAME</em> started</span>", then the service was started
successfully.</p>
<p>Confirm the service named <em>RABBITMQ_SERVICENAME</em>
reports a "Started" status in Services: <br />
Start &gt; Run <span class="code ">services.msc</span>.</p>
<h3><a id="upgrading-erlang" class="anchor" href="#upgrading-erlang">Upgrading Erlang VM</a></h3>
<p>If you have an existing installation and are planning to upgrade
the Erlang VM from a 32bit to a 64bit version then you must uninstall
the broker before upgrading the VM. The installer will not be able to stop
or remove a service that was installed with an Erlang VM of a different
architecture.</p>
<h2><a id="managing" class="anchor" href="#managing">Managing a RabbitMQ Node</a></h2>
<h3><a id="managing-service" class="anchor" href="#managing-service">Managing the Service</a></h3>
<p>Links to RabbitMQ directories can be found in the Start Menu.</p>
<p>There is also a link to a command prompt window that
will start in the sbin dir, in the Start Menu. This is
the most convenient way to run the <a href="./cli.html">command line tools</a>.
Note that CLI tools will have to <a href="./cli.html#erlang-cookie">authenticate to the RabbitMQ node</a> running locally. That involves a shared secret file
which has to be placed into the correct location for the user.</p>
<h3>Stopping a Node</h3>
<p>To stop the broker or check its status, use
<span class="code ">rabbitmqctl.bat</span> in <span class="code ">sbin</span> (as an administrator).</p>
<pre class="lang-powershell">
rabbitmqctl.bat stop
</pre>

<h2>Checking Node Status</h2>
<p>The following command performs the most basic node health check and displays some information about
the node if it is running:</p>
<pre class="lang-powershell">
rabbitmqctl.bat status
</pre>

<p>See <a href="./cli.html">RabbitMQ CLI tools guide</a> and the <a href="./monitoring.html">Monitoring and Health Checks guide</a> for details.</p>
<h3><a id="server-logs" class="anchor" href="#server-logs">Log Files and Management</a></h3>
<p>Server logs are critically important in troubleshooting and root cause analysis.
See <a href="./logging.html">Logging</a> and <a href="./relocate.html">File and Directory Location</a> guides
to learn about log file location, log rotation and more.</p>
<h3>Troubleshooting When Running as a Service</h3>
<p>In the event that the Erlang VM crashes whilst RabbitMQ is running
as a service, rather than writing the crash dump to the current
directory (which doesn't make sense for a service) it is written
to an <span class="code ">erl_crash.dump</span> file in the base directory of
the RabbitMQ server (set by the <b>RABBITMQ_BASE</b> environment
variable, defaulting
to <span class="code ">%APPDATA%\%RABBITMQ_SERVICENAME%</span> -
typically <span class="code ">%APPDATA%\RabbitMQ</span> otherwise).</p>
<h2><a id="default-user-access" class="anchor" href="#default-user-access">Default User Access</a></h2>
<p>The broker creates a user <span class="code ">guest</span> with password
<span class="code ">guest</span>. Unconfigured clients will in general use these
credentials. <strong>By default, these credentials can only be
used when connecting to the broker as localhost</strong> so you
will need to take action before connecting from any other
machine.</p>
<p>See the documentation on <a href="access-control.html">access control</a> for information on how to create more users and delete
the <span class="code ">guest</span> user.</p>
<h2><a id="ports" class="anchor" href="#ports">Port Access</a></h2>
<p>RabbitMQ nodes bind to ports (open server TCP sockets) in order to accept client and CLI tool connections.
Other processes and tools such as anti-virus software may prevent RabbitMQ from binding to a port. When that happens,
the node will fail to start.</p>
<p>CLI tools, client libraries and RabbitMQ nodes also open connections (client TCP sockets).
Firewalls can prevent nodes and CLI tools from communicating with each other.
Make sure the following ports are accessible:</p>
<ul>
<li>4369: <a href="http://erlang.org/doc/man/epmd.html">epmd</a>, a peer discovery service used by RabbitMQ nodes and CLI tools</li>
<li>5672, 5671: used by AMQP 0-9-1 and 1.0 clients without and with TLS</li>
<li>25672: used for inter-node and CLI tools communication (Erlang distribution server port)
   and is allocated from a dynamic range (limited to a single port by default,
   computed as AMQP port + 20000). Unless external connections on these ports are really necessary (e.g.
   the cluster uses <a href="federation.html">federation</a> or CLI tools are used on machines outside the subnet),
   these ports should not be publicly exposed. See <a href="networking.html">networking guide</a> for details.</li>
<li>35672-35682: used by CLI tools (Erlang distribution client ports) for communication with nodes
   and is allocated from a dynamic range (computed as server distribution port + 10000 through
   server distribution port + 10010). See <a href="networking.html">networking guide</a> for details.</li>
<li>15672: <a href="./management.html">HTTP API</a> clients, <a href="./management.html">management UI</a> and <a href="./management-cli.html">rabbitmqadmin</a>
   (only if the <a href="./management.html">management plugin</a> is enabled)</li>
<li>61613, 61614: <a href="https://stomp.github.io/stomp-specification-1.2.html">STOMP clients</a> without and with TLS (only if the <a href="./stomp.html">STOMP plugin</a> is enabled)</li>
<li>1883, 8883: <a href="http://mqtt.org/">MQTT clients</a> without and with TLS, if the <a href="./mqtt.html">MQTT plugin</a> is enabled</li>
<li>15674: STOMP-over-WebSockets clients (only if the <a href="./web-stomp.html">Web STOMP plugin</a> is enabled)</li>
<li>15675: MQTT-over-WebSockets clients (only if the <a href="./web-mqtt.html">Web MQTT plugin</a> is enabled)</li>
</ul>
<p>It is possible to <a href="configure.html">configure RabbitMQ</a>
to use <a href="networking.html">different ports and specific network interfaces</a>.</p>
<h2><a id="windows-quirks" class="anchor" href="#windows-quirks">Windows-specific Issues</a></h2>
<p>We aim to make RabbitMQ a first-class citizen on Windows. However, sometimes there are circumstances beyond our
control. Please consult the <a href="windows-quirks.html">Windows-specific Issues</a> page.</p><div id="help-and-feedback"><h2>Getting Help and Providing Feedback</h2><p>
                    If you have questions about the contents of this guide or
                    any other topic related to RabbitMQ, don't hesitate to ask them
                    on the <a href="https://groups.google.com/forum/#!forum/rabbitmq-users">RabbitMQ mailing list</a>.
                  </p></div><div id="contribute"><h2>Help Us Improve the Docs &lt;3</h2><p>
                    If you'd like to contribute an improvement to the site,
                    its source is <a href="https://github.com/rabbitmq/rabbitmq-website">available on GitHub</a>.
                    Simply fork the repository and submit a pull request. Thank you!
                  </p></div></div><div id="right-nav"><div id="related-links"><h4>Related Links</h4><ul><li><a href="/windows-quirks.html">Windows Quirks</a></li></ul></div></div></div><div class="clear"></div><div class="pageFooter"><div class="container"></div><div class="container"><div class="rabbit-logo"><a href="/"><img src="/img/logo-rabbitmq-white.svg" alt="RabbitMQ" /></a></div><ul class="footerNav"><li><a href="/#features">Features</a></li><li><a href="/#getstarted">Get Started</a></li><li><a href="/#support">Support</a></li><li><a href="/#community">Community</a></li><li><a href="/documentation.html">Docs</a></li></ul><p id="copyright">
          Copyright © 2007-2022 <a href="https://tanzu.vmware.com/">VMware</a>, Inc. or its affiliates. All rights reserved.
          <a href="https://www.vmware.com/help/legal.html">Terms of Use</a> •
          <a href="https://www.vmware.com/help/privacy.html">Privacy</a> •
          <a href="/trademark-guidelines.html">Trademark Guidelines</a> •
          <a href="https://www.vmware.com/help/privacy/california-privacy-rights.html">Your California Privacy Rights</a> •
          <a class="ot-sdk-show-settings">Cookie Settings</a><br /><a id="teconsent"></a></p></div></div></div><script type="text/javascript" src="/js/highlight.pack.js"></script><script type="text/javascript">
        // code highlighting
        window.addEventListener("load", function() {
          const selectors = "pre.lang-bash, \
                             pre.lang-csharp, \
                             pre.lang-elixir, \
                             pre.lang-erlang, \
                             pre.lang-go, \
                             pre.lang-groovy, \
                             pre.lang-haskell, \
                             pre.lang-html, \
                             pre.lang-ini, \
                             pre.lang-java, \
                             pre.lang-javascript, \
                             pre.lang-json, \
                             pre.lang-makefile, \
                             pre.lang-objectivec, \
                             pre.lang-php, \
                             pre.lang-plaintext, \
                             pre.lang-powershell, \
                             pre.lang-python, \
                             pre.lang-ruby, \
                             pre.lang-swift, \
                             pre.lang-yaml, \
                             pre.lang-xml";
          document.querySelectorAll(selectors).forEach(function(el) {
            hljs.highlightBlock(el);
          });
        });
      </script></body>
</html>
