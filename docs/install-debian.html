<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta content="73d8ba46-8c12-43f6-8c22-24aa21b8d93d" name="onetrust-data-domain" /><meta content="https://tags.tiqcdn.com/utag/vmware/microsites-privacy/prod/utag.js" name="microsites-utag" /><script src="https://d1fto35gcfffzn.cloudfront.net/assets/jquery-1.11.2.min.js"></script><script src="//www.vmware.com/files/templates/inc/utag_data.js"></script><script src="//tags.tiqcdn.com/utag/vmware/microsites-privacy/prod/utag.sync.js"></script><script>function OptanonWrapper() { { window.dataLayer.push({ event: 'OneTrustGroupsUpdated' }); } }</script><script src="/js/gtm.js"></script><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="googlebot" content="NOODP" /><meta name="google-site-verification" content="nSYeDgyKM9mw5CWcZuD0xu7iSWXlJijAlg9rcxVOYf4" /><meta name="google-site-verification" content="6UEaC3SWhpGQvqRnSJIEm2swxXpM5Adn4dxZhFsNdw0" /><meta content="width=device-width, initial-scale=1.0, maximum-scale=1, minimum-scale=1, user-scalable=no" id="viewport" name="viewport" /><link href="https://fonts.googleapis.com/css?family=Raleway:400,500,600,700" rel="stylesheet" /><link rel="stylesheet" href="/css/rabbit.css" type="text/css" /><link rel="stylesheet" href="/css/highlightjs_style.css" type="text/css" /><link rel="stylesheet" href="/css/rabbit-next.css" type="text/css" /><!--[if IE 6]>
      <link rel="stylesheet" href="/css/rabbit-ie6.css" type="text/css" />
      <![endif]--><link rel="icon" type="/image/vnd.microsoft.icon" href="/favicon.ico" /><link rel="stylesheet" href="/css/tutorial.css" type="text/css" /><script async="true" type="text/javascript" src="/js/site.js"></script><title> Installing on Debian and Ubuntu
 — RabbitMQ</title></head>
  <body id="install-debian"><div id="outerContainer"><div class="container"><div class="rabbit-logo"><a href="/"><img src="/img/logo-rabbitmq.svg" alt="RabbitMQ" /></a></div><a class="btn menubtn" onclick="showHide()">Menu <img src="/img/carrot-down-white.svg" /></a><div class="mobilemenuicon" onclick="showHide()"><img src="/img/mobile-menu-icon.svg" /></div><div id="nav"><ul id="mainNav"><li><a href="/#features">Features</a></li><li><a href="/#getstarted">Get Started</a></li><li><a href="/#support">Support</a></li><li><a href="/#community">Community</a></li><li><a href="/documentation.html">Docs</a></li></ul></div></div><div class="nav-separator"></div><div id="innerContainer" class="container"><div id="left-content"><h1> Installing on Debian and Ubuntu
</h1>


<h2><a id="overview" class="anchor" href="#overview">Overview</a></h2>
<p>This guide covers RabbitMQ installation on Debian, Ubuntu and distributions based on one of them.</p>
<p>RabbitMQ is included in standard Debian and Ubuntu repositories.
However, the <a href="https://packages.ubuntu.com/search?keywords=rabbitmq-server&amp;searchon=names&amp;suite=all&amp;section=all">versions included</a> are
many releases behind <a href="changelog.html">latest RabbitMQ releases</a>
and may provide RabbitMQ versions that are already <a href="versions.html">out of support</a>.</p>
<p>Team RabbitMQ produces our own Debian packages and distributes them <a href="#apt-cloudsmith">using Cloudsmith</a> and <a href="#apt-packagecloud">PackageCloud</a>.</p>
<p>Key sections of this guide are</p>
<ul>
<li><a href="#installation-methods">Ways of installing</a> the latest RabbitMQ version on Debian and Ubuntu</li>
<li><a href="#supported-distributions">Supported Ubuntu and Debian distributions</a></li>
<li><a href="#sudo-requirements">Privilege requirements</a></li>
<li>Quick start installation snippets that <a href="#apt-quick-start-packagecloud">uses PackageCloud</a> and Launchpad repositories</li>
<li>Quick start installation snippet that <a href="#apt-quick-start-cloudsmith">uses a Cloudsmith mirror</a> repositories</li>
<li><a href="#managing-service">Manage the service</a> (start it, stop it, and get its status)</li>
<li>How to <a href="#server-logs">inspect node and service logs</a></li>
</ul>
<p><a href="which-erlang.html">Supported Erlang versions</a> will be provisioned from one of the <a href="#erlang-repositories">modern Erlang apt repositories</a>
on <a href="https://launchpad.net/~rabbitmq/+archive/ubuntu/rabbitmq-erlang">Ubuntu Launchpad</a> or <a href="https://cloudsmith.io/~rabbitmq/repos/rabbitmq-erlang/packages/">Cloudsmith.io</a>.</p>
<p>Those looking for a more detailed description of the installation steps performed
should refer to</p>
<ul>
<li>Manual installation using <a href="#apt-packagecloud">apt the PackageCloud</a> and Launchpad repositories</li>
<li>Manual installation using <a href="#apt-cloudsmith">apt and the Cloudsmith</a> repository</li>
</ul>
<p>More advanced topics include</p>
<ul>
<li><a href="#apt-pinning">Version Pinning</a> of apt packages</li>
</ul>
<h2><a id="installation-methods" class="anchor" href="#installation-methods">How to Install Latest RabbitMQ on Debian and Ubuntu</a></h2>
<h3>With Apt</h3>
<p>There are two options available for installing modern RabbitMQ on Debian and Ubuntu:</p>
<ul>
<li>Option A: using apt repositories <a href="#apt-cloudsmith">on Cloudsmith</a> (<a href="#apt-quick-start-cloudsmith">quick start script</a>)</li>
<li>Option B: using a combination of apt repositories <a href="#apt-packagecloud">on PackageCloud</a> and Launchpad (<a href="#apt-quick-start-packagecloud">quick start script</a>)</li>
</ul>
<p>Both options will install a <a href="which-erlang.html">modern version of Erlang</a> using <a href="#erlang-repositories">Erlang apt repositories</a>
on Cloudsmith or Launchpad.</p>
<h3>Manually Using Dpkg</h3>
<p>Alternatively, the package can be downloaded manually and <a href="#manual-installation">installed </a> with <span class="code ">dpkg -i</span>.
This option will require manual installation of all RabbitMQ package dependencies and is <strong>highly discouraged</strong>.</p>
<h2><a id="supported-distributions" class="anchor" href="#supported-distributions">Supported Distributions</a></h2>
<p>RabbitMQ is supported on several major Debian-based distributions that are still supported
by their primary vendor or developer group.</p>
<p>For Debian, this means that RabbitMQ core team focus around package is on the current and prior release of Debian-based distributions,
i.e. inline with <a href="https://wiki.debian.org/DebianReleases">distribution EOL policy</a>.</p>
<p>Currently the list of supported Debian-based distributions includes</p>
<ul>
<li>Ubuntu 18.04 through 23.04</li>
<li>Debian Buster (10), Bullseye (11), and Sid ("unstable")</li>
</ul>
<p>The package may work on other Debian-based distributions
if <a href="#manual-installation">dependencies</a> are satisfied (e.g. using a backports repository)
but their testing and support is done on a best effort basis.</p>
<h2><a id="erlang-repositories" class="anchor" href="#erlang-repositories">Where to Get Recent Erlang Version on Debian and Ubuntu</a></h2>
<p>RabbitMQ needs Erlang/OTP to run. Erlang/OTP packages in
standard Debian and Ubuntu repositories can be significantly out of date
and not <a href="which-erlang.html">supported by modern RabbitMQ versions</a>.</p>
<p>Most recent Erlang/OTP release series are available from a number of alternative
apt repositories:</p>
<table>
 <thead>
   <tr>
     <td><strong>Erlang Release Series</strong></td>
     <td><strong>Apt Repositories that provide it</strong></td>
     <td><strong>Notes</strong></td>
   </tr>
 </thead>
 <tbody>
  <tr>
     <td>25.x</td>
     <td>
       <ul>
        <li><a href="#apt-launchpad-erlang">Debian packages of Erlang</a> from Team RabbitMQ on Launchpad</li>
        <li><a href="https://packages.erlang-solutions.com/erlang/#tabs-debian">Erlang Solutions</a></li>
        <li><a href="#apt-cloudsmith">Debian packages of Erlang</a> from Team RabbitMQ on Cloudsmith.io</li>
       </ul>
     </td>
     <td>
       <strong>Supported <a href="https://github.com/rabbitmq/rabbitmq-server/releases/tag/v3.10.0">starting with 3.10.0</a></strong>, required starting with <a href="https://github.com/rabbitmq/rabbitmq-server/releases/tag/v3.11.0">3.11.0</a>.
       See <a href="./which-erlang.html">Erlang compatibility guide</a>.
     </td>
  </tr>

  <tr>
     <td>24.x</td>
     <td>
       <ul>
        <li><a href="https://packages.erlang-solutions.com/erlang/#tabs-debian">Erlang Solutions</a></li>
        <li><a href="#apt-cloudsmith">Debian packages of Erlang</a> from Team RabbitMQ on Cloudsmith.io</li>
       </ul>
     </td>
     <td>
       <strong>Supported <a href="https://blog.rabbitmq.com/posts/2021/03/erlang-24-support-roadmap/">starting with 3.8.16</a></strong>.
       See <a href="./which-erlang.html">Erlang compatibility guide</a>.
     </td>
   </tr>

 </tbody>
</table>

<p>This guide will focus on the Debian repositories maintained by Team RabbitMQ <a href="#apt-launchpad-erlang">on Launchpad</a>
and <a href="#apt-cloudsmith-erlang">on Cloudsmith.io</a>.</p>
<h2><a id="apt-packagecloud" class="anchor" href="#apt-packagecloud">Using RabbitMQ Apt Repositories on PackageCloud</a></h2>
<p>Team RabbitMQ maintains an <a href="https://packagecloud.io/rabbitmq/rabbitmq-server">apt repository on PackageCloud</a>,
a package hosting service. It provides packages for most recent RabbitMQ releases.</p>
<p>PackageCloud provides <a href="https://packagecloud.io/rabbitmq/rabbitmq-server/install">repository setup instructions</a> that include
a convenient one-liner. Please <strong>always inspect scripts</strong> that are downloaded from the Internet and executed via
a privileged shell!</p>
<p>Note that the PackageCloud script <strong>does not</strong> currently follow Debian best practices in terms of GPG key handling
and the rest of this section does.</p>
<p>This guide will focus on a more traditional and explicit way of setting up an additional apt repository
and installing packages.</p>
<p>All steps covered below are <strong>mandatory</strong> unless otherwise specified.</p>
<h3><a id="apt-quick-start-packagecloud" class="anchor" href="#apt-quick-start-packagecloud">PackageCloud Quick Start Script</a></h3>
<p>Below is shell snippet that performs those steps. They are documented in more detail below.</p>
<pre class="lang-bash">
#!/bin/sh

## Update package indices
sudo apt-get update -y

sudo apt-get install curl gnupg apt-transport-https -y

## Team RabbitMQ's main signing key
curl -1sLf "https://keys.openpgp.org/vks/v1/by-fingerprint/0A9AF2115F4687BD29803A206B73A36E6026DFCA" | sudo gpg --dearmor | sudo tee /usr/share/keyrings/com.rabbitmq.team.gpg &gt; /dev/null
## Launchpad PPA that provides modern Erlang releases
curl -1sLf "https://keyserver.ubuntu.com/pks/lookup?op=get&amp;search=0xf77f1eda57ebb1cc" | sudo gpg --dearmor | sudo tee /usr/share/keyrings/net.launchpad.ppa.rabbitmq.erlang.gpg &gt; /dev/null
## PackageCloud RabbitMQ repository
curl -1sLf "https://packagecloud.io/rabbitmq/rabbitmq-server/gpgkey" | sudo gpg --dearmor | sudo tee /usr/share/keyrings/io.packagecloud.rabbitmq.gpg &gt; /dev/null

## Add apt repositories maintained by Team RabbitMQ
sudo tee /etc/apt/sources.list.d/rabbitmq.list &lt;&lt;EOF
## Provides modern Erlang/OTP releases
##
## "bionic" as distribution name should work for any reasonably recent Ubuntu or Debian release.
## See the release to distribution mapping table in RabbitMQ doc guides to learn more.
deb [signed-by=/usr/share/keyrings/net.launchpad.ppa.rabbitmq.erlang.gpg] http://ppa.launchpad.net/rabbitmq/rabbitmq-erlang/ubuntu bionic main
deb-src [signed-by=/usr/share/keyrings/net.launchpad.ppa.rabbitmq.erlang.gpg] http://ppa.launchpad.net/rabbitmq/rabbitmq-erlang/ubuntu bionic main

## Provides RabbitMQ
##
## "bionic" as distribution name should work for any reasonably recent Ubuntu or Debian release.
## See the release to distribution mapping table in RabbitMQ doc guides to learn more.
deb [signed-by=/usr/share/keyrings/io.packagecloud.rabbitmq.gpg] https://packagecloud.io/rabbitmq/rabbitmq-server/ubuntu/ bionic main
deb-src [signed-by=/usr/share/keyrings/io.packagecloud.rabbitmq.gpg] https://packagecloud.io/rabbitmq/rabbitmq-server/ubuntu/ bionic main
EOF

## Update package indices
sudo apt-get update -y

## Install Erlang packages
sudo apt-get install -y erlang-base \
                        erlang-asn1 erlang-crypto erlang-eldap erlang-ftp erlang-inets \
                        erlang-mnesia erlang-os-mon erlang-parsetools erlang-public-key \
                        erlang-runtime-tools erlang-snmp erlang-ssl \
                        erlang-syntax-tools erlang-tftp erlang-tools erlang-xmerl

## Install rabbitmq-server and its dependencies
sudo apt-get install rabbitmq-server -y --fix-missing
</pre>

<h3>Enable apt HTTPS Transport</h3>
<p>In order for apt to be able to download RabbitMQ and Erlang packages from services such as PackageCloud, Cloudsmith.io or Launchpad,
the <span class="code ">apt-transport-https</span> package must be installed:</p>
<pre class="lang-bash">
sudo apt-get install apt-transport-https
</pre>

<h3>Add Repository Signing Key</h3>
<p>In order for <span class="code ">apt</span> to use the repository, <a href="signatures.html">RabbitMQ signing key</a> must be available to the system for validation.</p>
<pre class="lang-bash">
## Team RabbitMQ's main signing key
curl -1sLf "https://keys.openpgp.org/vks/v1/by-fingerprint/0A9AF2115F4687BD29803A206B73A36E6026DFCA" | sudo gpg --dearmor | sudo tee /usr/share/keyrings/com.rabbitmq.team.gpg &gt; /dev/null
## Launchpad PPA that provides modern Erlang releases
curl -1sLf "https://keyserver.ubuntu.com/pks/lookup?op=get&amp;search=0xf77f1eda57ebb1cc" | sudo gpg --dearmor | sudo tee /usr/share/keyrings/net.launchpad.ppa.rabbitmq.erlang.gpg &gt; /dev/null
## PackageCloud RabbitMQ repository
curl -1sLf "https://packagecloud.io/rabbitmq/rabbitmq-server/gpgkey" | sudo gpg --dearmor | sudo tee /usr/share/keyrings/io.packagecloud.rabbitmq.gpg &gt; /dev/null
</pre>

<p>See the <a href="signatures.html">guide on signatures</a> to learn more.</p>
<h4>Add a Source List File</h4>
<p>As with all 3rd party apt repositories, a file describing the RabbitMQ and Erlang package repositories
must be placed under the <span class="code ">/etc/apt/sources.list.d/</span> directory.
<span class="code ">/etc/apt/sources.list.d/rabbitmq.list</span> is the recommended location.</p>
<p>The file should have a source (repository) definition line that uses the following
pattern:</p>
<pre class="lang-ini">
# Source repository definition example.

## Provides modern Erlang/OTP releases
##
## "bionic" as distribution name should work for any reasonably recent Ubuntu or Debian release.
## See the release to distribution mapping table in RabbitMQ doc guides to learn more.
deb [signed-by=/usr/share/keyrings/net.launchpad.ppa.rabbitmq.erlang.gpg] http://ppa.launchpad.net/rabbitmq/rabbitmq-erlang/ubuntu bionic main
deb-src [signed-by=/usr/share/keyrings/net.launchpad.ppa.rabbitmq.erlang.gpg] http://ppa.launchpad.net/rabbitmq/rabbitmq-erlang/ubuntu bionic main

## Provides RabbitMQ
##
## "bionic" as distribution name should work for any reasonably recent Ubuntu or Debian release.
## See the release to distribution mapping table in RabbitMQ doc guides to learn more.
deb [signed-by=/usr/share/keyrings/io.packagecloud.rabbitmq.gpg] https://packagecloud.io/rabbitmq/rabbitmq-server/ubuntu/ bionic main
deb-src [signed-by=/usr/share/keyrings/io.packagecloud.rabbitmq.gpg] https://packagecloud.io/rabbitmq/rabbitmq-server/ubuntu/ bionic main
</pre>

<p>The next couple of sections discusses what distribution and component values
are supported.</p>
<h4>Distribution</h4>
<p>In order to set up an apt repository that provides the correct package, a few
decisions have to be made. One is determining the distribution name. It often
matches the Debian or Ubuntu release used:</p>
<ul>
<li><span class="code ">jammy</span> for Ubuntu 22.04</li>
<li><span class="code ">focal</span> for Ubuntu 20.04</li>
<li><span class="code ">bionic</span> for Ubuntu 18.04</li>
<li><span class="code ">buster</span> for Debian Buster</li>
<li><span class="code ">bullseye</span> for Debian Bullseye</li>
</ul>
<p>Not all distributions are covered (indexed). For example, freshly released ones usually
won't be recognized by the package hosting services.
But there are good news: since the package indexed for these distributions is the same,
any reasonably recent distribution name would suffice in practice.
For example, users of Debian Sid or Debian Bullseye
can both use <span class="code ">bullseye</span> for distribution name.</p>
<p>Below is a table of OS release and distribution names that should be used
with the RabbitMQ apt repository on PackageCloud.</p>
<table>
<thead>
<tr>
<th>Release</th>
<th>Distribution</th>
</tr>
</thead>
<tbody>
<tr>
<td>Ubuntu 22.04</td>
<td><span class="code ">jammy</span></td>
</tr>
<tr>
<td>Ubuntu 20.04</td>
<td><span class="code ">focal</span></td>
</tr>
<tr>
<td>Ubuntu 18.04</td>
<td><span class="code ">bionic</span></td>
</tr>
<tr>
<td>Debian Buster</td>
<td><span class="code ">buster</span></td>
</tr>
<tr>
<td>Debian Bullseye</td>
<td><span class="code ">bullseye</span></td>
</tr>
<tr>
<td>Debian Sid</td>
<td><span class="code ">bullseye</span></td>
</tr>
</tbody>
</table>
<p>To add the apt repository to the source list directory (<span class="code ">/etc/apt/sources.list.d</span>), use:</p>
<pre class="lang-bash">
sudo tee /etc/apt/sources.list.d/rabbitmq.list &lt;&lt;EOF
## Provides modern Erlang/OTP releases
##
## "bionic" as distribution name should work for any reasonably recent Ubuntu or Debian release.
## See the release to distribution mapping table in RabbitMQ doc guides to learn more.
deb [signed-by=/usr/share/keyrings/net.launchpad.ppa.rabbitmq.erlang.gpg] http://ppa.launchpad.net/rabbitmq/rabbitmq-erlang/ubuntu bionic main
deb-src [signed-by=/usr/share/keyrings/net.launchpad.ppa.rabbitmq.erlang.gpg] http://ppa.launchpad.net/rabbitmq/rabbitmq-erlang/ubuntu bionic main

## Provides RabbitMQ
##
## Replace $distribution with the name of the Ubuntu release used.
## On Debian, "deb/ubuntu" should be replaced with "deb/debian"
deb [signed-by=/usr/share/keyrings/io.packagecloud.rabbitmq.gpg] https://packagecloud.io/rabbitmq/rabbitmq-server/ubuntu/ $distribution main
deb-src [signed-by=/usr/share/keyrings/io.packagecloud.rabbitmq.gpg] https://packagecloud.io/rabbitmq/rabbitmq-server/ubuntu/ $distribution main
EOF
</pre>

<p>where <span class="code ">$distribution</span> is the name of the Debian or Ubuntu distribution used (see the table above).</p>
<p>So, for example, on Debian Buster it would be</p>
<pre class="lang-bash">
sudo tee /etc/apt/sources.list.d/rabbitmq.list &lt;&lt;EOF
## Provides modern Erlang/OTP releases
##
## The Ubuntu PPA is not aware of Debian distribution names.
## "bionic" as distribution name should work for any reasonably recent Ubuntu or Debian release.
deb [signed-by=/usr/share/keyrings/net.launchpad.ppa.rabbitmq.erlang.gpg] http://ppa.launchpad.net/rabbitmq/rabbitmq-erlang/ubuntu bionic main
deb-src [signed-by=/usr/share/keyrings/net.launchpad.ppa.rabbitmq.erlang.gpg] http://ppa.launchpad.net/rabbitmq/rabbitmq-erlang/ubuntu bionic main

## Provides RabbitMQ
##
deb [signed-by=/usr/share/keyrings/io.packagecloud.rabbitmq.gpg] https://packagecloud.io/rabbitmq/rabbitmq-server/ubuntu/ buster main
deb-src [signed-by=/usr/share/keyrings/io.packagecloud.rabbitmq.gpg] https://packagecloud.io/rabbitmq/rabbitmq-server/ubuntu/ buster main
EOF
</pre>

<h4>Install Packages</h4>
<p>After updating the list of <span class="code ">apt</span> sources it is necessary to run <span class="code ">apt-get update</span>:</p>
<pre class="lang-bash">
sudo apt-get update -y
</pre>

<p>Then install the package with</p>
<pre class="lang-bash">
## Install Erlang packages
sudo apt-get install -y erlang-base \
                        erlang-asn1 erlang-crypto erlang-eldap erlang-ftp erlang-inets \
                        erlang-mnesia erlang-os-mon erlang-parsetools erlang-public-key \
                        erlang-runtime-tools erlang-snmp erlang-ssl \
                        erlang-syntax-tools erlang-tftp erlang-tools erlang-xmerl

## Install rabbitmq-server and its dependencies
sudo apt-get install rabbitmq-server -y --fix-missing
</pre>

<h2><a id="apt-cloudsmith" class="anchor" href="#apt-cloudsmith">Using RabbitMQ Apt Repositories on Cloudsmith</a></h2>
<p>Team RabbitMQ maintains two <a href="https://cloudsmith.io/~rabbitmq/repos/">apt repositories on Cloudsmith</a>,
a package hosting service. They provide packages for most recent RabbitMQ and modern Erlang releases.</p>
<p>The Cloudsmith repository has a monthly traffic quota that can be exhausted. For this reason,
examples below use a Cloudsmith repository mirror. All packages in the mirror repository
are signed using the same signing key.</p>
<p>This guide will focus on a more traditional and explicit way of setting up additional apt repositories
and installing packages.</p>
<p>All steps covered below are <strong>mandatory</strong> unless otherwise specified.</p>
<h3><a id="apt-quick-start-cloudsmith" class="anchor" href="#apt-quick-start-cloudsmith">Cloudsmith Quick Start Script</a></h3>
<p>Below is shell snippet that performs those steps and assumes that Ubuntu 22.04 is used.
They are documented in more detail below.</p>
<pre class="lang-bash">
#!/bin/sh

sudo apt-get install curl gnupg apt-transport-https -y

## Team RabbitMQ's main signing key
curl -1sLf "https://keys.openpgp.org/vks/v1/by-fingerprint/0A9AF2115F4687BD29803A206B73A36E6026DFCA" | sudo gpg --dearmor | sudo tee /usr/share/keyrings/com.rabbitmq.team.gpg &gt; /dev/null
## Community mirror of Cloudsmith: modern Erlang repository
curl -1sLf https://ppa1.novemberain.com/gpg.E495BB49CC4BBE5B.key | sudo gpg --dearmor | sudo tee /usr/share/keyrings/rabbitmq.E495BB49CC4BBE5B.gpg &gt; /dev/null
## Community mirror of Cloudsmith: RabbitMQ repository
curl -1sLf https://ppa1.novemberain.com/gpg.9F4587F226208342.key | sudo gpg --dearmor | sudo tee /usr/share/keyrings/rabbitmq.9F4587F226208342.gpg &gt; /dev/null

## Add apt repositories maintained by Team RabbitMQ
sudo tee /etc/apt/sources.list.d/rabbitmq.list &lt;&lt;EOF
## Provides modern Erlang/OTP releases
##
deb [signed-by=/usr/share/keyrings/rabbitmq.E495BB49CC4BBE5B.gpg] https://ppa1.novemberain.com/rabbitmq/rabbitmq-erlang/deb/ubuntu jammy main
deb-src [signed-by=/usr/share/keyrings/rabbitmq.E495BB49CC4BBE5B.gpg] https://ppa1.novemberain.com/rabbitmq/rabbitmq-erlang/deb/ubuntu jammy main

## Provides RabbitMQ
##
deb [signed-by=/usr/share/keyrings/rabbitmq.9F4587F226208342.gpg] https://ppa1.novemberain.com/rabbitmq/rabbitmq-server/deb/ubuntu jammy main
deb-src [signed-by=/usr/share/keyrings/rabbitmq.9F4587F226208342.gpg] https://ppa1.novemberain.com/rabbitmq/rabbitmq-server/deb/ubuntu jammy main
EOF

## Update package indices
sudo apt-get update -y

## Install Erlang packages
sudo apt-get install -y erlang-base \
                        erlang-asn1 erlang-crypto erlang-eldap erlang-ftp erlang-inets \
                        erlang-mnesia erlang-os-mon erlang-parsetools erlang-public-key \
                        erlang-runtime-tools erlang-snmp erlang-ssl \
                        erlang-syntax-tools erlang-tftp erlang-tools erlang-xmerl

## Install rabbitmq-server and its dependencies
sudo apt-get install rabbitmq-server -y --fix-missing
</pre>

<p>All steps covered below are <strong>mandatory</strong> unless otherwise specified.</p>
<h3>Install Essential Dependencies</h3>
<pre class="lang-bash">
sudo apt-get update -y

sudo apt-get install curl gnupg -y
</pre>

<h3>Enable apt HTTPS Transport</h3>
<p>In order for apt to be able to download RabbitMQ and Erlang packages from services such as PackageCloud, Cloudsmith.io or Launchpad,
the <span class="code ">apt-transport-https</span> package must be installed:</p>
<pre class="lang-bash">
sudo apt-get install apt-transport-https
</pre>

<h3><a id="cloudsmith-signing-keys" class="anchor" href="#cloudsmith-signing-keys">Add Repository Signing Keys</a></h3>
<p>Cloudsmith signs distributed packages using their own GPG keys, one per repository.</p>
<p>In order to use the repositories, their signing keys must be added to the system.
This will enable apt to trust packages signed by that key.</p>
<pre class="lang-bash">
sudo apt-get install curl gnupg apt-transport-https -y

## Team RabbitMQ's main signing key
curl -1sLf "https://keys.openpgp.org/vks/v1/by-fingerprint/0A9AF2115F4687BD29803A206B73A36E6026DFCA" | sudo gpg --dearmor | sudo tee /usr/share/keyrings/com.rabbitmq.team.gpg &gt; /dev/null
## Community mirror of Cloudsmith: modern Erlang repository
curl -1sLf https://ppa1.novemberain.com/gpg.E495BB49CC4BBE5B.key | sudo gpg --dearmor | sudo tee /usr/share/keyrings/rabbitmq.E495BB49CC4BBE5B.gpg &gt; /dev/null
## Community mirror of Cloudsmith: RabbitMQ repository
curl -1sLf https://ppa1.novemberain.com/gpg.9F4587F226208342.key | sudo gpg --dearmor | sudo tee /usr/share/keyrings/rabbitmq.9F4587F226208342.gpg &gt; /dev/null
</pre>

<p>See the <a href="signatures.html">guide on signatures</a> to learn more.</p>
<h4>Add a Source List File</h4>
<p>As with all 3rd party apt repositories, a file describing the RabbitMQ and Erlang package repositories
must be placed under the <span class="code ">/etc/apt/sources.list.d/</span> directory.
<span class="code ">/etc/apt/sources.list.d/rabbitmq.list</span> is the recommended location.</p>
<p>The file should have a source (repository) definition line that uses the following
pattern:</p>
<pre class="lang-ini">
## Provides modern Erlang/OTP releases from a Cloudsmith mirror
##
deb [signed-by=/usr/share/keyrings/rabbitmq.E495BB49CC4BBE5B.gpg] https://ppa1.novemberain.com/rabbitmq/rabbitmq-erlang/deb/ubuntu $distribution main
deb-src [signed-by=/usr/share/keyrings/rabbitmq.E495BB49CC4BBE5B.gpg] https://ppa1.novemberain.com/rabbitmq/rabbitmq-erlang/deb/ubuntu $distribution main

## Provides RabbitMQ from a Cloudsmith mirror
##
deb [signed-by=/usr/share/keyrings/rabbitmq.9F4587F226208342.gpg] https://ppa1.novemberain.com/rabbitmq/rabbitmq-server/deb/ubuntu $distribution main
deb-src [signed-by=/usr/share/keyrings/rabbitmq.9F4587F226208342.gpg] https://ppa1.novemberain.com/rabbitmq/rabbitmq-server/deb/ubuntu $distribution main
</pre>

<p>The next couple of sections discusses what distribution and component values
are supported.</p>
<h4>Distribution</h4>
<p>In order to set up an apt repository that provides the correct package, a few
decisions have to be made. One is determining the distribution name. It often
matches the Debian or Ubuntu release used:</p>
<ul>
<li><span class="code ">jammy</span> for Ubuntu 23.04</li>
<li><span class="code ">jammy</span> for Ubuntu 22.04</li>
<li><span class="code ">focal</span> for Ubuntu 20.04</li>
<li><span class="code ">bionic</span> for Ubuntu 18.04</li>
<li><span class="code ">buster</span> for Debian Buster, Bullseye, and Sid</li>
</ul>
<p>Not all distributions are covered (indexed). For example, freshly released ones usually
won't be recognized by the package hosting services.
But there are good news: since the package indexed for these distributions is the same,
any reasonably recent distribution name would suffice in practice.
For example, users of Debian Sid or Debian Bullseye
can both use <span class="code ">bullseye</span> for distribution name.</p>
<p>Below is a table of OS release and distribution names that should be used
with the RabbitMQ apt repository on PackageCloud.</p>
<table>
<thead>
<tr>
<th>Release</th>
<th>Distribution</th>
</tr>
</thead>
<tbody>
<tr>
<td>Ubuntu 23.04</td>
<td><span class="code ">jammy</span></td>
</tr>
<tr>
<td>Ubuntu 22.04</td>
<td><span class="code ">jammy</span></td>
</tr>
<tr>
<td>Ubuntu 20.04</td>
<td><span class="code ">focal</span></td>
</tr>
<tr>
<td>Ubuntu 18.04</td>
<td><span class="code ">bionic</span></td>
</tr>
<tr>
<td>Debian Buster</td>
<td><span class="code ">buster</span></td>
</tr>
<tr>
<td>Debian Bullseye</td>
<td><span class="code ">bullseye</span></td>
</tr>
<tr>
<td>Debian Sid</td>
<td><span class="code ">bullseye</span></td>
</tr>
</tbody>
</table>
<p>To add the apt repository to the source list directory (under <span class="code ">/etc/apt/sources.list.d</span>), use:</p>
<pre class="lang-bash">
sudo tee /etc/apt/sources.list.d/rabbitmq.list &lt;&lt;EOF
## Provides modern Erlang/OTP releases from a Cloudsmith mirror
##
deb [signed-by=/usr/share/keyrings/rabbitmq.E495BB49CC4BBE5B.gpg] https://ppa1.novemberain.com/rabbitmq/rabbitmq-erlang/deb/ubuntu $distribution main
deb-src [signed-by=/usr/share/keyrings/rabbitmq.E495BB49CC4BBE5B.gpg] https://ppa1.novemberain.com/rabbitmq/rabbitmq-erlang/deb/ubuntu $distribution main

## Provides RabbitMQ from a Cloudsmith mirror
##
deb [signed-by=/usr/share/keyrings/rabbitmq.9F4587F226208342.gpg] https://ppa1.novemberain.com/rabbitmq/rabbitmq-server/deb/ubuntu $distribution main
deb-src [signed-by=/usr/share/keyrings/rabbitmq.9F4587F226208342.gpg] https://ppa1.novemberain.com/rabbitmq/rabbitmq-server/deb/ubuntu $distribution main
EOF
</pre>

<p>where <span class="code ">$distribution</span> is the name of the Debian or Ubuntu distribution used (see the table above).</p>
<p>For example, on Debian Buster it would be</p>
<pre class="lang-bash">
sudo tee /etc/apt/sources.list.d/rabbitmq.list &lt;&lt;EOF
## Provides modern Erlang/OTP releases from a Cloudsmith mirror
##
deb [signed-by=/usr/share/keyrings/rabbitmq.E495BB49CC4BBE5B.gpg] https://ppa1.novemberain.com/rabbitmq/rabbitmq-erlang/deb/debian buster main
deb-src [signed-by=/usr/share/keyrings/rabbitmq.E495BB49CC4BBE5B.gpg] https://ppa1.novemberain.com/rabbitmq/rabbitmq-erlang/deb/debian buster main

## Provides RabbitMQ from a Cloudsmith mirror
##
deb [signed-by=/usr/share/keyrings/rabbitmq.9F4587F226208342.gpg] https://ppa1.novemberain.com/rabbitmq/rabbitmq-server/deb/debian buster main
deb-src [signed-by=/usr/share/keyrings/rabbitmq.9F4587F226208342.gpg] https://ppa1.novemberain.com/rabbitmq/rabbitmq-server/deb/debian buster main
EOF
</pre>

<h4>Install Packages</h4>
<p>After updating the list of <span class="code ">apt</span> sources it is necessary to run <span class="code ">apt-get update</span>:</p>
<pre class="lang-bash">
sudo apt-get update -y
</pre>

<p>Then install the package with</p>
<pre class="lang-bash">
## Install Erlang packages
sudo apt-get install -y erlang-base \
                        erlang-asn1 erlang-crypto erlang-eldap erlang-ftp erlang-inets \
                        erlang-mnesia erlang-os-mon erlang-parsetools erlang-public-key \
                        erlang-runtime-tools erlang-snmp erlang-ssl \
                        erlang-syntax-tools erlang-tftp erlang-tools erlang-xmerl

## Install rabbitmq-server and its dependencies
sudo apt-get install rabbitmq-server -y --fix-missing
</pre>

<h2><a id="apt-pinning" class="anchor" href="#apt-pinning">Debian Package Version and Repository Pinning</a></h2>
<p>Version pinning is an <strong>optional</strong> step. If not used, <span class="code ">apt</span> will install the most recent version
available.</p>
<p>When the same package (e.g. <span class="code ">erlang-base</span>) is available from multiple apt repositories operators need
to have a way to indicate what repository should be preferred. It may also be desired to restrict Erlang version to avoid undesired upgrades.
<a href="https://wiki.debian.org/AptPreferences">apt package pinning</a> feature can be used to address both problems.</p>
<p>Package pinning is configured with a file placed under the <span class="code ">/etc/apt/preferences.d/</span> directory, e.g. <span class="code ">/etc/apt/preferences.d/erlang</span>.
After updating apt preferences it is necessary to run <span class="code ">apt-get update</span>:</p>
<pre class="lang-bash">
sudo apt-get update -y
</pre>

<p>The following preference file example will configure <span class="code ">apt</span> to install <span class="code ">erlang-*</span> packages from the Cloudsmith
mirror used in the examples above:</p>
<pre class="lang-ini">
# /etc/apt/preferences.d/erlang
Package: erlang*
Pin: origin ppa1.novemberain.com
Pin-Priority: 1000
</pre>

<p>The following is similar to the example above but prefers Launchpad:</p>
<pre class="lang-ini">
# /etc/apt/preferences.d/erlang
Package: erlang*
Pin: origin ppa.launchpad.net
Pin-Priority: 1000
</pre>

<p>Effective package pinning policy can be verified with</p>
<pre class="lang-bash">
sudo apt-cache policy
</pre>

<p>The following preference file example will pin all <span class="code ">erlang-*</span> packages to <span class="code ">25.3</span>
(assuming <a href="https://www.debian.org/doc/debian-policy/ch-controlfields.html#s-f-Version">package epoch</a> for the package is 1):</p>
<pre class="lang-ini">
# /etc/apt/preferences.d/erlang
Package: erlang*
Pin: version 1:25.3
Pin-Priority: 1000
</pre>

<p>The following preference file example will pin <span class="code ">rabbitmq-server</span> package to <span class="code ">3.11.16</span>
(assuming <a href="https://www.debian.org/doc/debian-policy/ch-controlfields.html#s-f-Version">package epoch</a> for the package is 1):</p>
<pre class="lang-ini">
# /etc/apt/preferences.d/rabbitmq
Package: rabbitmq-server
Pin: version 1:3.11.16
Pin-Priority: 1000
</pre>

<p>In the example below, the <span class="code ">esl-erlang</span> package is pinned to <span class="code ">24.3.1</span>
(assuming <a href="https://www.debian.org/doc/debian-policy/ch-controlfields.html#s-f-Version">package epoch</a> for the package is 1):</p>
<pre class="lang-ini">
# /etc/apt/preferences.d/erlang
Package: esl-erlang
Pin: version 1:24.3.1
Pin-Priority: 1000
</pre>

<h2><a id="manual-installation" class="anchor" href="#manual-installation">Manual Installation with Dpkg</a></h2>
<p>In some cases it may be easier to download the package directly from GitHub and install it manually using <span class="code ">sudo dpkg -i</span>.
Below is a download link.</p>
<table>
  <thead>
    <th>Description</th>
    <th>Download</th>
    <th>Signature</th>
  </thead>

  <tr>
    <td>
      .deb for Debian-based Linux (from <a href="https://github.com/rabbitmq/rabbitmq-server/releases">GitHub</a>)
    </td>
    <td>
      <a href="https://github.com/rabbitmq/rabbitmq-server/releases/download/v3.11.16/rabbitmq-server_3.11.16-1_all.deb">rabbitmq-server_3.11.16-1_all.deb</a>
    </td>
    <td>
      <a href="https://github.com/rabbitmq/rabbitmq-server/releases/download/v3.11.16/rabbitmq-server_3.11.16-1_all.deb.asc">Signature</a>
    </td>
  </tr>
</table>

<p>When installing manually with <span class="code ">dpkg</span>, it is necessary to install package dependencies first.
<span class="code ">dpkg</span>, unlike <span class="code ">apt</span>, does not resolve or manage dependencies.</p>
<p>Here's an example that does that, installs <span class="code ">wget</span>, downloads the RabbitMQ package and installs it:</p>
<pre class="lang-bash">
# sync package metadata
sudo apt-get update
# install dependencies manually
sudo apt-get -y install socat logrotate init-system-helpers adduser

# download the package
sudo apt-get -y install wget
wget https://github.com/rabbitmq/rabbitmq-server/releases/download/v3.11.16/rabbitmq-server_3.11.16-1_all.deb

# install the package with dpkg
sudo dpkg -i rabbitmq-server_3.11.16-1_all.deb

rm rabbitmq-server_3.11.16-1_all.deb
</pre>

<p>Installation via <a href="#apt">apt repositories</a> is recommended
over downloading the package directly and installing via <span class="code ">dpkg -i</span>. When the RabbitMQ
package is installed manually with <span class="code ">dpkg -i</span> the operator is responsible for making sure
that all <a href="#package-dependencies">package dependencies</a> are met.</p>
<h2><a id="sudo-requirements" class="anchor" href="#sudo-requirements">User Privilege Requirements</a></h2>
<p>RabbitMQ Debian package will require <span class="code ">sudo</span> privileges to install and manage.
In environments where <span class="code ">sudo</span> isn't available, consider using the
<a href="install-generic-unix.html">generic binary build</a> instead.</p>
<h2><a id="running-debian" class="anchor" href="#running-debian">Run RabbitMQ Server</a></h2>
<h4>Start the Server</h4>
<p>The server is started as a daemon by default when the
RabbitMQ server package is installed. It will run as a non-privileged user <span class="code ">rabbitmq</span>.</p>
<p>As an administrator, start and stop the
server as usual for Debian-based systems:</p>
<pre class="lang-bash">
systemctl start rabbitmq-server
</pre>

<h2><a id="configuration" class="anchor" href="#configuration">Configuring RabbitMQ</a></h2>
<p>On most systems, a node should be able to start and run with all defaults.
Please refer to the <a href="configure.html">Configuration guide</a> to learn more
and <a href="production-checklist.html">Production Checklist</a> for guidelines beyond
development environments.</p>
<p>Note: the node is set up to run as system user <span class="code ">rabbitmq</span>.
If <a href="relocate.html">location of the node database or the logs</a> is changed,
the files and directories must be owned by this user.</p>
<h2><a id="ports" class="anchor" href="#ports">Port Access</a></h2>
<p>RabbitMQ nodes bind to ports (open server TCP sockets) in order to accept client and CLI tool connections.
Other processes and tools such as SELinux may prevent RabbitMQ from binding to a port. When that happens,
the node will fail to start.</p>
<p>CLI tools, client libraries and RabbitMQ nodes also open connections (client TCP sockets).
Firewalls can prevent nodes and CLI tools from communicating with each other.
Make sure the following ports are accessible:</p>
<ul>
<li>4369: <a href="http://erlang.org/doc/man/epmd.html">epmd</a>, a peer discovery service used by RabbitMQ nodes and CLI tools</li>
<li>5672, 5671: used by AMQP 0-9-1 and 1.0 clients without and with TLS</li>
<li>25672: used for inter-node and CLI tools communication (Erlang distribution server port)
   and is allocated from a dynamic range (limited to a single port by default,
   computed as AMQP port + 20000). Unless external connections on these ports are really necessary (e.g.
   the cluster uses <a href="federation.html">federation</a> or CLI tools are used on machines outside the subnet),
   these ports should not be publicly exposed. See <a href="networking.html">networking guide</a> for details.</li>
<li>35672-35682: used by CLI tools (Erlang distribution client ports) for communication with nodes
   and is allocated from a dynamic range (computed as server distribution port + 10000 through
   server distribution port + 10010). See <a href="networking.html">networking guide</a> for details.</li>
<li>15672: <a href="management.html">HTTP API</a> clients, <a href="management.html">management UI</a> and <a href="management-cli.html">rabbitmqadmin</a>
   (only if the <a href="management.html">management plugin</a> is enabled)</li>
<li>61613, 61614: <a href="https://stomp.github.io/stomp-specification-1.2.html">STOMP clients</a> without and with TLS (only if the <a href="stomp.html">STOMP plugin</a> is enabled)</li>
<li>1883, 8883: <a href="http://mqtt.org/">MQTT clients</a> without and with TLS, if the <a href="mqtt.html">MQTT plugin</a> is enabled</li>
<li>15674: STOMP-over-WebSockets clients (only if the <a href="web-stomp.html">Web STOMP plugin</a> is enabled)</li>
<li>15675: MQTT-over-WebSockets clients (only if the <a href="web-mqtt.html">Web MQTT plugin</a> is enabled)</li>
<li>15692: Prometheus metrics (only if the <a href="prometheus.html">Prometheus plugin</a> is enabled)</li>
</ul>
<p>It is possible to <a href="configure.html">configure RabbitMQ</a>
to use <a href="networking.html">different ports and specific network interfaces</a>.</p>
<h2><a id="default-user-access" class="anchor" href="#default-user-access">Default User Access</a></h2>
<p>The broker creates a user <span class="code ">guest</span> with password
<span class="code ">guest</span>. Unconfigured clients will in general use these
credentials. <strong>By default, these credentials can only be
used when connecting to the broker as localhost</strong> so you
will need to take action before connecting from any other
machine.</p>
<p>See the documentation on <a href="access-control.html">access control</a> for information on how to create more users and delete
the <span class="code ">guest</span> user.</p>
<h2><a id="kernel-resource-limits" class="anchor" href="#kernel-resource-limits">Controlling System Limits on Linux</a></h2>
<p>RabbitMQ installations running production workloads may need system
limits and kernel parameters tuning in order to handle a decent number of
concurrent connections and queues. The main setting that needs adjustment
is the max number of open files, also known as <span class="code ">ulimit -n</span>.
The default value on many operating systems is too low for a messaging
broker (<span class="code ">1024</span> on several Linux distributions). We recommend allowing
for at least 65536 file descriptors for user <span class="code ">rabbitmq</span> in
production environments. 4096 should be sufficient for many development
workloads.</p>
<p>There are two limits in play: the maximum number of open files the OS kernel
allows (<span class="code ">fs.file-max</span>) and the per-user limit (<span class="code ">ulimit -n</span>).
The former must be higher than the latter.</p>
<h3><a id="max-open-files-limit" class="anchor" href="#max-open-files-limit">With systemd (Recent Linux Distributions)</a></h3>
<p>On distributions that use systemd, the OS limits are controlled via
a configuration file at <span class="code ">/etc/systemd/system/rabbitmq-server.service.d/limits.conf</span>.
For example, to set the max open file handle limit (<span class="code ">nofile</span>) to <span class="code ">64000</span>:</p>
<pre class="lang-ini">
[Service]
LimitNOFILE=64000
</pre>

<p>See <a href="https://www.freedesktop.org/software/systemd/man/systemd.exec.html">systemd documentation</a> to learn about
the supported limits and other directives.</p>
<h3>With Docker</h3>
<p>To configure kernel limits for Docker contains, use the <span class="code ">"default-ulimits"</span> key in <a href="https://docs.docker.com/engine/reference/commandline/dockerd/#daemon-configuration-file">Docker daemon configuration file</a>.
The file has to be installed on Docker hosts at <span class="code ">/etc/docker/daemon.json</span>:</p>
<pre class="lang-json">
{
  "default-ulimits": {
    "nofile": {
      "Name": "nofile",
      "Hard": 64000,
      "Soft": 64000
    }
  }
}
</pre>

<h3><a id="verifying-limits" class="anchor" href="#verifying-limits">Verifying the Limit</a></h3>
<p><a href="management.html">RabbitMQ management UI</a> displays the number of file descriptors available
for it to use on the Overview tab.</p>
<pre class="lang-bash">rabbitmq-diagnostics status</pre>

<p>includes the same value.</p>
<p>The following command</p>
<pre class="lang-bash">
cat /proc/$RABBITMQ_BEAM_PROCESS_PID/limits
</pre>

<p>can be used to display effective limits of a running process. <span class="code ">$RABBITMQ_BEAM_PROCESS_PID</span>
is the OS PID of the Erlang VM running RabbitMQ, as returned by <span class="code ">rabbitmq-diagnostics status</span>.</p>
<h2><a id="managing-service" class="anchor" href="#managing-service">Managing the Service</a></h2>
<p>To start and stop the server, use the <span class="code ">systemctl</span> tool.
The service name is <span class="code ">rabbitmq-server</span>:</p>
<pre class="lang-bash">
# stop the local node
sudo systemctl stop rabbitmq-server

# start it back
sudo systemctl start rabbitmq-server
</pre>

<p><span class="code ">systemctl status rabbitmq-server</span> will report service status
as observed by systemd (or similar service manager):</p>
<pre class="lang-bash">
# check on service status as observed by service manager
sudo systemctl status rabbitmq-server
</pre>

<p>It will produce output similar to this:</p>
<pre class="lang-ini">
Redirecting to /bin/systemctl status rabbitmq-server.service
● rabbitmq-server.service - RabbitMQ broker
   Loaded: loaded (/usr/lib/systemd/system/rabbitmq-server.service; enabled; vendor preset: disabled)
  Drop-In: /etc/systemd/system/rabbitmq-server.service.d
           └─limits.conf
   Active: active (running) since Wed 2021-05-07 10:21:32 UTC; 25s ago
 Main PID: 957 (beam.smp)
   Status: "Initialized"
   CGroup: /system.slice/rabbitmq-server.service
           ├─ 957 /usr/lib/erlang/erts-10.2/bin/beam.smp -W w -A 64 -MBas ageffcbf -MHas ageffcbf -MBlmbcs 512 -MHlmbcs 512 -MMmcs 30 -P 1048576 -t 5000000 -stbt db -zdbbl 128000 -K true -- -root /usr/lib/erlang -progname erl -- -home /var/lib/rabbitmq -- ...
           ├─1411 /usr/lib/erlang/erts-10.2/bin/epmd -daemon
           ├─1605 erl_child_setup 400000
           ├─2860 inet_gethost 4
           └─2861 inet_gethost 4

Dec 26 10:21:30 localhost.localdomain rabbitmq-server[957]: ##  ##
Dec 26 10:21:30 localhost.localdomain rabbitmq-server[957]: ##  ##      RabbitMQ 3.11.13. Copyright (c) 2007-2023 VMware, Inc. or its affiliates.
Dec 26 10:21:30 localhost.localdomain rabbitmq-server[957]: ##########  Licensed under the MPL 2.0. Website: https://www.rabbitmq.com/
Dec 26 10:21:30 localhost.localdomain rabbitmq-server[957]: ######  ##
Dec 26 10:21:30 localhost.localdomain rabbitmq-server[957]: ##########  Logs: /var/log/rabbitmq/rabbit@localhost.log
Dec 26 10:21:30 localhost.localdomain rabbitmq-server[957]: /var/log/rabbitmq/rabbit@localhost_upgrade.log
Dec 26 10:21:30 localhost.localdomain rabbitmq-server[957]: Starting broker...
Dec 26 10:21:32 localhost.localdomain rabbitmq-server[957]: systemd unit for activation check: "rabbitmq-server.service"
Dec 26 10:21:32 localhost.localdomain systemd[1]: Started RabbitMQ broker.
Dec 26 10:21:32 localhost.localdomain rabbitmq-server[957]: completed with 6 plugins.
</pre>

<p><span class="code ">rabbitmqctl</span>, <span class="code ">rabbitmq-diagnostics</span>,
and other <a href="cli.html">CLI tools</a> will be available in <span class="code ">PATH</span> and can be invoked by a <span class="code ">sudo</span>-enabled user:</p>
<pre class="lang-bash">
# checks if the local node is running and CLI tools can successfully authenticate with it
sudo rabbitmq-diagnostics ping

# prints enabled components (applications), TCP listeners, memory usage breakdown, alarms
# and so on
sudo rabbitmq-diagnostics status

# prints cluster membership information
sudo rabbitmq-diagnostics cluster_status

# prints effective node configuration
sudo rabbitmq-diagnostics environment
</pre>

<p>All <span class="code ">rabbitmqctl</span> commands will report an error if no node is running.
See the <a href="cli.html">CLI tools</a> and <a href="monitoring.html">Monitoring</a> guides to learn more.</p>
<h2><a id="server-logs" class="anchor" href="#server-logs">Log Files and Management</a></h2>
<p><a href="logging.html">Server logs</a> can be found under the <a href="relocate.html">configurable</a> directory, which usually
defaults to <span class="code ">/var/log/rabbitmq</span> when RabbitMQ is installed via a Linux package manager.</p>
<p><span class="code ">RABBITMQ_LOG_BASE</span> can be used to override <a href="relocate.html">log directory location</a>.</p>
<p>Assuming a <span class="code ">systemd</span>-based distribution, system service logs can be
inspected using</p>
<pre class="lang-bash">
journalctl --system
</pre>

<p>which requires superuser privileges.
Its output can be filtered to narrow it down to RabbitMQ-specific entries:</p>
<pre class="lang-bash">
sudo journalctl --system | grep rabbitmq
</pre>

<p>The output will look similar to this:</p>
<pre class="lang-ini">
Dec 26 11:03:04 localhost rabbitmq-server[968]: ##  ##
Dec 26 11:03:04 localhost rabbitmq-server[968]: ##  ##      RabbitMQ 3.11.15. Copyright (c) 2007-2023 VMware, Inc. or its affiliates.
Dec 26 11:03:04 localhost rabbitmq-server[968]: ##########  Licensed under the MPL 2.0. Website: https://www.rabbitmq.com/
Dec 26 11:03:04 localhost rabbitmq-server[968]: ######  ##
Dec 26 11:03:04 localhost rabbitmq-server[968]: ##########  Logs: /var/log/rabbitmq/rabbit@localhost.log
Dec 26 11:03:04 localhost rabbitmq-server[968]: /var/log/rabbitmq/rabbit@localhost_upgrade.log
Dec 26 11:03:04 localhost rabbitmq-server[968]: Starting broker...
Dec 26 11:03:05 localhost rabbitmq-server[968]: systemd unit for activation check: "rabbitmq-server.service"
Dec 26 11:03:06 localhost rabbitmq-server[968]: completed with 6 plugins.
</pre>

<h3>Log Rotation</h3>
<p>The broker always appends to the <a href="logging.html">log files</a>, so a complete log history is retained.</p>
<p><a href="https://linux.die.net/man/8/logrotate">logrotate</a> is the recommended way of log file rotation and compression.
By default, the package will set up <span class="code ">logrotate</span> to run weekly on files located in default
<span class="code ">/var/log/rabbitmq</span> directory. Rotation configuration can be found in
<span class="code ">/etc/logrotate.d/rabbitmq-server</span>.</p>
<h2><a id="apt-launchpad-erlang" class="anchor" href="#apt-launchpad-erlang">Install Erlang from an Apt Repository (PPA) on Launchpad</a></h2>
<p>This additional section covers installation of modern Erlang packages from Launchpad. To install
modern Erlang and RabbitMQ, please refer to the sections above:</p>
<ul>
<li><a href="#apt-packagecloud">Install RabbitMQ from PackageCloud</a> and Launchpad</li>
<li><a href="#apt-cloudsmith">Install RabbitMQ from Cloudsmith</a></li>
</ul>
<h3>Modern Erlang on Ubuntu and Debian</h3>
<p>Standard Debian and Ubuntu repositories tend to provide outdated versions of Erlang/OTP. Team RabbitMQ maintains
an apt repository that includes <a href="https://launchpad.net/~rabbitmq/+archive/ubuntu/rabbitmq-erlang">packages of latest Erlang/OTP releases</a>
on Launchpad.</p>
<p>RabbitMQ core team focus around package is on the current and prior release of Debian-based distributions,
which is in line with <a href="https://wiki.debian.org/DebianReleases">distribution EOL policy</a>.</p>
<p>The Erlang packages currently support the following Ubuntu distributions:</p>
<ul>
<li>Ubuntu 22.04 (Jammy)</li>
<li>Ubuntu 20.04 (Focal)</li>
<li>Ubuntu 18.04 (Bionic)</li>
</ul>
<p>and the following Debian releases:</p>
<ul>
<li>Debian 11 (Bullseye)</li>
<li>Debian 10 (Buster)</li>
</ul>
<p>Launchpad PPA only provides the most recent release of Erlang 25.3.x.
Cloudsmith and its mirror currently provides the most recent patch release in the following Erlang series:</p>
<ul>
<li>25.x</li>
<li>24.x</li>
</ul>
<p>In order to use the repository, it is necessary to</p>
<ul>
<li>Install prerequisites needed to download signing keys and packages over HTTPS</li>
<li>Add repository signing key to your system. <span class="code ">apt</span> will verify package signatures during installation.</li>
<li>Add a source list file for the repository</li>
<li>Update package metadata</li>
<li>Install Erlang packages required by RabbitMQ</li>
</ul>
<h3>Install Essential Dependencies</h3>
<pre class="lang-bash">
sudo apt-get update -y

sudo apt-get install curl gnupg -y
</pre>

<h3><a id="erlang-apt-repo-signing-key" class="anchor" href="#erlang-apt-repo-signing-key">Add Repository Signing Key</a></h3>
<p>In order to use the repository, add <a href="signatures.html">RabbitMQ signing key</a> to the system.
This will enable apt to trust packages signed by that key.</p>
<pre class="lang-bash">
# primary RabbitMQ signing key
curl -1sLf "https://github.com/rabbitmq/signing-keys/releases/download/2.0/rabbitmq-release-signing-key.asc" | sudo gpg --dearmor | sudo tee /usr/share/keyrings/com.github.rabbitmq.signing.gpg &gt; /dev/null

# Launchpad PPA signing key for apt
curl -1sLf "https://keyserver.ubuntu.com/pks/lookup?op=get&amp;search=0xf77f1eda57ebb1cc" | sudo gpg --dearmor | sudo tee /usr/share/keyrings/net.launchpad.ppa.rabbitmq.erlang.gpg &gt; /dev/null
</pre>

<p>See the <a href="signatures.html">guide on signatures</a> to learn more.</p>
<h3><a id="erlang-apt-https-transport" class="anchor" href="#erlang-apt-https-transport">Enable apt HTTPS Transport</a></h3>
<p>In order for apt to be able to download RabbitMQ and Erlang packages from services such as PackageCloud, Cloudsmith.io or Launchpad, the <span class="code ">apt-transport-https</span> package must be installed:</p>
<pre class="lang-bash">
sudo apt-get install apt-transport-https
</pre>

<h3><a id="erlang-source-list-file" class="anchor" href="#erlang-source-list-file">Add a Source List File</a></h3>
<p>As with all 3rd party Apt (Debian) repositories, a file describing the repository
must be placed under the <span class="code ">/etc/apt/sources.list.d/</span> directory.
<span class="code ">/etc/apt/sources.list.d/erlang.list</span> is the recommended location.</p>
<p>The file should have a source (repository) definition line that uses the following
pattern:</p>
<pre class="lang-bash">
# This Launchpad PPA repository provides Erlang packages produced by the RabbitMQ team
#
# Replace $distribution with the name of the Ubuntu release used. On Debian,
# use "bionic"
deb [signed-by=/usr/share/keyrings/net.launchpad.ppa.rabbitmq.erlang.gpg] http://ppa.launchpad.net/rabbitmq/rabbitmq-erlang/ubuntu $distribution main
deb-src [signed-by=/usr/share/keyrings/net.launchpad.ppa.rabbitmq.erlang.gpg] http://ppa.launchpad.net/rabbitmq/rabbitmq-erlang/ubuntu $distribution main
</pre>

<p>The next section discusses what distribution values are supported by the Launchpad PPA.</p>
<h4>Distribution</h4>
<p>In order to set up an apt repository that provides the correct package, a few
decisions have to be made. One is determining the distribution name. It typically matches
the Debian or Ubuntu release used but only a handful of distributions are
supported (indexed) by the Erlang Debian packages maintained by Team RabbitMQ:</p>
<ul>
<li><span class="code ">jammy</span> for Ubuntu 22.04</li>
<li><span class="code ">focal</span> for Ubuntu 20.04</li>
<li><span class="code ">bionic</span> for Ubuntu 18.04</li>
<li><span class="code ">bionic</span> for Debian Buster, Bullseye, and Sid</li>
</ul>
<p>However, not all distributions are covered (indexed).
But there are good news: since the package indexed for these distributions is identical,
any reasonably recent distribution name would suffice
in practice. For example, users of Debian Buster, Debian Sid, Ubuntu Disco and Ubuntu Eoan
can use both <span class="code ">stretch</span> and <span class="code ">bionic</span> for distribution name.</p>
<p>Below is a table of OS release and distribution names that should be used
with the Launchpad repository.</p>
<table>
<thead>
<tr>
<th>Release</th>
<th>Distribution Name</th>
</tr>
</thead>
<tbody>
<tr>
<td>Ubuntu 23.04</td>
<td><span class="code ">jammy</span></td>
</tr>
<tr>
<td>Ubuntu 22.04</td>
<td><span class="code ">jammy</span></td>
</tr>
<tr>
<td>Ubuntu 20.04</td>
<td><span class="code ">focal</span></td>
</tr>
<tr>
<td>Ubuntu 18.04</td>
<td><span class="code ">bionic</span></td>
</tr>
<tr>
<td>Debian Bullseye</td>
<td><span class="code ">bionic</span></td>
</tr>
<tr>
<td>Debian Buster</td>
<td><span class="code ">bionic</span></td>
</tr>
<tr>
<td>Debian Sid</td>
<td><span class="code ">bionic</span></td>
</tr>
</tbody>
</table>
<h3><a id="installing-erlang-package" class="anchor" href="#installing-erlang-package">Install Erlang Packages</a></h3>
<p>After updating the list of <span class="code ">apt</span> sources it is necessary to run <span class="code ">apt-get update</span>:</p>
<pre class="lang-bash">
sudo apt-get update -y
</pre>

<p>Then packages can be installed just like with the standard Debian repositories:</p>
<pre class="lang-bash">
# This is recommended. Metapackages such as erlang and erlang-nox must only be used
# with apt version pinning. They do not pin their dependency versions.
sudo apt-get install -y erlang-base \
                        erlang-asn1 erlang-crypto erlang-eldap erlang-ftp erlang-inets \
                        erlang-mnesia erlang-os-mon erlang-parsetools erlang-public-key \
                        erlang-runtime-tools erlang-snmp erlang-ssl \
                        erlang-syntax-tools erlang-tftp erlang-tools erlang-xmerl
</pre><div id="help-and-feedback"><h2>Getting Help and Providing Feedback</h2><p>
                    If you have questions about the contents of this guide or
                    any other topic related to RabbitMQ, don't hesitate to ask them
                    on the <a href="https://groups.google.com/forum/#!forum/rabbitmq-users">RabbitMQ mailing list</a>.
                  </p></div><div id="contribute"><h2>Help Us Improve the Docs &lt;3</h2><p>
                    If you'd like to contribute an improvement to the site,
                    its source is <a href="https://github.com/rabbitmq/rabbitmq-website">available on GitHub</a>.
                    Simply fork the repository and submit a pull request. Thank you!
                  </p></div></div><div id="right-nav"></div></div><div class="clear"></div><div class="pageFooter"><div class="container"></div><div class="container"><div class="rabbit-logo"><a href="/"><img src="/img/logo-rabbitmq-white.svg" alt="RabbitMQ" /></a></div><ul class="footerNav"><li><a href="/#features">Features</a></li><li><a href="/#getstarted">Get Started</a></li><li><a href="/#support">Support</a></li><li><a href="/#community">Community</a></li><li><a href="/documentation.html">Docs</a></li></ul><p id="copyright">
          Copyright © 2007-2023 <a href="https://tanzu.vmware.com/">VMware</a>, Inc. or its affiliates. All rights reserved.
          <a href="https://www.vmware.com/help/legal.html">Terms of Use</a> •
          <a href="https://www.vmware.com/help/privacy.html">Privacy</a> •
          <a href="/trademark-guidelines.html">Trademark Guidelines</a> •
          <a href="https://www.vmware.com/help/privacy/california-privacy-rights.html">Your California Privacy Rights</a> •
          <a class="ot-sdk-show-settings">Cookie Settings</a><br /><a id="teconsent"></a></p></div></div></div><script type="text/javascript" src="/js/highlight.pack.js"></script><script type="text/javascript">
        // code highlighting
        window.addEventListener("load", function() {
          const selectors = "pre.lang-apacheconf, \
                             pre.lang-bash, \
                             pre.lang-csharp, \
                             pre.lang-clojure, \
                             pre.lang-elixir, \
                             pre.lang-erlang, \
                             pre.lang-go, \
                             pre.lang-groovy, \
                             pre.lang-haskell, \
                             pre.lang-ini, \
                             pre.lang-java, \
                             pre.lang-javascript, \
                             pre.lang-json, \
                             pre.lang-makefile, \
                             pre.lang-nginxconf, \
                             pre.lang-objectivec, \
                             pre.lang-php, \
                             pre.lang-plaintext, \
                             pre.lang-powershell, \
                             pre.lang-python, \
                             pre.lang-ruby, \
                             pre.lang-swift, \
                             pre.lang-yaml, \
                             pre.lang-xml";
          document.querySelectorAll(selectors).forEach(function(el) {
            hljs.highlightBlock(el);
          });
        });
      </script></body>
</html>
